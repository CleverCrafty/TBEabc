on_actions = {
	#### PEACE/WAR VICTORY ON_CAPITULATION BLOCK ####
	#### PUT YOUR SHIT HERE
	# At the end of each global block, set the skip_default_capitulation GLOBAL flag
	# Otherwise shit will just get annexed
	# Really
	# It will.

	# FROM = winner
	# ROOT = country being capitulated/loser
	
	# Anytime y'all are triggering the popup manually, please add 1 to the dirty variable, `global.peace_popup_dirty`

	#See TNO_economy_scripted_effects regarding how transfer_GDP works
	on_capitulation = {
		effect = {
			log = "[GetDateText]: FROM: [From.GetName] ROOT: [Root.GetName] on_capitulation"

			set_global_flag = show_peace_popup_alert
			FROM = {
				save_global_event_target_as = winning_country
			}
			ROOT = {
				save_global_event_target_as = losing_country
			}

			log = "[GetDateText]: winner/loser: FROM: [winning_country.GetName] ROOT: [losing_country.GetName] on_capitulation"

			if = {
				limit = {
					event_target:losing_country = {
						any_allied_country = {
							has_war_together_with = event_target:losing_country
						}
					}
				}
				set_global_flag = losing_country_multiple
			}

			if = {
				limit = {
					event_target:winning_country = {
						any_allied_country = {
							has_war_together_with = event_target:winning_country
						}
					}
				}
				set_global_flag = winning_country_multiple
			}
			add_to_variable = { global.peace_popup_dirty = 1 }

			#Annexation block
			#This if block will only fire if FROM (capitulator) and ROOT (country being capitulated)
			#That is to say, if one side has completely lost (nobody left to fight on)
			FROM = { # winner simply gets GDP recalculated :)
				recalculate_GDP_and_PUs_on_demand = yes
			}
			if = {
				limit = {
					OR = {
						ROOT = { is_in_faction = no }
						ROOT = {
							all_allied_country = {
								has_capitulated = yes
							}
						}
					}
				}
				log = "war_won"
				set_global_flag = war_won

				#GDP is no longer transferred.
				# every_country = {
				# 	limit = {
				# 		OR = {
				# 			is_in_faction_with = ROOT
				# 			original_tag = ROOT
				# 		}
				# 	}
				# 	FROM = {
				# 		#transfer_GDP = yes
				# 	}
				# }

				if = {
					limit = {
						FROM = {
							is_russian_nation = yes
						}
						ROOT = {
							is_russian_nation = yes
						}
					}
					RUS_capitulation_effect = yes
				}
				
				#Second Triple Alliance War, Paraguay must accept its destiny.
				if = {
					limit = {
						ROOT = {
							original_tag = PAR
						}
						FROM = {
							OR = {
								original_tag = ARG
								original_tag = BRA
								original_tag = URG
							}
						}
					}

					FROM = {
						white_peace = ROOT
						every_country = {
						    news_event = {
							    id = LATAM_news.112
						    }
					    }
						ARP = {
							add_state_core = 1624
							add_state_core = 1622
							add_state_core = 1621
							add_state_core = 1617
							add_state_core = 1618
							transfer_state = 1624
							transfer_state = 1622
							transfer_state = 1621
							transfer_state = 1617
							transfer_state = 1618
							TNO_startup_nation = yes

							if = {
								limit = { ARG = { has_country_flag = HAS_ECON_SPHERE } }
								econ_join_sphere_ARG = yes
							}
						}
						BRP = {
							add_state_core = 301
							add_state_core = 1619
							add_state_core = 1620
							add_state_core = 688
							add_state_core = 1623
							transfer_state = 301
							transfer_state = 1619
							transfer_state = 1620
							transfer_state = 688
							transfer_state = 1623
							TNO_startup_nation = yes

							if = {
								limit = { BRA = { has_country_flag = HAS_ECON_SPHERE } }
								econ_join_sphere_BRA = yes
							}
							else_if = {
								limit = { BRA = { has_country_flag = joined_andean_pact } }
								econ_join_sphere_ADN = yes
							}
						}
						URP = {
							add_state_core = 1616
							transfer_state = 1616
							TNO_startup_nation = yes
						}
						ARG = {
							set_autonomy = {
								target = ARP
								autonomy_state = autonomy_military_government
							}
						}
						BRA = {
						    country_event = PAR_invasion.11
							set_autonomy = {
								target = BRP
								autonomy_state = autonomy_military_government
							}
							if = {
								limit = { BRA = { is_in_faction_with = USA } }
								BRP = {
									USA = { add_to_faction = BRP }
									add_ideas = OFN_Military_Government
								}
							}
						}
						URG = {
							set_autonomy = {
								target = URP
								autonomy_state = autonomy_military_government
							}
						}
						GER = {
						    if = {
						    	limit = {
									has_country_leader = {
										character = GER_albert_speer
										ruling_only = yes
									}
								}
						        country_event = PAR_invasion.802
						    }
						}
						URP = {
							set_politics = { ruling_party = authoritarian_democracy }
							set_popularities = { authoritarian_democracy = 100 }
						}
						BRP = {
							set_politics = { ruling_party = authoritarian_democracy }
							set_popularities = { authoritarian_democracy = 100 }
						}
						ARP = {
							set_politics = { ruling_party = authoritarian_democracy }
							set_popularities = { authoritarian_democracy = 100 }
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#KOKSHETAU capitulates any nation
				else_if = {
					limit = {
						FROM = {
							original_tag = KOK
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						#khanate_update_reliance_unrest = yes
					}
					set_global_flag = skip_default_capitulation
				}

				#Indonesian civil war : FRI win
				else_if = {
					limit = {
						FROM = {
							original_tag = FRI #free indo
						}
						ROOT = {
							original_tag = INS #normal indo
						}
					}

					FRI = {
						country_event = indonesiapeace.2
					}
					GER = {
						if = {
							limit = { has_country_flag = SGR_pacific_war }
							country_event = speer_indonesia.1
						}
					}
				}

				#Indonesian civil war : INS win
				else_if = {
					limit = {
						FROM = {
							original_tag = INS #normal indo
						}
						ROOT = {
							original_tag = FRI #free indo
						}
					}

					INS = {
						country_event = indonesiapeace.3
					}
					GER = {
						if = {
							limit = { has_country_flag = SGR_pacific_war }
							country_event = speer_indonesia.2
						}
					}
				}

				### Burgundy AI Collapse

				else_if = {
					limit = {
						FROM = {
							OR = {
								is_in_faction_with = GER
								is_in_faction_with = USA
								original_tag = PIC
								original_tag = FLR
								original_tag = BEL
								original_tag = RPY
								original_tag = BRG
							}
						}
						ROOT = {
							OR = {
								original_tag = PIC
								original_tag = FLR
								original_tag = BEL
								original_tag = RPY
								original_tag = BRG
							}
						}
					}

					if = {
						limit = {
							ROOT = { tag = BRG }
						}
						BRG = { country_event = { id = BRG_collapse.103 } }
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}

					if = {
						limit = {
							NOT = {
								country_exists = PIC
								country_exists = BRG
								country_exists = BEL
								country_exists = FLR
							}
							OR = {
								has_global_flag = BRG_AI_Collapse_OFN_France
								NOT = { country_exists = RPY }
							}
						}

						if = {
							limit = {
								has_global_flag = BRG_AI_Collapse_OFN_France
								country_exists = RPY
							}
							FRA = { country_event = BRG_ai_collapse.101 }
						}

						GER = { BRG_AI_Collapse_Determine_Outcome = yes }
					}
					set_global_flag = skip_default_capitulation
				}

				#OSTLAND
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = OST
								original_tag = MST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
						ROOT = {
							OR = {
								original_tag = OST
								original_tag = MST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
					}

					OST_off_a_fucker = yes
					OST_check_victor = yes

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Legion defeats everyone
				else_if = {
					limit = {
						FROM = {
							original_tag = UTL
						}
						ROOT = { 
							OR = {
								original_tag = KRK
								original_tag = UZB
								original_tag = KYR
								original_tag = TAJ
								original_tag = TRK
							}
						}
						has_global_flag = TK_GER_Victory
					}
					UTL = {
						add_to_variable = { legion_killed = 1 }
						if = {
							limit = {
								check_variable = {
									legion_killed = 5
								}
							}
							UTL = {
								country_event = {
									id = CA_TK_skeleton.26
								}
								every_owned_state = {
									remove_core_of = KRK
									remove_core_of = UZB
									remove_core_of = KYR
									remove_core_of = TAJ
									remove_core_of = TRK
									add_core_of = PREV
								}
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				# Tajikistan and Kyrgyzstan kill Legion
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = KYR
								original_tag = TAJ
							}
						}
						ROOT = { 
							original_tag = UTL
						}
						has_global_flag = TK_JAP_Victory
					}
					KYR = {
						country_event = {
							id = CA_TK_skeleton.30
						}
					}
					set_global_flag = skip_default_capitulation
				}
				# Turkmenistan defeats legion
				else_if = {
					limit = {
						FROM = {
							original_tag = TRK
						}
						ROOT = { 
							original_tag = UTL
						}
						has_global_flag = TK_USA_Victory
					}
					TRK = {
						country_event = {
							id = CA_TK_skeleton.33
						}
						annex_country = {
							target = UTL
							transfer_troops = no
						}
						every_owned_state = {
							remove_core_of = KRK
							remove_core_of = UZB
							remove_core_of = KYR
							remove_core_of = TAJ
							remove_core_of = UTL
							add_core_of = PREV
						}
					}
					set_global_flag = skip_default_capitulation
				}
				# Turkmenistan defeats TAJ/KYR
				else_if = {
					limit = {
						FROM = {
							original_tag = TRK
						}
						ROOT = { 
							OR = {
								original_tag = TAJ
								original_tag = KYR
							}
						}
						has_global_flag = TK_USA_Victory
					}
					TRK = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						every_owned_state = {
							remove_core_of = KRK
							remove_core_of = UZB
							remove_core_of = KYR
							remove_core_of = TAJ
							remove_core_of = UTL
							add_core_of = PREV
						}
						add_to_variable = {
							TRK.TRK_annexed = 1
						}
						if = {
							limit = {
								check_variable = {
									TRK.TRK_annexed = 2
								}
							}
							TRK = {
								country_event = {
									id = CA_TK_skeleton.34
								}
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Second Italo-Turkish War
				else_if = {
					limit = {
						FROM = {
							original_tag = IME
						}
						ROOT = {
							OR = {
								original_tag = SNS
								original_tag = BKU
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {
							original_tag = IME
						}
						ROOT = {
							original_tag = TUR
						}
					}

					FROM = {
						white_peace = ROOT
						TUR = {
							country_event = itatur.10
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {
							original_tag = TUR
						}
						ROOT = {
							original_tag = IME
						}
					}

					FROM = {
						white_peace = ROOT
						ITA = {
							country_event = itatur.4
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Yemen Civil War
				else_if = {
					limit = {
						FROM = {
							original_tag = YEM
						}
						ROOT = {
							original_tag = NYM
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						YEM = { country_event = { id = YEM.6 } }
					}
					set_global_flag = OC_Yemen_CW_over
					OIL_YEM_win_yemen = yes
					OIL_check_remove_forpol_tab = yes
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {
							original_tag = NYM
						}
						ROOT = {
							original_tag = YEM
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						NYM = { country_event = { id = YEM.7 } }
					}
					ITA = {
						if = {
							limit = {
								has_country_flag = ITA_ciano_wins
							}
							ITA_army_add_borghese_pop = yes
							ITA_airforce_add_borghese_pop = yes
							ITA_navy_add_borghese_pop = yes
							ITA_carabinieri_add_borghese_pop = yes
							set_global_flag = ITA_lost_oil_crisis
						}
						else_if = {
							limit = {
								has_country_flag = ITA_scorza_wins
							}
							ITA_army_add_sogno_pop = yes
							ITA_airforce_add_sogno_pop = yes
							ITA_navy_add_sogno_pop = yes
							ITA_carabinieri_add_sogno_pop = yes
							set_global_flag = ITA_lost_oil_crisis
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Saudi Arabian & Baathist epic showdown
				else_if = {
					limit = {
						FROM = {
							original_tag = NYM
						}
						ROOT = {
							original_tag = SAU
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						NYM = { country_event = { id = YEM.10 } }
					}
					set_global_flag = OC_Yemen_CW_over
					OIL_NYM_win_yemen = yes
					OIL_check_remove_forpol_tab = yes
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {
							original_tag = SAU
						}
						ROOT = {
							original_tag = NYM
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}

						SAU = { country_event = { id = YEM.9 } }
					}
					set_global_flag = OC_Yemen_CW_over
					set_global_flag = skip_default_capitulation
					OIL_SAU_win_yemen = yes
					OIL_check_remove_forpol_tab = yes
				}
				#Oman civil war
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = OMA
								tag = OMB
								tag = OMI
							}
						}
						ROOT = {
							OR = {
								tag = OMA
								tag = OMB
								tag = OMI
							}
						}
					}
					FROM = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						if = {
							limit = {
								tag = OMA
								owns_state = 913 #NOT = { country_exists = OMB }
								owns_state = 914 #NOT = { country_exists = OMI }
							}
							OMA = { country_event = { id = OMA.6 } }
							set_global_flag = OC_Oman_CW_over
							OIL_OMA_win_oman = yes
							OIL_check_remove_forpol_tab = yes
						}
						else_if = {
							limit = {
								tag = OMB
								owns_state = 294 #NOT = { country_exists = OMA }
								owns_state = 914 #NOT = { country_exists = OMI }
							}
							OMB = { country_event = { id = OMA.8 } }
							set_global_flag = OC_Oman_CW_over
							OIL_OMB_win_oman = yes
							OIL_check_remove_forpol_tab = yes
						}
						else_if = {
							limit = {
								tag = OMI
								owns_state = 294 #NOT = { country_exists = OMA }
								owns_state = 913 #NOT = { country_exists = OMB }
							}
							OMI = { country_event = { id = OMA.7 } }
							set_global_flag = OC_Oman_CW_over
							OIL_OMI_win_oman = yes
							OIL_check_remove_forpol_tab = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Egypt civil war
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = EGY
								tag = EGB
								tag = EGQ
							}
						}
						ROOT = {
							OR = {
								tag = EGY
								tag = EGB
								tag = EGQ
							}
						}
					}
					FROM = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						if = {
							limit = {
								tag = EGB
								owns_state = 446 #NOT = { country_exists = EGY }
								owns_state = 552 #NOT = { country_exists = EGQ }
							}
							EGB = { country_event = { id = egy.12 } }
							set_global_flag = OC_Egypt_CW_over
							OIL_EGB_win_egypt = yes
							OIL_check_remove_forpol_tab = yes
						}
						else_if = {
							limit = {
								tag = EGY
								owns_state = 456 #NOT = { country_exists = EGB }
								owns_state = 552 #NOT = { country_exists = EGQ }
								EGQ = { has_country_flag = EGQ_has_spawned }
							}
							EGY = { country_event = { id = egy.11 } }
							set_global_flag = OC_Egypt_CW_over
							OIL_EGY_win_egypt = yes
							OIL_check_remove_forpol_tab = yes
						}
						else_if = {
							limit = {
								tag = EGQ
								owns_state = 446 #NOT = { country_exists = EGY }
								owns_state = 456 #NOT = { country_exists = EGB }
							}
							EGQ = { country_event = { id = egy.13 } }
							set_global_flag = OC_Egypt_CW_over
							OIL_EGQ_win_egypt = yes
							OIL_check_remove_forpol_tab = yes
						}
					}
					if = {
						limit = {
							ROOT = { original_tag = EGY }
						}
						ITA = {
							if = {
								limit = {
									has_country_flag = ITA_ciano_wins
								}
								ITA_army_add_borghese_pop = yes
								ITA_airforce_add_borghese_pop = yes
								ITA_navy_add_borghese_pop = yes
								ITA_carabinieri_add_borghese_pop = yes
								set_global_flag = ITA_lost_oil_crisis
							}
							else_if = {
								limit = {
									has_country_flag = ITA_scorza_wins
								}
								ITA_army_add_sogno_pop = yes
								ITA_airforce_add_sogno_pop = yes
								ITA_navy_add_sogno_pop = yes
								ITA_carabinieri_add_sogno_pop = yes
								set_global_flag = ITA_lost_oil_crisis
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Sudan civil war
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = RPS
								tag = SDS
								tag = SDF
							}
						}
						ROOT = {
							OR = {
								tag = RPS
								tag = SDS
								tag = SDF
							}
						}
					}
					FROM = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						if = {
							limit = {
								tag = RPS
								owns_state = 1123 #NOT = { country_exists = SDS }
								owns_state = 1128 #NOT = { country_exists = SDF }
							}
							RPS = { country_event = { id = sudan.2 } }
							set_global_flag = OC_Sudan_CW_over
							OIL_RPS_win_sudan = yes
							OIL_check_remove_forpol_tab = yes
						}
						else_if = {
							limit = {
								tag = SDS
								owns_state = 1120 #NOT = { country_exists = RPS }
								owns_state = 1128 #NOT = { country_exists = SDF }
							}
							SDS = { country_event = { id = sudan.3 } }
							set_global_flag = OC_Sudan_CW_over
							OIL_SDS_win_sudan = yes
							OIL_check_remove_forpol_tab = yes
						}
						else_if = {
							limit = {
								tag = SDF
								owns_state = 1120 #NOT = { country_exists = RPS }
								owns_state = 1123 #NOT = { country_exists = SDS }
							}
							SDF = { country_event = { id = sudan.4 } }
							set_global_flag = OC_Sudan_CW_over
							OIL_SDF_win_sudan = yes
							OIL_check_remove_forpol_tab = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#South Sudan civil war
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = AZA
								tag = AYA
							}
						}
						ROOT = {
							OR = {
								tag = AZA
								tag = AYA
							}
						}
					}
					FROM = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						if = {
							limit = {
								tag = AZA
							}
							AZA = { country_event = { id = sudan.5 } }
						}
						else_if = {
							limit = {
								tag = AYA
							}
							AYA = { country_event = { id = sudan.6 } }
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Iraq Civil War
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = IRQ
								original_tag = SNI
								original_tag = BIR
								original_tag = KUR
								original_tag = IRP
							}
						}
						ROOT = {
							OR = {
								original_tag = IRQ
								original_tag = SNI
								original_tag = BIR
								original_tag = KUR
								original_tag = IRP
							}
						}
					}
					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					remove_from_array = { global.IRQ_contenders = ROOT }
					if = {
						limit = {
							check_variable = { global.IRQ_contenders^num = 1 }
						}
						clear_array = global.IRQ_contenders

						set_global_flag = OC_Iraq_CW_over
						OIL_check_remove_forpol_tab = yes

						FROM = {
							if = {
								limit = { original_tag = KUR }
								KUR = { country_event = { id = IraqCW.13 } }
								OIL_KUR_win_iraq = yes
							}
							else_if = {
								limit = { original_tag = IRQ }
								IRQ = { country_event = { id = IraqCW.10 } }
								OIL_IRQ_win_iraq = yes
							}
							else_if = {
								limit = { original_tag = IRP }
								IRP = { country_event = { id = IraqCW.11 } }
								OIL_IRP_win_iraq = yes
							}
							else_if = {
								limit = { original_tag = BIR }
								BIR = { country_event = { id = IraqCW.9 } }
								OIL_BIR_win_iraq = yes
							}
							else_if = {
								limit = { original_tag = SNI }
								SNI = { country_event = { id = IraqCW.12 } }
								OIL_SNI_win_iraq = yes
							}
						}
					}
					if = {
						limit = {
							ROOT = { original_tag = IRQ }
						}
						ITA = {
							if = {
								limit = {
									has_country_flag = ITA_ciano_wins
								}
								ITA_army_add_borghese_pop = yes
								ITA_airforce_add_borghese_pop = yes
								ITA_navy_add_borghese_pop = yes
								ITA_carabinieri_add_borghese_pop = yes
								set_global_flag = ITA_lost_oil_crisis
							}
							else_if = {
								limit = {
									has_country_flag = ITA_scorza_wins
								}
								ITA_army_add_sogno_pop = yes
								ITA_airforce_add_sogno_pop = yes
								ITA_navy_add_sogno_pop = yes
								ITA_carabinieri_add_sogno_pop = yes
								set_global_flag = ITA_lost_oil_crisis
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Iranian Civil War (added Walker added this so he could get a Burgundy thing working)
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = PER
								tag = IRL
								tag = IRC
								tag = IRB
								tag = IRA
								tag = IRI
							}
						}
						ROOT = {
							OR = {
								tag = PER
								tag = IRL
								tag = IRC
								tag = IRB
								tag = IRA
								tag = IRI
							}
						}
					}
					FROM = {
						every_enemy_country = {
							limit = {
								OR = {
									original_tag = ROOT
									is_in_faction_with = ROOT
								}
							}
							remove_from_array = { global.PER_contenders = THIS }
							FROM = {
								white_peace = PREV
								annex_country = {
									target = PREV
									transfer_troops = no
								}
							}
						}
						if = { #Burgundy gains if they supported the winning faction
							limit = {
								OR = {
									tag = PER
									has_global_flag = TNO_IRA_collapsed_coalition
								}
								has_country_flag = BRG_supported_this_iranian_faction
								has_war = no
							}
							BRG = { country_event = { id = BRG_wolf.6 days = 2 } }
						}

						if = {
							limit = {
								check_variable = { global.PER_contenders^num = 1 }
							}
							clear_array = global.PER_contenders

							if = {
								limit = { country_exists = PER }
								news_event = { id = WORLD.18009 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRL }
								news_event = { id = WORLD.18010 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRC }
								news_event = { id = WORLD.18011 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRB }
								news_event = { id = WORLD.18012 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRA }
								news_event = { id = WORLD.18013 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRI }
								news_event = { id = WORLD.18014 days = 1 }
							}
							every_owned_state = {
								add_core_of = FROM
							}
							FROM = {
								set_capital = { state = 266 remember_old_capital = no }
							}
						}
						else_if = {
							limit = {
								check_variable = { global.PER_contenders^num = 2 }
								IRB = {
									exists = yes
									has_war = no
								}
								has_global_flag = TNO_IRA_collapsed_coalition
							}
							clear_array = global.PER_contenders

							if = {
								limit = { country_exists = IRL }
								news_event = { id = WORLD.18010 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRC }
								news_event = { id = WORLD.18011 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRA }
								news_event = { id = WORLD.18013 days = 1 }
							}
							else_if = {
								limit = { country_exists = IRI }
								news_event = { id = WORLD.18014 days = 1 }
							}
							every_owned_state = {
								add_core_of = FROM
							}
							FROM = {
								set_capital = { state = 266 remember_old_capital = no }
							}
						}
					}
					#Iranian Civil War (Walker added this so he could get a Burgundy thing working)
					if = { # USA Loses
						limit = { ROOT = { tag = IRL } }
						USA = { country_event = USA_IR.6 }
					}
					else_if = { # USA Wins
						limit = {
							FROM = {
								tag = IRL
								has_war = no
							}
							has_global_flag = TNO_IRA_collapsed_coalition
						}
						USA = { country_event = USA_IR.7 }
					}
					#Iranian Civil War (Thanks walker for the code - zero)
					if = { # JAP Loses
						limit = { ROOT = { tag = IRI } }
						JAP = { country_event = jap_fopo.2 }
					}
					else_if = { # JAP Wins
						limit = {
							FROM = {
								tag = IRI
								has_war = no
							}
							has_global_flag = TNO_IRA_collapsed_coalition
						}
						JAP = { country_event = jap_fopo.3 }
					}

					if = { # GER Loses
						limit = { ROOT = { tag = PER } }
						GER = { country_event = { id = reich_shared.21 days = 2 } }
					}
					else_if = { # GER Wins
						limit = {
							FROM = {
								tag = PER
								has_war = no
							}
						}
						GER = { country_event = { id = reich_shared.20 days = 2 } }
					}
					set_global_flag = skip_default_capitulation
				}
				#War with Croatia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = ITA
								is_in_faction_with = ITA
							}
						}
						ROOT = { original_tag = CRO }
					}
					CRO = {
						white_peace = ITA
						country_event = { id = cro.2 }
						set_variable = { CRO_ITA_Influence = 200 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Greek Negotiations go to shit
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = ITA
								is_in_faction_with = ITA
							}
						}
						ROOT = { original_tag = GRE }
					}
					ITA = {
						white_peace = GRE
						GRE = { save_party_popularities = yes }
						set_autonomy = {
							target = GRE
							autonomy_state = autonomy_italy_reliant
						}
						GRE = {
							apply_party_popularities = yes
							country_event = greece_path.6
							set_variable = { GRE_ITA_Influence = 200 }
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Scorza Middle East Funnies
				#Syria
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = ITA
								is_in_faction_with = ITA
							}
						}
						ROOT = {
							OR = {
								tag = SYR 
								is_in_faction_with = SYR
							}
						}
					}
					for_each_scope_loop = {
						array = SYR.faction_members
						if = {
							limit = { NOT = { tag = SYR } }
							SYR = {
								annex_country = {
									target = PREV
									transfer_troops = no
								}
							}
						}
					}
					ITA = {
						white_peace = SYR
						puppet = SYR
					}
					SYR = {
						set_cosmetic_tag = ITA_middle_east_government

						promote_character = SYR_Italo_Balbo_Ruler_Of_Arabia

						set_politics = { ruling_party = despotism }
						set_popularities = {
							communist = 11
							socialist = 22
							authoritarian_democracy = 7
							despotism = 13
							fascism = 37
							ultranationalism = 10
						}
						set_party_name = {
							ideology = despotism
							long_name = SAU_ITA_despotism_long
							name = SAU_ITA_despotism
						}
						set_party_name = {
							ideology = fascism
							long_name = SAU_ITA_despotism_long
							name = SAU_ITA_despotism
						}
						econ_join_sphere_ITA = yes
						set_temp_variable = { TNO_economy_type_temp = 2 }
						econ_type_change = yes
					}
					set_global_flag = skip_default_capitulation
				}
				#Saudis
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = ITA
								is_in_faction_with = ITA
								is_puppet_of = ITA
							}
						}
						ROOT = {
							OR = {
								tag = SAU
								is_in_faction_with = SAU
								is_puppet_of = SAU
							}
						}
					}
					if = {
						limit = {
							YEM = {
								is_puppet_of = SAU
							}
						}
						SAU = {
							annex_country = {
								target = YEM
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							GUL = {
								is_puppet_of = SAU
							}
						}
						SAU = {
							annex_country = {
								target = GUL
								transfer_troops = no
							}
						}
					}
					ITA = {
						white_peace = SAU
						set_autonomy = {
							target = SAU
							autonomy_state = autonomy_italy_governate
						}
					}
					SAU = {
						set_cosmetic_tag = ITA_middle_east_government_saudis

						promote_character = SAU_Italo_Balbo_Ruler_Of_Arabia

						set_politics = { ruling_party = despotism }
						set_popularities = {
							communist = 7
							socialist = 14
							authoritarian_democracy = 4
							despotism = 13
							fascism = 37
							ultranationalism = 25
						}
						set_party_name = {
							ideology = despotism
							long_name = SAU_ITA_despotism_long
							name = SAU_ITA_despotism
						}
						set_party_name = {
							ideology = fascism
							long_name = SAU_ITA_despotism_long
							name = SAU_ITA_despotism
						}
						econ_join_sphere_ITA = yes
						set_temp_variable = { TNO_economy_type_temp = 2 }
						econ_type_change = yes
					}
					set_global_flag = skip_default_capitulation
				}

				#Correntian War
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = ERT
								original_tag = SML
								original_tag = KEN
							}
						}
						ROOT = {
							original_tag = COR
						}
					}

					FROM = {
						white_peace = ROOT
						country_event = { id = IEA.124 }
					}
					set_global_flag = skip_default_capitulation
				}

				#Black Lions - Oromo War: Oromo Victory
				else_if = {
					limit = {
						FROM = {
							original_tag = ORM
						}
						ROOT = {
							original_tag = ETB
						}
					}

					FROM = {
						white_peace = ROOT
						country_event = { id = IEA.125 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Black Lions - Oromo War: Bl Victory
				else_if = {
					limit = {
						FROM = {
							original_tag = ETB
						}
						ROOT = {
							original_tag = ORM
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Oromo Uprising - EAMA defeated
				else_if = {
					limit = {
						FROM = {
							original_tag = ORM
						}
						ROOT = {
							original_tag = EAM
						}
					}

					FROM = {
						white_peace = ROOT
						country_event = { id = IEA.125 }
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { ##Northern Ireland War
					limit = {
						FROM = {
							OR = {
								original_tag = IRE
								is_in_faction_with = IRE
							}
						}
						ROOT = { original_tag = ULS }
					}
					IRE = {
						white_peace = ROOT
						annex_country = { target = ROOT transfer_troops = no }
					}
					if = { # UVF
						limit = {
							IRE = { has_country_flag = IRE_UVF_uprising }
						}
						IRE = {
							clr_country_flag = IRE_UVF_uprising
							remove_ideas = IRE_irish_defense_forces
							country_event = {
								id = IRE_crisis.41
							}
						}
					}
					else_if = { # IRA
						limit = {
							IRE = { has_country_flag = IRE_IRA_war }
						}
						IRE = {
							clr_country_flag = IRE_IRA_war
							country_event = {
								id = IRE_crisis.43
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = { ##Northern Ireland War
					limit = {
						FROM = { original_tag = ULS }
						ROOT = { original_tag = IRE }
					}
					IRE = {
						white_peace = ROOT
					}
					if = { # UVF
						limit = {
							IRE = { has_country_flag = IRE_UVF_uprising }
						}
						IRE = {
							remove_ideas = IRE_irish_defense_forces
							add_days_mission_timeout = {
								mission = IRE_crush_the_UVF
								days = -60
							}
						}
					}
					else_if = { # IRA
						limit = {
							IRE = { has_country_flag = IRE_IRA_war }
						}
						IRE = {
							add_days_mission_timeout = {
								mission = IRE_crush_the_IRA
								days = -60
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Pakistan-Afghanistan War

				#Afghanistan Victory
				else_if = {
					limit = {
						FROM = { original_tag = AFG }
						OR = {
							ROOT = { original_tag = PAK }
						}
					}
					PAK = {
						country_event = {
							id = release_dummy.44
							days = 1
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Pakistan Victory
				else_if = {
					limit = {
						FROM = { original_tag = PAK }
						OR = {
							ROOT = { original_tag = AFG }
						}
					}
					AFG = {
						country_event = {
							id = release_dummy.45
							days = 1
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#BURMESE INSURGENCY!!!!!
				else_if = {
					limit = {
						FROM = { original_tag = BUR }
						OR = {
							ROOT = { original_tag = SHA }
							ROOT = { original_tag = ARA }
							ROOT = { original_tag = CBR }
							ROOT = { original_tag = KAC }
							ROOT = { original_tag = RAM }
							ROOT = { original_tag = KAR }
							ROOT = { original_tag = CHN }
						}
					}
					ROOT = {
						become_exiled_in = {
							target = ZZZ
						}
					}
					set_global_flag = skip_default_capitulation
					clr_global_flag = show_peace_popup_alert
				}
				#RoI Insurgencies
				else_if = {
					limit = {
						AND = {
							OR = {
								FROM = { original_tag = IND }
								FROM = { original_tag = AFG }
							}
							OR = {
								ROOT = { original_tag = PAK }
								ROOT = { original_tag = TIG }
								#ROOT = { original_tag = KSH }
								ROOT = { original_tag = SHK }
								ROOT = { original_tag = BAL }
							}
						}
					}
					ROOT = {
						become_exiled_in = {
							target = ZZZ
						}
					}
					set_global_flag = skip_default_capitulation
					clr_global_flag = show_peace_popup_alert
				}
				#Azad Hind Insurgencies
				else_if = {
					limit = {
						FROM = {
							original_tag = AZH
						}
						OR = {
							ROOT = { original_tag = BAN }
							ROOT = { original_tag = ASS }
							ROOT = { original_tag = BIH }
							ROOT = { original_tag = NAX }
							ROOT = { original_tag = BHU }
							ROOT = { original_tag = NEP }
						}
					}
					ROOT = {
						become_exiled_in = {
							target = ZZZ
						}
					}
					if = {
						limit = {
							ROOT = { original_tag = NEP }
							NEP = {
								NOT = {
									has_government = communist
								}
							}
						}
						NEP = {
							country_event = {
								id = nepal.41
								days = 3
							}
						}
					}
					set_global_flag = skip_default_capitulation
					clr_global_flag = show_peace_popup_alert
				}
				#South African War
				#OFN Loss
				else_if = {
					limit = {
						ROOT = { original_tag = SAF }
						OR = {
							FROM = { original_tag = COG }
							FROM = { original_tag = GRO }
							FROM = { original_tag = ANG }
							FROM = { original_tag = BOR }
						}
						MZB = {
							NOT = { has_cosmetic_tag = MZB_USA }
						}
						USC = { exists = no }
						has_global_flag = south_african_war_happening
						NOT = { has_global_flag = second_south_african_civil_war }
					}
					GRO = {
						white_peace = SAF
						country_event = { id = SAFWAR.9 } #Distributes the territory
					}
					COG = {
						white_peace = SAF
						country_event = { id = SAFWAR.10 }
					}
					ANG = {
						white_peace = SAF
						country_event = { id = SAFWAR.11 }
					}
					BOR = {
						white_peace = SAF
						country_event = { id = SAFWAR.12 }
					}
					COG = {
						remove_dynamic_modifier = {modifier = COG_SAW_buff}
					}
					ANG = {
						remove_dynamic_modifier = {modifier = ANG_SAW_buff}
					}
					GRO = {
						remove_dynamic_modifier = {modifier = GRO_SAW_buff}
					}
					SAF = {
						remove_dynamic_modifier = {modifier = SAF_SAW_buff}
					}
					BOR = {
						remove_dynamic_modifier = {modifier = BOR_SAW_buff}
					}
					set_global_flag = skip_default_capitulation
				}
				#OFN Victory
				else_if = {
					limit = {
						OR = {
							ROOT = { original_tag = COG }
							ROOT = { original_tag = GRO }
							ROOT = { original_tag = BOR }
							if = {
								limit = {
									NOT = { has_global_flag = ANG_Free }
								}
								ROOT = { original_tag = ANG }
							}
						}
						GRO = {
							NOT = {
								OR = {
									has_cosmetic_tag = GRO_REICHSSTAAT
									has_cosmetic_tag = GRO_REICHSSTAAT_2
									has_cosmetic_tag = GRO_REICHSSTAAT_3
								}
							}
						}
						FROM = {
							OR = {
								tag = SAF
								is_in_faction_with = SAF
							}
						}
						has_global_flag = south_african_war_happening
					}
					SAF = {
						country_event = { id = SAFWAR.13 }
						remove_dynamic_modifier = {modifier = SAF_SAW_buff}
					}
					COG = {
						remove_dynamic_modifier = {modifier = COG_SAW_buff}
					}
					ANG = {
						remove_dynamic_modifier = {modifier = ANG_SAW_buff}
					}
					GRO = {
						remove_dynamic_modifier = {modifier = GRO_SAW_buff}
					}
					BOR = {
						remove_dynamic_modifier = {modifier = BOR_SAW_buff}
					}
					set_global_flag = SAF_WAR_Over
					set_global_flag = skip_default_capitulation
				}
				#Schneck's Free Angola
				else_if = {
					limit = {
						has_global_flag = ANG_Free
						ROOT = { original_tag = ANG }
						OR = {
							FROM = { original_tag = COG }
							FROM = { original_tag = GRO }
							FROM = { original_tag = SAF }
							FROM = { original_tag = BOR }
						}
					}
					ANG = {
						white_peace = COG
						white_peace = GRO
						white_peace = SAF
						white_peace = BOR
						every_owned_state = {
							controller = {
								transfer_state = PREV
							}
						}
					}

					set_global_flag = skip_default_capitulation
				}
				#OFN Victory - Reichsstaat
				else_if = {
					limit = {
						ROOT = {
							OR = {
								original_tag = GRO
								original_tag = BOR
							}
						}
						GRO = {
							OR = {
								has_cosmetic_tag = GRO_REICHSSTAAT
								has_cosmetic_tag = GRO_REICHSSTAAT_2
								has_cosmetic_tag = GRO_REICHSSTAAT_3
							}
						}
						FROM = {
							tag = SAF
						}
						has_global_flag = south_african_war_happening
					}
					COG = {
						remove_dynamic_modifier = {modifier = COG_SAW_buff}
					}
					ANG = {
						remove_dynamic_modifier = {modifier = ANG_SAW_buff}
					}
					GRO = {
						remove_dynamic_modifier = {modifier = GRO_SAW_buff}
					}
					SAF = {
						country_event = { id = SAFWAR.13 }
						remove_dynamic_modifier = {modifier = SAF_SAW_buff}
					}
					BOR = {
						remove_dynamic_modifier = {modifier = BOR_SAW_buff}
					}
					set_global_flag = SAF_WAR_Over
					set_global_flag = skip_default_capitulation
				}
				#Schneck's Free Angola
				else_if = {
					limit = {
						has_global_flag = ANG_Free
						ROOT = { original_tag = ANG }
						OR = {
							FROM = { original_tag = COG }
							FROM = { original_tag = GRO }
							FROM = { original_tag = SAF }
							FROM = { original_tag = BOR }
						}
					}
					ANG = {
						white_peace = COG
						white_peace = GRO
						white_peace = SAF
						white_peace = BOR
						every_owned_state = {
							controller = {
								transfer_state = PREV
							}
						}
					}

					set_global_flag = skip_default_capitulation
				}
				# Shenck's Free Namibia
				else_if = {
					limit = {
						has_global_flag = ANG_Free
						ROOT = { original_tag = NAM }
						OR = {
							FROM = { original_tag = COG }
							FROM = { original_tag = GRO }
							FROM = { original_tag = SAF }
							FROM = { original_tag = BOR }
						}
					}
					NAM = {
						white_peace = COG
						white_peace = GRO
						white_peace = SAF
						white_peace = BOR
						every_owned_state = {
							controller = {
								transfer_state = PREV
							}
						}
					}
					ANG = {
						annex_country = {
							target = NAM
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Westmoreland's defeat (African Crisis)
				else_if = {
					limit = {
						ROOT = {
							original_tag = USC
						}
						OR = {
							FROM = { original_tag = GAB }
							FROM = { original_tag = CAF }
							FROM = { original_tag = CFS }
							FROM = { original_tag = KTG }
							FROM = { original_tag = ANG }
							FROM = { original_tag = GAZ }
							FROM = { original_tag = RMB }
							FROM = { original_tag = BRD }
							FROM = { original_tag = RWA }
							FROM = { original_tag = UGD }
							FROM = { original_tag = TNZ }
							FROM = { original_tag = LUO }
						}
					}
					USC = {
						USA_AFRICA_liberate_africa = yes
					}

					set_global_flag = skip_default_capitulation
				}
				#Second African Civil War - Boers defeat SA
				else_if = {
					limit = {
						FROM = {
							original_tag = BOR
						}
						ROOT = { original_tag = SAF }
						has_global_flag = second_south_african_civil_war
					}
					BOR = {
						annex_country = {
							target = SAF
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer / Bormann defeats Britanny
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = FRA
								tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = BRT }
						OR = {
							has_global_flag = german_civil_war_speervic
							has_global_flag = german_civil_war_bormannvic
						}
					}
					white_peace = BRT
					FRA = {
						annex_country = {
							target = BRT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #Angolan Civil War
					limit = {
						FROM = {
							OR = {
								tag = ANG
								tag = ANL
							}
						}
						ROOT = {
							OR = {
								tag = ANG
								tag = ANL
							}
						}
					}
					FROM = {
						every_state = {
							limit = { is_core_of = ROOT }
							add_core_of = FROM
							remove_core_of = ROOT
							remove_province_modifier = {
								static_modifiers = { angola_civil_war_please_dont_end_instantly  }
								province = { all_provinces = yes }
							}
						}
						USA = { 
							set_temp_variable = { target = ANG }
							TNO_clear_num_volunteers = yes
							TNO_fopo_remove_angola_civil_war_tab = yes 
						}
						JAP = { 
							set_temp_variable = { target = ANL }
							TNO_clear_num_volunteers = yes
							TNO_fopo_remove_angola_civil_war_tab = yes 
						}
						drop_cosmetic_tag = yes
						if = {
							limit = { original_tag = ANG }
							USA = { country_event = { id = ANG_PW.1 days = 1 } }
						}
						else = {
							JAP = { country_event = { id = ANG_PW.2 days = 1 } }
						}
					}
				}

				else_if = { #Gazaland Civil War
					limit = {
						FROM = {
							OR = {
								tag = GAZ
								tag = GZO
								tag = GZS
							}
						}
						ROOT = {
							OR = {
								tag = GAZ
								tag = GZO
								tag = GZS
							}
						}
					}
					white_peace = ROOT
					FROM = {
						every_state = {
							limit = {
								is_core_of = ROOT
							}
							add_core_of = FROM
							remove_core_of = ROOT
						}
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					if = {
						limit = {
							NOT = {
								count_triggers = {
									amount = 2 #This checks if >=2, not ==2... thanks pdx
									country_exists = GZO
									country_exists = GAZ
									country_exists = GZS
								}
							}
						}
						FROM = {
							if = {
								limit = {
									tag = GZO
								}
								USA = {
									if = {
										limit = { has_country_flag = US_aid_gazaland_mondlane }
										country_event = { id = GAZ.4 days = 1 }
										JAP = { country_event = { id = GAZ.5 days = 1 } }
										news_event = { id = WORLD.18145 days = 1 }
									}
									else = {
										country_event = { id = GAZ.6 days = 1 }
										JAP = { country_event = { id = GAZ.7 days = 1 } }
									}
								}
							}
							else_if = {
								limit = { tag = GZS } #No need to check for flag since GZS only exists if US backs em
								USA = {
									country_event = { id = GAZ.8 days = 1 }
								}
								JAP = {
									country_event = { id = GAZ.9 days = 1 }
									news_event = { id = WORLD.18146 days = 1 }
								}
							}
							else = {
								JAP = { country_event = { id = GAZ.10 days = 1 } }
								USA = { country_event = { id = GAZ.11 days = 1 } }
								news_event = { id = WORLD.18144 days = 1 }
							}
							every_owned_state = { add_core_of = FROM }
							clr_global_flag = gazaland_civil_war_active
						}
						USA = {
							if = {
								limit = { has_country_flag = US_aid_gazaland_mondlane }
								set_temp_variable = { target = GZO }
								TNO_clear_num_volunteers = yes
							}
							else = {
								set_temp_variable = { target = GZS }
								TNO_clear_num_volunteers = yes
							}
						}
						JAP = {
							set_temp_variable = { target = GAZ }
							TNO_clear_num_volunteers = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}

				##################### Congo PW Shenanigans ###########################
				else_if = {
					limit = {
						has_global_flag = CONGO_PW_HAPPENING
						FROM = {
							OR = {
								original_tag = CFS
								original_tag = CPR
								original_tag = AZD
								original_tag = KTG
								original_tag = GRO
								original_tag = COG
								original_tag = KSI
							}
						}
						ROOT = {
							OR = {
								original_tag = CFS
								original_tag = CPR
								original_tag = AZD
								original_tag = KTG
								original_tag = GRO
								original_tag = COG
								original_tag = KSI
							}
						}
					}
					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					if = {
						limit = {
							ROOT = { tag = AZD }
						}
						TNO_CCW_JAP_Faction_Gone = yes
					}
					if = {
						limit = {
							ROOT = { tag = GRO }
						}
						TNO_CCW_GER_Faction_Gone = yes
					}
					if = {
						limit = {
							OR = {
								AND = {
									USA = { has_country_flag = US_aid_CFS }
									ROOT = { tag = CFS }
								}
								AND = {
									USA = { has_country_flag = US_aid_COG }
									ROOT = { tag = COG }
								}
							}
						}
						TNO_CCW_USA_Faction_Gone = yes
					}

					## Congolese Republic got the number one victory royale
					if = {
						limit = {
							country_exists = CFS
							NOT = {
								country_exists = CPR
								country_exists = KTG
								country_exists = KSI
								country_exists = AZD
								AND = {
									has_global_flag = COG_PW_GRO_or_COG_in
									OR = {
										country_exists = GRO
										country_exists = COG
									}
								}
							}
						}
						if = {
							limit = {
								USA = { has_country_flag = US_aid_CFS }
							}
							USA = {
								country_event = {
									id = COG_PW.3
									days = 5
								}
							}
						}
						else = {
							CFS = {
								country_event = {
									id = COG_PW.3
									days = 5
								}
							}
						}
					}
					else_if = { ## Azandeland got the number one victory royale
						limit = {
							country_exists = AZD
							NOT = {
								country_exists = CFS
								country_exists = KTG
								country_exists = KSI
								country_exists = CPR
								AND = {
									has_global_flag = COG_PW_GRO_or_COG_in
									OR = {
										country_exists = GRO
										country_exists = COG
									}
								}
							}
						}
						JAP = {
							country_event = {
								id = COG_PW.9
								days = 5
							}
						}
					}
					else_if = { # Congolese Popular Republic got the number one victory royale
						limit = {
							country_exists = CPR
							NOT = {
								country_exists = CFS
								country_exists = KTG
								country_exists = KSI
								country_exists = AZD
								AND = {
									has_global_flag = COG_PW_GRO_or_COG_in
									OR = {
										country_exists = GRO
										country_exists = COG
									}
								}
							}
						}
						CPR = {
							country_event = {
								id = COG_PW.4
								days = 5
							}
						}
					}
					else_if = { #Abwehrfront Wins
						limit = {
							country_exists = GRO
							has_global_flag = COG_PW_GRO_or_COG_in
							NOT = {
								GRO = { has_country_flag =  GRO_cabal_victorious } 
							}
							NOT = {
								country_exists = CFS
								country_exists = CPR
								country_exists = KTG
								country_exists = KSI
								country_exists = AZD
								country_exists = COG
							}
						}
						GER = {
							country_event = {
								id = COG_PW.5
								days = 5
							}
						}
					}
					else_if = { #Cabal Wins
						limit = {
							country_exists = GRO
							has_global_flag = COG_PW_GRO_or_COG_in
							GRO = { has_country_flag = GRO_cabal_victorious } 
							NOT = {
								country_exists = CFS
								country_exists = CPR
								country_exists = KTG
								country_exists = KSI
								country_exists = AZD
								country_exists = COG
							}
						}
						GER = {
							country_event = {
								id = COG_PW.6
								days = 5
							}
						}
					}
					else_if = {
						limit = {
							country_exists = KTG
							NOT = {
								country_exists = CFS
								country_exists = CPR
								country_exists = AZD
								AND = {
									has_global_flag = COG_PW_GRO_or_COG_in
									OR = {
										country_exists = GRO
										country_exists = COG
									}
								}
							}
						}
						KTG = {
							country_event = {
								id = COG_PW.7
								days = 5
							}
						}
					}
					else_if = {
						limit = {
							country_exists = KSI
							NOT = {
								country_exists = CFS
								country_exists = CPR
								country_exists = KTG
								country_exists = AZD
								AND = {
									has_global_flag = COG_PW_GRO_or_COG_in
									OR = {
										country_exists = GRO
										country_exists = COG
									}
								}
							}
						}
						KSI = {
							country_event = {
								id = COG_PW.8
								days = 5
							}
						}
					}
					else_if = { #OFN Mandate Collapse remnant wins
						limit = {
							country_exists = COG
							has_global_flag = COG_PW_GRO_or_COG_in
							has_global_flag = SAF_OFN_Victory
							NOT = {
								country_exists = CFS
								country_exists = CPR
								country_exists = KTG
								country_exists = KSI
								country_exists = AZD
								country_exists = GRO
							}
						}
						USA = {
							country_event = {
								id = COG_PW.10
								days = 5
							}
						}
					}
					else_if = { # CAF beats AZD
						limit = {
							country_exists = CAF
							NOT = {
								country_exists = AZD
							}
						}
						CAF = {
							annex_country = {
								target = AZD
								transfer_troops = no
							}
						}
						clr_global_flag = congo_PW_CAF_joined
					}
					else_if = { # AZD beats CAF
						limit = {
							country_exists = AZD
							NOT = {
								country_exists = CAF
							}
						}
						CAF = {
							white_peace = AZD
						}
						clr_global_flag = congo_PW_CAF_joined
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = { # CAF beats CPR
					limit = {
						FROM = {
							original_tag = CAF
						}
						ROOT = { original_tag = CPR }
					}
					CAF = {
						white_peace = CPR
			      		add_state_core = 1182
						add_state_core = 1183
			      		add_state_core = 1185
						transfer_state = 1182
						transfer_state = 1183
						transfer_state = 1185
						hidden_effect = {
							ROOT = {
								every_owned_state = {
									remove_core_of = GRO
									remove_core_of = COG
									remove_core_of = CFS
									remove_core_of = CPR
									remove_core_of = AZD
									remove_core_of = KTG
									remove_core_of = KSI
									remove_core_of = XIK
									add_core_of = PREV
								}
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = { # CPR beats CAF
					limit = {
						FROM = {
							original_tag = CPR
						}
						ROOT = { original_tag = CAF }
					}
					CPR = {
						country_event = {
							id = COG_PW.19
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer defeats Holland
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = HOL }
						has_global_flag = german_civil_war_speervic
						NOT = { has_global_flag = SGR_natsoc_collapse }
					}
					GER = {
						annex_country = {
							target = HOL
							transfer_troops = no
						}
						country_event = {
							id = speerholland.8
							days = 7
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer defeats Kaukasien
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CAU }
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						white_peace = CAU
						puppet = CAU
						GER_friedrich_klausing = {
							set_nationality = CAU
						}
					}
					CAU = {
						set_cosmetic_tag = SGR_CAU_provisional_government
						set_politics = { ruling_party = fascism }
						kill_country_leader =  yes
						promote_character = GER_friedrich_klausing
						set_party_name = {
							ideology = fascism
							long_name = UKR_speer_prov_government_fascism_long
							name = UKR_speer_prov_government_fascism
						}
						join_zollverein = yes

						set_variable = { TNO_economy_type = 2 }
						set_variable = { TNO_economy_subtype = 5 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Speermany defeats the Kaukasien breakaways
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = AZR
								original_tag = GEO
								original_tag = DAG
								original_tag = ADY
							}
						}
						has_global_flag = german_civil_war_speervic
					}
					CAU = { annex_country = { target = ROOT transfer_troops = no } }
					set_global_flag = skip_default_capitulation
				}
				#Göring defeats Armenia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							original_tag = ARM
						}
						has_global_flag = german_civil_war_goeringvic
					}
					CAU = { annex_country = { target = ROOT transfer_troops = no } }
					set_global_flag = skip_default_capitulation
				}
				#Speer defeats Slovakia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = SLO }
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						white_peace = SLO
						GER = { add_to_faction = SLO }
						SLO = {
							set_politics = { ruling_party = authoritarian_democracy }
							join_zollverein = yes
							SLO_Jan_Golian = {
								promote_character = {
									ideology = authoritarian_democracy_subtype
								}
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Speer defeats SS Bohemia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CZE }
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						white_peace = CZE
						annex_country = {
							target = CZE
							transfer_troops = no
						}
						country_event = {
							id = speerbohemia.6
							days = 150
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Natsoc Speer defeats Denmark
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = DEN }
						has_global_flag = german_civil_war_speervic
						has_global_flag = SGR_natsoc_collapse
					}
					GER = {
						white_peace = DEN
						puppet = DEN
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer defeats Natsoc Denmark
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							AND = {
								original_tag = DEN
								has_government = national_socialism
							}
						}
						has_global_flag = german_civil_war_speervic
						NOT = { has_global_flag = SGR_natsoc_collapse }
					}
					GER = {
						white_peace = DEN
						puppet = DEN
					}
					DEN = {join_zollverein = yes}
					set_global_flag = skip_default_capitulation
				}

				#Speer Defeats Ukraine
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = UKR }
						has_global_flag = german_civil_war_speervic
					}
					UKR = {
						white_peace = GER
						GER = {
							puppet = UKR
							GER_ewaldheinrich_von_kleistschmenzin = {
								set_nationality = UKR
							}	
						}
						set_cosmetic_tag = Speer_UKR_rejoined_peacefully
						promote_character = GER_ewaldheinrich_von_kleistschmenzin
						set_temp_variable = { TNO_economy_subtype_temp = 5 }
						econ_subtype_change = yes
						econ_join_sphere_GER = yes
						set_party_name = {
							ideology = fascism
							long_name =    UKR_speer_prov_government_fascism_long
							name =    UKR_speer_prov_government_fascism
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer Defeats Romania
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = ROM }
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						white_peace = ROM
						198 = { add_core_of = UKR }
						UKR = { transfer_state = 198 }
						192 = { add_core_of = UKR }
						UKR = { transfer_state = 192 }
						1285 = { add_core_of = UKR }
						UKR = { transfer_state = 1285 }
						ROM = {
							add_political_power = -100
							add_stability = -0.4
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer Defeats Poland
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							original_tag = POL
						}
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						country_event = { id = reich_shared.22 days = 4 }
						white_peace = POL
						POL = { save_party_popularities = yes }
						set_autonomy = {
							target = POL
							autonomy_state = autonomy_autonomous_reichskommissariat
						}
						POL = {
							apply_party_popularities = yes
							add_ideas = Pakt_Marionettenstaat
							set_cosmetic_tag = POL_SGR
							add_country_leader_role = {
								character = POL_Werner_Schrader
								country_leader = {
									ideology = fascism_reformed_national_socialism_subtype
									expire = "1990.1.1"
									id = -1
								}
							}
							promote_character = POL_Werner_Schrader
							set_politics = {
								ruling_party = fascism
							}
							add_popularity = {
								ideology = fascism
								popularity = 0.5
							}

							set_party_name = {
								ideology = fascism
								long_name = UKR_speer_prov_government_fascism_long
								name = UKR_speer_prov_government_fascism
							}
							set_temp_variable = { TNO_economy_subtype_temp = 5 }
							econ_subtype_change = yes
							econ_join_sphere_GER = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer Defeats GGN
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							original_tag = GGN
						}
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						country_event = {
							id = speerpoland.20
							days = 5
						}
						white_peace = GGN
						POL = {
							save_party_popularities = yes
							annex_country = {
								target = GGN
								transfer_troops = no
							}
						}
						set_autonomy = {
							target = POL
							autonomy_state = autonomy_autonomous_reichskommissariat
						}
						POL = {
							apply_party_popularities = yes
							add_ideas = Pakt_Marionettenstaat
							set_cosmetic_tag = POL_SGR
							add_country_leader_role = {
								character = POL_Werner_Schrader
								country_leader = {
									ideology = fascism_reformed_national_socialism_subtype
									expire = "1990.1.1"
									id = -1
								}
							}
							promote_character = POL_Werner_Schrader
							set_politics = {
								ruling_party = fascism
							}
							add_popularity = {
								ideology = fascism
								popularity = 0.5
							}

							set_party_name = {
								ideology = fascism
								long_name = UKR_speer_prov_government_fascism_long
								name = UKR_speer_prov_government_fascism
							}
							set_temp_variable = { TNO_economy_subtype_temp = 5 }
							econ_subtype_change = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Speer defeats Ostland (OCW over)
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = OST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
						has_global_flag = german_civil_war_speervic
						NOT = {
							has_global_flag = SGR_natsoc_collapse
							has_global_flag = OST_OCW_Ongoing
						}
					}
					GER = {
						white_peace = ROOT
						OST = { annex_country = { target = ROOT transfer_troops = no } }
						set_autonomy = {
							target = OST
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						GER_alfred_zerbel = { 
							set_nationality = OST
						}
						OST = {
							join_zollverein = yes
							load_focus_tree = OST_empty
							remove_ideas = {
								OST_model_colony
								OST_model_colony2
								OST_unusual_quiet
								OST_No_head
								OST_crippled_military
								OST_stabbed_in_the_back
								OST_broken_nation
								OST_harsh_economic_integration
								OST_United_for_Ostland
								OST_Defend_Riga_idea
								OST_Prussian_Values
								OST_Haste_Makes_Waste
							}
							set_cosmetic_tag = ostland_occupation_authority

							set_popularities = {
								fascism = 50
								national_socialism = 30
								despotism = 5
								conservative_democracy = 10
								socialist = 5
							}
							promote_character = GER_alfred_zerbel

							set_party_name = {
								ideology = fascism
								long_name = OST_speer_occupation_government_fascism_long
								name = OST_speer_occupation_government_fascism
							}
							set_party_name = {
								ideology = despotism
								long_name = OST_speer_belarus_liberation_front
								name = OST_speer_belarus_liberation_front_long
							}
							set_party_name = {
								ideology = conservative_democracy
								long_name = OST_speer_united_baltic_army
								name = OST_speer_united_baltic_army_long
							}
							set_party_name = {
								ideology = conservative_democracy
								long_name = OST_speer_united_baltic_army
								name = OST_speer_united_baltic_army_long
							}
							set_party_name = {
								ideology = socialist
								long_name = OST_speer_student_movement
								name = OST_speer_student_movement_long
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Speer defeats Ostland (OCW ongoing, Landrut alive)
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = OST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
						has_global_flag = german_civil_war_speervic
						NOT = { has_global_flag = SGR_natsoc_collapse }
						country_exists = MST
					}
					OST_off_a_fucker = yes
					GER = {
						white_peace = ROOT
						MST = { annex_country = { target = ROOT transfer_troops = no } }
						if = {
							limit = { check_variable = { global.OST_contenders^num = 1 } }
							clear_array = global.OST_contenders
							clr_global_flag = OST_OCW_Ongoing
							country_event = {
								id = speerostland.27
								days = 3
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Speer defeats Ostland (OCW ongoing, Landrut dead)
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = OST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
						has_global_flag = german_civil_war_speervic
						NOT = {
							has_global_flag = SGR_natsoc_collapse
							country_exists = MST
						}
						has_global_flag = OST_OCW_Ongoing
					}
					GER = {
						white_peace = ROOT
						annex_country = { target = ROOT transfer_troops = no }
						if = {
							limit = {
								NOT = {
									country_exists = OST
									country_exists = DST
									country_exists = JST
									country_exists = BLR
									country_exists = UPO
								}
							}
							clear_array = global.OST_contenders
							clr_global_flag = OST_OCW_Ongoing
							GER_alfred_zerbel = {
								set_nationality = OST
							}
							OST = {
								every_state = {
									limit = { Pakt_OST_Is_Ostland_State = yes }
									PREV = { transfer_state = PREV }
								}
								PREV = {
									set_autonomy = {
										target = OST
										autonomy_state = autonomy_integrated_reichskommissariat
									}
								}
								join_zollverein = yes
								load_focus_tree = OST_empty
								remove_ideas = {
									OST_model_colony
									OST_model_colony2
									OST_unusual_quiet
									OST_No_head
									OST_crippled_military
									OST_stabbed_in_the_back
									OST_broken_nation
									OST_harsh_economic_integration
									OST_United_for_Ostland
									OST_Defend_Riga_idea
									OST_Prussian_Values
									OST_Haste_Makes_Waste
								}
								set_cosmetic_tag = ostland_occupation_authority

								set_popularities = {
									fascism = 50
									national_socialism = 30
									despotism = 5
									conservative_democracy = 10
									socialist = 5
								}
								promote_character = GER_alfred_zerbel
								
								set_party_name = {
									ideology = fascism
									long_name = OST_speer_occupation_government_fascism_long
									name = OST_speer_occupation_government_fascism
								}
								set_party_name = {
									ideology = despotism
									long_name = OST_speer_belarus_liberation_front
									name = OST_speer_belarus_liberation_front_long
								}
								set_party_name = {
									ideology = conservative_democracy
									long_name = OST_speer_united_baltic_army
									name = OST_speer_united_baltic_army_long
								}
								set_party_name = {
									ideology = conservative_democracy
									long_name = OST_speer_united_baltic_army
									name = OST_speer_united_baltic_army_long
								}
								set_party_name = {
									ideology = socialist
									long_name = OST_speer_student_movement
									name = OST_speer_student_movement_long
								}
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer defeats DFK
				else_if = {
					limit = {
						FROM = {
							is_in_faction_with = GER
						}
						ROOT = { original_tag = DFK }
						has_global_flag = german_civil_war_speervic
						has_global_flag = SGR_Slave_Revolt
					}
					set_global_flag = skip_default_capitulation
				}
				#Speer defeats Moskowien Schörner (Slave Revolt)
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = MCW }
						has_global_flag = german_civil_war_speervic
						has_global_flag = SGR_Slave_Revolt
					}
					GER = {
						add_to_faction = PAU
						add_to_faction = CAU
						white_peace = MCW
						puppet = MCW
						annex_country = {
							target = OKB
							transfer_troops = yes
						}
						set_country_flag = SGR_SR_good_end
						country_event = {
							id = speerreichsbanner.1
							days = 3
						}
						random_list = {
							50 = {
								country_event = {
									id = speer_slaverevolt.30
									days = 1
								}
							}
							50 = {
								country_event = {
									id = speer_slaverevolt.31
									days = 1
								}
							}
						}
					}
					OKB = {
						GER_alexis_von_roenne = {
							set_nationality = MCW
						}
					}
					MCW = {
						retire_country_leader = yes
						remove_ideas = {
							MCW_The_Marshals_Fiefdom
							MCW_Brutal_Repression
							MCW_Schorners_Ambition
						}
						add_ideas = {
							MCW_Russia_in_ruins
							MCW_Pakt_Commission
						}
						set_cosmetic_tag = MCW_SGR
						set_autonomy = {
							target = MCW
							autonomy_state = autonomy_military_district
						}
						set_politics = {
							ruling_party = despotism
							last_election = "1941.4.17"
							election_frequency = 48
							elections_allowed = no
						}
						GER_alexis_von_roenne = {
							promote_character = { ideology = despotism_interim_government_subtype}
						}
						GER_alexis_von_roenne = {
							promote_character = { ideology = fascism_reformed_national_socialism_subtype}
						}
						set_party_name = {
							ideology = despotism
							long_name = MCW_despotism_postSR_party
							name = MCW_despotism_postSR_party_long
						}
						set_popularities = {
							despotism = 33
							communist = 6
							socialist = 12
							social_democracy = 5
							liberal_democracy = 18
							authoritarian_democracy = 21
							ultranationalism = 5
						}
					}
					MCW = {
						transfer_state = 263
						transfer_state = 209
						transfer_state = 210
						transfer_state = 246
						transfer_state = 208
						transfer_state = 244
						transfer_state = 264
						transfer_state = 247
						transfer_state = 248
						transfer_state = 1314
						transfer_state = 219
						transfer_state = 253
						transfer_state = 242
						transfer_state = 243
						transfer_state = 241
						transfer_state = 205
						transfer_state = 224
						transfer_state = 223
						transfer_state = 254
						transfer_state = 255
						transfer_state = 257
						transfer_state = 258
						transfer_state = 220
						transfer_state = 240
						transfer_state = 260
						transfer_state = 265
						transfer_state = 245
						transfer_state = 222
						transfer_state = 1421
						transfer_state = 1434
						transfer_state = 1477
						transfer_state = 1478
						transfer_state = 1475
						transfer_state = 1442
						transfer_state = 1476
						transfer_state = 1444
						transfer_state = 1435
						transfer_state = 1443
						transfer_state = 1441
						transfer_state = 1436
					}
					195 = { add_core_of = GER }
					GER = { transfer_state = 195 }

					245 = { add_core_of = MCW }
					MCW = { transfer_state = 245 }

					238 = { add_core_of = MCW }
					MCW = {
						add_state_core = 217
						add_state_core = 401
						add_state_core = 236
						add_state_core = 237
						add_state_core = 244
						transfer_state = 238
						transfer_state = 217
						transfer_state = 401
						transfer_state = 236
						transfer_state = 237
						transfer_state = 244
						every_owned_state = {
							add_core_of = MCW
						}
					}
					CAU = {
						annex_country = {
							target = DFK
							transfer_troops = yes
						}
					}
					every_country = {
						news_event = {
							id = WORLD.2079
						}
					}

					set_global_flag = skip_default_capitulation
				}

				#The Slave Revolt is defeated
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								original_tag = MCW
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = SRT }
						has_global_flag = german_civil_war_speervic
						has_global_flag = SGR_Slave_Revolt
					}
					GER = {
						white_peace = SRT
						add_to_faction = MCW
						annex_country = {
							target = OKB
							transfer_troops = yes
						}
						set_country_flag = SGR_SR_bad_end
						clr_global_flag = SGR_Slave_Revolt
						country_event = {
							id = speer_slaverevolt.29
							days = 2
						}
						country_event = {
							id = speerflavor.77
							days = 4
						}
					}
					MCW = {
						white_peace = SRT
						annex_country = {
							target = PAU
							transfer_troops = no
						}
						add_state_core = 1421
						add_state_core = 1434
						add_state_core = 209
						transfer_state = 1421
						transfer_state = 1434
						transfer_state = 209
					}
					SRT = {
						#Ukraine
						every_controlled_state = {
							limit = { is_core_of = UKR }
							UKR = { transfer_state = PREV }
						}
						#Baltikum
						every_controlled_state = {
							limit = { is_core_of = OST NOT = {is_core_of = BLR} }
							OST = { transfer_state = PREV }
						}
						#Belarus
						every_controlled_state = {
							limit = { is_core_of = BLR NOT = {is_core_of = OST} }
							BLR = { transfer_state = PREV }
						}
						#Poland
						every_controlled_state = {
							limit = { is_core_of = POL }
							POL = { transfer_state = PREV }
						}
						#Kaukasien
						every_controlled_state = {
							limit = { is_core_of = CAU }
							CAU = { transfer_state = PREV }
						}
					}
					CAU = {
						annex_country = {
							target = DFK
							transfer_troops = yes
						}
					}
					GER = {
						puppet = UKR
						puppet = POL
						puppet = BLR
						puppet = CAU
						if = {
							limit = {
								has_country_flag = SGR_collab_regimes
							}
							divide_ostland = yes
							collab_regime_in_poland = yes
							collab_regime_in_ukraine = yes
							collab_regime_in_kaukasien = yes
							else = {
								divide_ostland2 = yes
								reichsland_in_poland = yes
								reichsland_in_ukraine = yes
								reichsprotektorat_in_kaukasia = yes
							}
						}
					}

					every_country = {
						news_event = {
							id = WORLD.2080
						}
					}

					set_global_flag = skip_default_capitulation
				}

				#The Slave Revolt, somehow, manages to beat Schörner
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = SRT
								is_in_faction_with = SRT
							}
						}
						ROOT = { original_tag = MCW }
						has_global_flag = german_civil_war_speervic
						has_global_flag = SGR_Slave_Revolt
					}
					GER = {
						declare_war_on = {
							target = SRT
							type = annex_everything
						}
					}

					set_global_flag = skip_default_capitulation
				}

				#Speer defeats Crimea
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CRI }
						has_global_flag = german_civil_war_speervic
					}
					GER = {
						CRI = {
							every_owned_state = {
								add_core_of = GER
							}
						}
						annex_country = {
							target = CRI
							transfer_troops = yes
						}
					}

					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Bohemia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CZE }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						annex_country = {
							target = CZE
							transfer_troops = no
						}
						country_event = { id = bormann.611 days = 5 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Denmark
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = DEN }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						white_peace = DEN
						add_to_faction = DEN
						DEN = {
							add_country_leader_role = {
								character = DEN_Occupational_Authorities
								country_leader = {
									desc = "POLITICS_OCCUPATIONAL_AUTHORITIES_DEN_DESC"
									ideology = national_socialism_subtype
									expire = "1983.1.1"
									id = -1
								}
							}
							promote_character = DEN_Occupational_Authorities
						}
						country_event = { id = bormann.1009 days = 4 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Slovakia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = SLO }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						white_peace = SLO
						SLO = { save_party_popularities = yes }
						set_autonomy = {
							target = SLO
							autonomy_state = autonomy_collaborator_puppet_state
						}
						SLO_Alexander_Mach = {
							promote_character = national_socialism_subtype
						}
						remove_all_ministers = yes
						add_ideas = {
							SLO_Generic_Vacant_hog
							SLO_Generic_Vacant_eco
							SLO_Generic_Vacant_for
							SLO_Generic_Vacant_sec
						}
						SLO = { apply_party_popularities = yes }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Poland
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = POL }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						country_event = {
							id = reich_shared.22 days = 4
						}
						white_peace = POL
						GGN = {
							annex_country = {
								target = POL
								transfer_troops = no
							}
						}
						set_autonomy = {
							target = GGN
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						GGN = {
							set_popularities = {
								national_socialism = 80
								fascism = 20
							}
							promote_character = GGN_interimregierung
							remove_ideas = POL_underground_state
						}
						country_event = { id = bormann.164 days = 31 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats the Netherlands
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = HOL }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						white_peace = HOL
						HOL = { save_party_popularities = yes }
						set_autonomy = {
							target = HOL
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						HOL = {
							apply_party_popularities = yes
							promote_character = HOL_occupational_authorities
						}
						country_event = { id = bormann.652 days = 10 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Norway
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = NOR }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						white_peace = NOR
						NOR = { save_party_popularities = yes }
						set_autonomy = {
							target = NOR
							autonomy_state = autonomy_autonomous_reichskommissariat
						}
						add_state_core = 94
						transfer_state = 94
						GER_heinzgeorg_lemm = {
							set_nationality = NOR
						}
						NOR = {
							promote_character = GER_heinzgeorg_lemm
							apply_party_popularities = yes
							set_temp_variable = { TNO_economy_type_temp = 2 }
							econ_type_change = yes
							set_temp_variable = { TNO_economy_subtype_temp = 5 }
							econ_subtype_change = yes
							GER_apply_embargos = yes
							set_cosmetic_tag = NOR_GER
							remove_ideas = {
								NOR_collab_purge
								NOR_Olav_V
								NOR_rebuilding_norway
								NOR_protect_norway
								NOR_elite_army_1
								NOR_elite_army_2
								NOR_american_advisors_idea
								NOR_coup_aftermath
							}
							load_focus_tree = GER_blankfocus
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Ukraine
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = UKR }
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						white_peace = UKR
						UKR = { save_party_popularities = yes }
						set_autonomy = {
							target = UKR
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						GER_theodor_oberlander = {
							set_nationality = UKR
						}
						UKR = {
							set_cosmetic_tag = UKR_GER
							apply_party_popularities = yes
							GER_theodor_oberlander = {
								promote_character = {
									ideology = national_socialism_idiosyncratic_nazism_subtype
								}
							}
							set_temp_variable = { TNO_economy_subtype_temp = 5 }
							econ_subtype_change = yes
							econ_join_sphere_GER = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Kaukasien
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CAU }
						has_global_flag = german_civil_war_bormannvic
						NOT = { CAU = { has_country_flag = CAU_caucasian_anarchy } }
					}
					GER = {
						white_peace = CAU
						CAU = { save_party_popularities = yes }
						set_autonomy = {
							target = CAU
							autonomy_state = autonomy_autonomous_reichskommissariat
						}
						GGN = {
							GGN_eccard_freiherr_von_gablenz = {
								set_nationality = CAU
							}
						}
						CAU = {
							clr_country_flag = CAU_policy_josias_burgsys
							clr_country_flag = CAU_policy_josias_crowned
							apply_party_popularities = yes
							promote_character = GGN_eccard_freiherr_von_gablenz
							set_variable = { TNO_economy_type = 2 }
							set_variable = { TNO_economy_subtype = 5 }
						}
						GGN = { remove_unit_leader = 709 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Kaukasien when it is in Anarchy
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CAU }
						has_global_flag = german_civil_war_bormannvic
						CAU = { has_country_flag = CAU_caucasian_anarchy }
					}
					GER = {
						white_peace = CAU
						set_autonomy = {
							target = CAU
							autonomy_state = autonomy_autonomous_reichskommissariat
						}
						GGN = {
							GGN_eccard_freiherr_von_gablenz = {
								set_nationality = CAU
							}
						}
						CAU = {
							clr_country_flag = CAU_policy_josias_burgsys
							clr_country_flag = CAU_policy_josias_crowned
							promote_character = GGN_eccard_freiherr_von_gablenz
							set_party_name = {
								ideology = national_socialism
								long_name = "BOR_military_government"
								name = "BOR_military_government"
							}
							set_popularities = { national_socialism = 100 }
							set_cosmetic_tag = CAU_BOR
							if = { limit = { country_exists = AZR } declare_war_on = { target = AZR type = annex_everything } }
							if = { limit = { country_exists = GEO } declare_war_on = { target = GEO type = annex_everything } }
							if = { limit = { country_exists = DAG } declare_war_on = { target = DAG type = annex_everything } }
							if = { limit = { country_exists = ADY } declare_war_on = { target = ADY type = annex_everything } }
							set_variable = { TNO_economy_type = 2 }
							set_variable = { TNO_economy_subtype = 5 }
						}
						GGN = { remove_unit_leader = 709 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats the Kaukasien breakaways
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = AZR
								original_tag = GEO
								original_tag = DAG
								original_tag = ADY
							}
						}
						has_global_flag = german_civil_war_bormannvic
					}
					CAU = { annex_country = { target = ROOT transfer_troops = no } }
					set_global_flag = skip_default_capitulation
				}
				#Bormann goes ham on the Moskowien breakaways
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = BBB
								original_tag = FRP
								original_tag = MOS
								original_tag = OKB
								original_tag = PAU
								original_tag = PEN
								original_tag = PSK
								original_tag = RSB
								original_tag = RDC
								original_tag = SMO
								original_tag = TAM
								original_tag = ZLB
								original_tag = KAG
								original_tag = LAK
								original_tag = MZL
								original_tag = POS
								original_tag = SKR
							}
						}
						has_global_flag = MCW_collapse
						has_global_flag = german_civil_war_bormannvic
					}
					MCW = { annex_country = { target = ROOT transfer_troops = no } }
					GER = {
						if = {
							limit = { NOT = { is_in_faction_with = MCW } }
							set_autonomy = {
								target = MCW
								autonomy_state = autonomy_autonomous_reichskommissariat
							}
							GER = {
								GER_walther_wenck = {
									set_nationality = MCW
								}
							}
							MCW = {
								set_popularities = { national_socialism = 100 }
								set_party_name = {
									ideology = national_socialism
									long_name = "BOR_military_government"
									name = "BOR_military_government"
								}
								promote_character = GER_walther_wenck
								set_cosmetic_tag = MCW_BOR
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Bormann defeats Ostland
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = MST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
						has_global_flag = german_civil_war_bormannvic
					}
					GER = {
						white_peace = ROOT
						OST = { annex_country = { target = ROOT transfer_troops = no } }
						set_autonomy = {
							target = OST
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						OST = {
							set_popularities = { national_socialism = 100 }
							promote_character = OST_friedrich_karl_vialon
							remove_ideas = {
								OST_model_colony
								OST_unusual_quiet
								OST_United_for_Ostland
								OST_Defend_Riga_idea
								OST_Haste_Makes_Waste
								OST_Prussian_Values
							}
							load_focus_tree = OST_empty
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Heydrich defeats the Netherlands
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = HOL }
						has_global_flag = german_civil_war_heydrichvic
					}
					GER = {
						white_peace = HOL
						HOL = { save_party_popularities = yes }
						set_autonomy = {
							target = HOL
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						HOL = {
							apply_party_popularities = yes
							create_country_leader = {
								name = "Occupational Authorities"
								# desc = "POLITICS_OCCUPATIONAL_AUTHORITIES_DESC"
								picture = "gfx/leaders/HOL/Portrait_Netherlands_Provisional_Government.dds"
								expire = "1983.1.1"
								ideology = esoteric_nazism_subtype
							}
							set_variable = { HGR_Influence_Balance = 100 }
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#The Aryan People's Front beats Czechia
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = APF
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = CZE }
						has_global_flag = german_civil_war_heydrichvic
					}
					APF = {
						white_peace = CZE
						annex_country = {
							target = CZE
							transfer_troops = no
						}
						set_variable = { HGR_Influence_Balance = 100 }
						set_cosmetic_tag = APF_CZECH
					}
					GER = {
						country_event = {
							id = HGR.223
							days = 7
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Czechia beats the Aryan People's Front
				else_if = {
					limit = {
						FROM = {
							original_tag = CZE
						}
						ROOT = { original_tag = APF }
						has_global_flag = german_civil_war_heydrichvic
					}
					CZE = {
						white_peace = APF
					}
					APF = {
						set_variable = { HGR_Influence_Balance = 5 }
					}
					set_global_flag = skip_default_capitulation
				}
				#Heydrich defeats Poland
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GER
								original_tag = FSP
								is_in_faction_with = GER
							}
						}
						ROOT = { original_tag = POL }
						has_global_flag = german_civil_war_heydrichvic
					}
					GER = {
						country_event = { id = reich_shared.22 days = 4 }
						white_peace = POL
						GGN = {
							annex_country = {
								target = POL
								transfer_troops = no
							}
						}
						set_autonomy = {
							target = GGN
							autonomy_state = autonomy_integrated_reichskommissariat
						}
						GGN = {
							set_popularities = {
								esoteric_nazism = 80
								national_socialism = 20
							}
							set_politics = {
								ruling_party = national_socialism
							}
							create_country_leader = {
								name = "Interimregierung"
								# desc = "POLITICS_INTERIMREGIERUNG_DESC"
								picture = "gfx/leaders/GER/Portrait_Germany_Reichstag_Emergency_Council.dds"
								expire = "1984.10.28"
								ideology = national_socialism_subtype
							}
							remove_ideas = POL_underground_state
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#GERMAN CIVIL WAR
				else_if = {
					limit = {
						has_global_flag = german_civil_war
						FROM = {
							OR = {
								is_in_array = { global.GCW_contenders = THIS }
								tag = CZE
							}
						}
						ROOT = { is_in_array = { global.GCW_contenders = THIS } }
					}
					ROOT = {
						if = {
							limit = {
								OR = {
									AND = {
										tag = BGR
										CAU = { has_country_flag = CAU_policy_business_bormann }
									}
									AND = {
										tag = GGR
										CAU = { has_country_flag = CAU_policy_business_goering }
									}
								}
							}
							remove_resource_rights = 229
							remove_resource_rights = 1552
							remove_resource_rights = 1553
							remove_resource_rights = 1554
						}
						else_if = {
							limit = { original_tag = HGR }
							BRG = { TNO_BRG_domestic_tree_swap = yes }
						}
						GER_GCW_off_a_fucker = yes
					}
					FROM = {
						if = {
							limit = { tag = CZE }
							OVERLORD = {
								white_peace = ROOT
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
								GER_GCW_check_victor = yes
							}
						}
						else = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							GER_GCW_check_victor = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Polish Uprising - POL victory
				else_if = {
					limit = {
						FROM = { original_tag = POL }
						ROOT = { original_tag = GGN }
					}
					GGN = { remove_ideas = POL_underground_state }
					set_global_flag = POL_victory
				}
				#Polish Uprising - GGN victory
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = GGN
								is_in_faction_with = GGN
							}
						}
						ROOT = { original_tag = POL }
					}
					GGN = { remove_ideas = POL_underground_state }
					GER = {
						if = {
							limit = { has_country_flag = GER_BOR_intervened_in_poland }
							country_event = { id = bormann.1508 days = 7 }
							clr_country_flag = GER_BOR_intervened_in_poland
						}
					}
					set_global_flag = GGN_victory
				}

				#YEMENI CIVIL WAR
				#NYM Victory
				else_if = {
					limit = {
						FROM = { original_tag = NYM }
						OR = {
							ROOT = { original_tag = OMA }
							ROOT = { original_tag = YEM }
						}
					}
					add_to_variable = {
						var = global.PanArabRadicalism
						value = 2
					}
					FROM = {
						white_peace = ROOT
						#white_peace = {
							#	tag = ROOT
							#	message = yemen_nym_wins_msg
							#}
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = YemenCivilWarOver
					set_global_flag = skip_default_capitulation
				}
				#YEM Victory
				else_if = {
					limit = {
						ROOT = { original_tag = NYM }
						OR = {
							FROM = { original_tag = YEM }
							FROM = { original_tag = OMA }
						}
					}
					add_to_variable = {
						var = global.PanArabRadicalism
						value = 1
					}
					YEM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					if = {
						limit = { OMA = { has_war_with = NYM } }
						OMA = {
							white_peace = ROOT
						}
					}
					set_global_flag = YemenCivilWarOver
					set_global_flag = skip_default_capitulation
				}
				else_if = { #ECW - HMMLR capitulated One Country
					limit = {
						FROM = { original_tag = FEN }
						OR = {
							AND = {
								ROOT = { original_tag = CRN }
								ENG = { has_capitulated = no }
							}
							AND = {
								ROOT = { original_tag = ENG }
								CRN = { has_capitulated = no }
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = { #ECW - HMMLR victory
					limit = {
						FROM = { original_tag = FEN }
						OR = {
							AND = {
								ROOT = { original_tag = CRN }
								ENG = { has_capitulated = yes }
							}
							AND = {
								ROOT = { original_tag = ENG }
								CRN = { has_capitulated = yes }
							}
						}
					}
					set_global_flag = FEN_GF_WonEcw
					set_global_flag = ECW_Finished
					CRN = {
						hidden_effect = {
							remove_ideas = {
								CRN_nothing_without_us
								CRN_nothing_without_us_2
								CRN_accords_are_dead
								CRN_the_blitz_reborn
							}
						}
						transfer_navy = {
							target = GER
						}
						GER = {
							country_event = ENG_HMMLRECW.7
						}
					}
					ENG = {
						hidden_effect = {
							set_temp_variable = { temp_poverty_change = 10 }
							TNO_worsen_poverty_rate_direct = yes
							remove_ideas = {
								ENG_Brutal_War
								ENG_Brutal_War_AI
								ENG_the_legitimate_government
								ENG_promises_of_change
								ENG_a_force_of_darkness
								ENG_a_force_of_darkness_2
								ENG_a_force_of_darkness_3
								ENG_new_model_army
								ENG_new_model_army_2
								ENG_holding_out
								ENG_pushing_forward
								ENG_desparate_measures
								ENG_desparate_measures_2
								ENG_a_dirty_war
								ENG_anti_terrorist_actions_idea
								TNO_ParliamentMechanic_Monarch_Edward_VIII
								TNO_ParliamentMechanic_OppLeader_Harold_Macmillan
								TNO_ParliamentMechanic_Speaker_Alec_Douglas_Home
							}

						}
						white_peace = CRN
						annex_country = {
							target = CRN
							transfer_troops = no
						}
						ENG_HMMLR_ECW_VictoryPreAnnex = yes
						white_peace = FEN
						annex_country = {
							target = FEN
							transfer_troops = yes
						}
						every_owned_state = {
							add_core_of = ENG
							remove_core_of = FEN
							remove_core_of = CRN
						}
						diplomatic_relation = {
							country = CRN
							relation = military_access
							active = no
						}
						country_event = {
							id = ENG_HMMLRECW.4
							days = 2
						}
						country_event = {
							id = ENG_flavor.56
							days = 2
						}
					}
					FEN = {
						hidden_effect = {
							remove_ideas = {
								ENG_the_last_battle
								ENG_the_last_battle_2
								ENG_the_last_battle_3
								ENG_who_dares_wins
								ENG_who_dares_wins_2
								ENG_who_dares_wins_3
								ENG_who_dares_wins_4
								ENG_who_dares_wins_5
								ENG_the_left_resistance
								ENG_the_left_resistance_2
								ENG_the_left_resistance_3
								ENG_the_left_resistance_4
							}
						}
					}
					CRN = {
						diplomatic_relation = {
							country = ENG
							relation = military_access
							active = no
						}
					}
					SCO = {
						set_temp_variable = { target = FEN }
						TNO_clear_num_volunteers = yes
						remove_ideas = {
							SCO_UPECW_Volunteers
						}
					}
					ENG = {
						remove_dynamic_modifier = { modifier = ENG_DYNMON_english_army }
					}
					every_country = {
						news_event = { id = WORLD.60000 }
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = { #ECW - Collab victory
					limit = {
						FROM = {
							OR = {
								original_tag = CRN
								original_tag = ENG
							}
						}
						ROOT = { original_tag = FEN }
					}
					CRN = {
						hidden_effect = {
							remove_ideas = {
								CRN_nothing_without_us
								CRN_nothing_without_us_2
								CRN_accords_are_dead
								CRN_the_blitz_reborn
							}
						}
						transfer_state = 123
						transfer_state = 1296
						transfer_state = 1375
						diplomatic_relation = {
							country = ENG
							relation = military_access
							active = no
						}
					}
					every_state = {
						remove_core_of = FEN
					}
					ENG = {
						hidden_effect = {
							set_temp_variable = { temp_poverty_change = 10 }
							TNO_worsen_poverty_rate_direct = yes
							remove_ideas = {
								ENG_Brutal_War
								ENG_Brutal_War_AI
								ENG_the_legitimate_government
								ENG_promises_of_change
								ENG_a_force_of_darkness
								ENG_a_force_of_darkness_2
								ENG_a_force_of_darkness_3
								ENG_new_model_army
								ENG_new_model_army_2
								ENG_holding_out
								ENG_pushing_forward
								ENG_desparate_measures
								ENG_desparate_measures_2
								ENG_a_dirty_war
								ENG_anti_terrorist_actions_idea
							}
						}
						annex_country = {
							target = FEN
							transfer_troops = no
						}
						add_ideas = {
							ENG_reconstruction_of_England
							ENG_growing_hunger
							ENG_promising_future
						}
						TNO_Britain_ElectionSeason_Initialize_Post_ECW_Collab = yes
						country_event = {
							id = ENG_HMMLRECW.5
							days = 3
						}
						country_event = {
							id = ENG_flavor.57
							days = 2
						}
						diplomatic_relation = {
							country = CRN
							relation = military_access
							active = no
						}
					}
					FEN = {
						hidden_effect = {
							remove_ideas = {
								ENG_the_last_battle
								ENG_the_last_battle_2
								ENG_the_last_battle_3
								ENG_who_dares_wins
								ENG_who_dares_wins_2
								ENG_who_dares_wins_3
								ENG_who_dares_wins_4
								ENG_who_dares_wins_5
								ENG_the_left_resistance
								ENG_the_left_resistance_2
								ENG_the_left_resistance_3
								ENG_the_left_resistance_4
							}
						}
					}
					SCO = {
						set_temp_variable = { target = FEN }
						TNO_clear_num_volunteers = yes

						remove_ideas = {
							SCO_UPECW_Volunteers
						}
					}
					ENG = {
						remove_dynamic_modifier = { modifier = ENG_DYNMON_english_army }
					}
					set_global_flag = skip_default_capitulation
					set_global_flag = ENG_GF_WonEcw
					set_global_flag = ECW_Finished
					every_country = {
						news_event = { id = WORLD.50002 }
					}
				}

				else_if = {
					limit = {
						FROM = { original_tag = ENG }
						ROOT = { original_tag = CRN }
					}
					CRN = {
						transfer_navy = {
							target = GER
						}
						GER = {
							country_event = ENG_HMMLRECW.7
						}
					}
					ENG = {
						white_peace = CRN
						annex_country = {
							target = CRN
							transfer_troops = no
						}
					}
				}
				else_if = { #eng vs wales
					limit = {
						FROM = { original_tag = ENG }
						ROOT = { original_tag = WAL }
					}
					ENG = {
						annex_country = {
							target = WAL
							transfer_troops = no
						}
						if = {
							limit = {
								has_global_flag = ENG_GF_WonEcw
								has_government = conservative_democracy
							}
							complete_national_focus = ENG_IT_Macmillan_forcing_them_back_in
						}
						else_if = {
							limit = {
								has_government = socialist
							}
							complete_national_focus = FEN_SLP_Int_y_mabb_darogans_pride
						}
						set_country_flag = ENG_Wales_Violent
						ENG_wales_setup = yes
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #eng vs sco
					limit = {
						FROM = { original_tag = ENG }
						ROOT = { original_tag = SCO }
					}
					SCO = {
						transfer_navy = { target = ENG }
					}
					ENG = {
						annex_country = {
							target = SCO
							transfer_troops = no
						}
						if = {
							limit = {
								has_global_flag = ENG_GF_WonEcw
								has_government = conservative_democracy
							}
							complete_national_focus = ENG_IT_Macmillan_a_loud_refusal
						}
						else_if = {
							limit = {
								has_government = socialist
							}
							complete_national_focus = FEN_SLP_Int_the_capitalists_hold_out
						}
						remove_ideas = ENG_Scottish_mountains
						set_country_flag = ENG_Scottish_Violent
						ENG_scotland_setup = yes
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #eng loses to wales
					limit = {
						FROM = { original_tag = WAL }
						ROOT = { original_tag = ENG }
					}
					WAL = {
						annex_country = {
							target = ENG
							transfer_troops = no
						}
					}
					every_country = {
						news_event = {
							id = WORLD.50012
							days = 1
						}
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #eng loses to scotland
					limit = {
						FROM = { original_tag = SCO }
						ROOT = { original_tag = ENG }
					}
					SCO = {
						annex_country = {
							target = ENG
							transfer_troops = no
						}
						every_country = {
							news_event = {
								id = WORLD.50011
								days = 1
							}
						}
						if = {
							limit = {
								NOT = { has_country_flag = SCO_UP_COUP }
							}
							set_cosmetic_tag = SCO_UoB
							release_puppet = WAL
							release_puppet = ENG
							ENG = {
								retire_country_leader = yes
								set_popularities = { despotism = 100 }
								set_politics = {
									ruling_party = despotism
									elections_allowed = no
									last_election = "1962.12.17"
									election_frequency = 48
								}
								set_party_name = {
									ideology = despotism
									long_name = ENG_lose_scotland_party_long
									name = ENG_lose_scotland_party
								}
								create_country_leader = {
									name = "English Reconstruction Committee"
									#desc =
									picture = "Portrait_England_No_Monarch.dds"
									expire = "1999.12.31"
									ideology = despotism_interim_government_subtype
									traits = {
									}
								}
								### REMOVE CURRENT MINISTERS ###
								add_ideas = {
									ENG_Generic_Vacant_hog
									ENG_Generic_Vacant_for
									ENG_Generic_Vacant_eco
									ENG_Generic_Vacant_sec
								}
								remove_ideas = {
									WAL_Welsh_CounterCulture
									WAL_Free_Welsh_Army
									WAL_welsh_coal_income_idea
								}
								econ_join_sphere_USA = yes
							}
							WAL = {
								retire_country_leader = yes
								set_popularities = { despotism = 100 }
								set_politics = {
									ruling_party = despotism
									elections_allowed = no
									last_election = "1962.12.17"
									election_frequency = 48
								}
								set_party_name = {
									ideology = despotism
									long_name = WAL_lose_scotland_party_long
									name = WAL_lose_scotland_party
								}
								create_country_leader = {
									name = "Welsh Reconstruction Committee"
									#desc =
									picture = "Portrait_Welsh_Assembly.dds"
									expire = "1999.12.31"
									ideology = despotism_interim_government_subtype
									traits = {
									}
								}
								### REMOVE CURRENT MINISTERS ###
								add_ideas = {
									WAL_Generic_Vacant_hog
									WAL_Generic_Vacant_eco
									WAL_Generic_Vacant_for
									WAL_Generic_Vacant_sec
								}
								econ_join_sphere_USA = yes
							}
							meta_effect = {
								text = {
									ENG = {
										set_cosmetic_tag = ENG_[SCO_Party]_UoB_start
										load_focus_tree = ENG_blankfocus
										set_country_flag = ENG_Parliament_Disabled
									}
									WAL = {
										set_cosmetic_tag = WAL_[SCO_Party]_UoB_start
										load_focus_tree = ENG_blankfocus
									}
								}
								SCO_Party = "[GetScoParty]"
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#MONGOLIAN CIVIL WAR
				#MEN VICTORY
				else_if = {
					limit = {
						FROM = { original_tag = MEN }
						ROOT = { original_tag = MON }
					}
					MEN = {
						annex_country = {
							target = MON
							transfer_troops = no
						}
						country_event = { id = men.1 }
						set_capital = { state = 330 remember_old_capital = no }
					}
					PRC = { country_event = PRC.36 }
					set_global_flag = Tsagaan_defeated
					set_global_flag = skip_default_capitulation
				}
				#MON VICTORY
				else_if = {
					limit = {
						FROM = { original_tag = MON }
						ROOT = { original_tag = MEN }
					}
					MON = {
						annex_country = {
							target = MEN
							transfer_troops = no
						}
						JAP = {
							country_event = { id = men.2 }
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {original_tag = MON}
						ROOT = {original_tag = MAN}
					}
					MON = {
						annex_country = {
							target = MAN
							transfer_troops = no
						}
					}
					JAP = {
						country_event = {
							id = men.21
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#JAPAN FUCKS UP THOSE MONGOLS
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = JAP
								AND = {
									has_war_together_with = JAP
									has_war_with = MON
								}
							}
						}
						ROOT = { original_tag = MON }
					}
					JAP = {
						annex_country = {
							target = MON
							transfer_troops = no
						}
						if = {
							limit = {
								NOT = {
									country_exists = MAN
								}
							}
							JAP = {
								every_owned_state = {
									limit = {
										is_core_of = MAN
									}
									MAN = {
										transfer_state = PREV
									}
								}
							}
						}
						country_event = men.3
					}
					PRC = { country_event = PRC.36 }
					set_global_flag = skip_default_capitulation
				}
				#MALAYA PROXY WAR
				#MALAYA VICTORY
				else_if = { #Total USA victory
					limit = {
						FROM = { original_tag = MLY }
						ROOT = { original_tag = SHO }
					}
					MLY = {
						white_peace = SHO
						annex_country = {
							target = SHO
							transfer_troops = no
						}
					}
					SHO = {
						transfer_state = 751
						set_politics = {
							ruling_party = despotism
						}
						set_party_name = {
							ideology = despotism
							long_name = SHO_despotism_party_long_SG
							name = SHO_despotism_party_SG
						}
						set_party_name = {
							ideology = ultranationalism
							long_name = SHO_ultranationalism_party_long_SG
							name = SHO_ultranationalism_party_SG
						}
						set_popularities = {
							despotism = 80
							ultranationalism = 20
						}
						create_country_leader = {
							name = "Takeo Kurosawa"
							#desc =
							picture = "Portrait_Takeo_Kurosawa.dds"
							expire = "1999.12.31"
							ideology = despotism_colonial_government_subtype
							traits = {
							}
						}
						set_cosmetic_tag = SHO_Singapore
					}
					USA = {
						country_event = sho.4
					}
					JAP = {
						country_event = sho.51
					}
					SHO_war_end_effect = yes
					set_global_flag = skip_default_capitulation
				}
				#Shonan VICTORY
				else_if = { #Total Japanese victory
					limit = {
						FROM = { original_tag = SHO }
						ROOT = { original_tag = MLY }
					}
					SHO = {
						white_peace = MLY
						annex_country = {
							target = MLY
							transfer_troops = no
						}
						set_popularities = {
							communist = 15
							socialist = 25
							social_democracy = 5
							conservative_democracy = 15
							authoritarian_democracy = 10
							despotism = 40
							fascism = 0
							national_socialism = 0
							ultranationalism = 10
						}
						set_cosmetic_tag = SHO_provisional_government
					}
					JAP = {
						country_event = sho.5
					}
					USA = {
						country_event = sho.41
					}
					SHO_war_end_effect = yes
					set_global_flag = skip_default_capitulation
				}

				###PHILIPPINES WARS###

				else_if = { ###Second Philippines Republic Capitulation
					limit = {
						ROOT = { original_tag = PHI }
						has_global_flag = PHI_proxy_war
					}
					PHI = {
						remove_ideas = {
							balintawak_blitz_idea
							PHI_dummy_capitulation
							PHI_fraudulent_sovereignty
							PHI_paradoxical_government
							PHI_listless_spirit
						}
					}
					if = {
						limit = {
							SPH = {
								controls_state = 327
							}
						}
						TNO_Blitz_SPH_victory = yes
					}
					else = {
						TNO_Blitz_UPH_victory = yes
					}
					UPH = {
						remove_ideas = balintawak_blitz_idea
						white_peace = PHI
					}
					SPH = {
						remove_ideas = balintawak_blitz_idea
						white_peace = PHI
					}
					set_global_flag = skip_default_capitulation
					log = "[GetDateText]: [Root.GetName]: on_actions peace_on_actions PHI capitulate"
					clear_variable = PHI.PHI_fucking_surrender_limit
					clear_variable = UPH.UPH_fucking_surrender_limit
					clear_variable = SPH.SPH_fucking_surrender_limit
				}

				else_if = { ###UPH Capitulation to PHI
					limit = {
						FROM = { original_tag = PHI }
						ROOT = { original_tag = UPH }
						has_global_flag = PHI_proxy_war
					}
					PHI = {
						white_peace = UPH
						annex_country = {
							target = UPH
							transfer_troops = no
						}
						if = {
							limit = {
								NOT = { country_exists = SPH }
							}
							TNO_Blitz_PHI_Victory = yes
							clear_variable = PHI.PHI_fucking_surrender_limit
							clear_variable = UPH.UPH_fucking_surrender_limit
							clear_variable = SPH.SPH_fucking_surrender_limit
							USA = {
								set_temp_variable = { Victory_ID = 19 }
								set_temp_variable = { Victory_Outcome = 1 }
								set_temp_variable = { Victory_Points = -100 }
								Cold_War_GUI_ManipulateVictory = yes
							}
							JAP = {
								set_temp_variable = { Victory_ID = 19 }
								set_temp_variable = { Victory_Outcome = 5 }
								set_temp_variable = { Victory_Points = 100 }
								Cold_War_GUI_ManipulateVictory = yes
							}
						}
					}
					set_global_flag = skip_default_capitulation
					log = "[GetDateText]: [Root.GetName]: on_actions peace_on_actions UPH capitulate"
				}

				else_if = { ###SPH Capitulation to PHI
					limit = {
						FROM = { original_tag = PHI }
						ROOT = { original_tag = SPH }
						has_global_flag = PHI_proxy_war
					}
					PHI = {
						white_peace = SPH
						annex_country = {
							target = SPH
							transfer_troops = no
						}
						if = {
							limit = {
								NOT = { country_exists = UPH }
							}
							TNO_Blitz_PHI_Victory = yes
							clear_variable = PHI.PHI_fucking_surrender_limit
							clear_variable = UPH.UPH_fucking_surrender_limit
							clear_variable = SPH.SPH_fucking_surrender_limit
							USA = {
								set_temp_variable = { Victory_ID = 19 }
								set_temp_variable = { Victory_Outcome = 1 }
								set_temp_variable = { Victory_Points = -100 }
								Cold_War_GUI_ManipulateVictory = yes
							}
							JAP = {
								set_temp_variable = { Victory_ID = 19 }
								set_temp_variable = { Victory_Outcome = 5 }
								set_temp_variable = { Victory_Points = 100 }
								Cold_War_GUI_ManipulateVictory = yes
							}
						}
					}
					set_global_flag = skip_default_capitulation
					log = "[GetDateText]: [Root.GetName]: on_actions peace_on_actions SPH capitulate"
				}

				else_if = { ###14th Army completely dead
					limit = {
						FROM = {
							OR = {
								original_tag = UPH
								original_tag = SPH
							}
						}
						ROOT = {
							original_tag = FGB
						}
					}
					set_global_flag = skip_default_capitulation
					if = {
						limit = {
							SPH = { has_capitulated = no }
						}
						SPH = {
							annex_country = {
								target = FGB
								transfer_troops = no
							}
						}
					}
					else = {
						UPH = {
							annex_country = {
								target = FGB
								transfer_troops = no
							}
						}
					}
					if = {
						limit = {
							UPH = { is_in_faction_with = SPH }
						}
						USA = {
							country_event = {
								id =  PHI_Blitz.17 # Coalition ending
								days = 1
							}
						}
						log = "[GetDateText]: [Root.GetName]: on_actions peace_on_actions coalition gov't won"
					}
					else_if = { ### checks if PRP is already dead
						limit = {
							SPH = { exists = no }
							has_global_flag = UPH_Operation_Iridescent
						}
						USA = {
							country_event = {
								id = PHI_Blitz.16 # OFN Mandate ending
								days = 1
							}
						}
						log = "[GetDateText]: [Root.GetName]: on_actions peace_on_actions OFN mandate won"
					}
					else_if = {
						limit = {
							SPH = { exists = no }
						}
						USA = {
							country_event = {
								id = PHI_Blitz.166 # USFIP ending
								days = 1
							}
						}
						log = "[GetDateText]: [Root.GetName]: on_actions peace_on_actions OFN mandate won"
					}
					else_if = { ### checks if Mandate is already dead
						limit = {
							NOT = { country_exists = UPH }
							SPH = { has_cosmetic_tag = SPH_PRP }
						}
						USA = {
							country_event = {
								id = PHI_Blitz.18 # Commie Philippines ending
								days = 1
							}
						}
					}
				}
				else_if = { ###USFIP kills SPH
					limit = {
						FROM = { original_tag = UPH }
						ROOT = { original_tag = SPH }
					}
					if = {
						limit = {
							NOT = { country_exists = FGB }
						}
						USA = {
							if = {
								limit = { has_global_flag = UPH_Operation_Iridescent }
								country_event = {
									id = PHI_Blitz.16 # OFN Mandate ending
									days = 1
								}
							}
							else = {
								country_event = {
									id = PHI_Blitz.166 # Fertig, USFIP ending
									days = 1
								}
							}
						}
					}
					# Annexation already handled with default effects
				}
				else_if = { ###SPH kills USFIP
					limit = {
						FROM = { original_tag = SPH }
						ROOT = { original_tag = UPH }
					}
					if = {
						limit = {
							NOT = { country_exists = FGB }
						}
						USA = {
							country_event = {
								id = PHI_Blitz.18 # Commie Philippines ending
								days = 1
							}
						}
					}
					# Annexation already handled with default effects
				}

				else_if = { ###14th army murders everyone
					limit = {
						FROM = { original_tag = FGB }
						ROOT = {
							OR = {
								original_tag = UPH
								original_tag = SPH
							}
						}
					}
					FGB = {
						add_to_variable = { PHI_14th_invasion_SPH_UPH = 1 }
						if = {
							limit = {
								check_variable = {
									PHI_14th_invasion_SPH_UPH = 2
								}
							}
							JAP = { country_event = PHI_Blitz.15 }
						}
					}
				}

				### Madagaskar Peace Deals - I am sorry, nothing else is working - Fetti
				else_if = { # Mad beats the Garrisons
					limit = {
						FROM = { original_tag = MAD }
						ROOT = { original_tag = MDG }
					}
					MAD = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					GER = {
						country_event = MADAGASKAR.7
					}
					MAD_check_civil_war_status = yes
				}
				else_if = { # Mandate beats the Natives
					limit = {
						FROM = { original_tag = MAD }
						ROOT = { original_tag = MDM }
					}
					ROOT = {
						MDM_jacques_rabemananjara = { set_nationality = MAD }
					}
					MAD = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					JAP = {
						country_event = MADAGASKAR.6
					}
					MAD_check_civil_war_status = yes
				}
				else_if = { # Garrisons beats the Mandate
					limit = {
						FROM = { original_tag = MDG }
						ROOT = { original_tag = MAD }
					}
					MDG = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					USA = {
						country_event = MADAGASKAR.5
					}
					MAD_check_civil_war_status = yes
				}
				else_if = { # Garrisons beats the Natives
					limit = {
						FROM = { original_tag = MDG }
						ROOT = { original_tag = MDM }
					}
					MDG = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					JAP = {
						country_event = MADAGASKAR.6
					}
					MAD_check_civil_war_status = yes
				}
				else_if = { # Natives beats the Mandate
					limit = {
						FROM = { original_tag = MDM }
						ROOT = { original_tag = MAD }
					}
					MDM = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					USA = {
						country_event = MADAGASKAR.5
					}
					MAD_check_civil_war_status = yes
				}
				else_if = { # Natives beat the Garrisons
					limit = {
						FROM = { original_tag = MDM }
						ROOT = { original_tag = MDG }
					}
					MDM = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					GER = {
						country_event = MADAGASKAR.7
					}
					MAD_check_civil_war_status = yes
				}

				#Organ peace deals
				else_if = { #PRC VS MEN
					limit = {
						FROM = { tag = PRC }
						ROOT = { tag = MEN }
					}
					PRC = {
						country_event = PRC.9
						white_peace = MEN
						white_peace = MAN
						white_peace = JAP
					}
					MEN = {
						country_event = men.20
						MEN_buff_mengjiang = yes
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #MEN VS PRC
					limit = {
						FROM = {
							OR = {
								original_tag = MEN
								AND = {
									has_war_together_with = MEN
									has_war_with = PRC
								}
							}
						}
						ROOT = { original_tag = PRC }
					}
					PRC = {
						country_event = PRC.11
						white_peace = MEN
						white_peace = MAN
						white_peace = JAP
					}
					MEN = {
						transfer_state = 814
						MEN_buff_mengjiang = yes
					}
					set_global_flag = skip_default_capitulation
				}
				#Western Insurrection
				else_if = {#NPA defeats China before Jaabn intervenes
					limit = {
						NOT = { has_global_flag = CHI_Western_Insurection_RoC_defeated }
						has_global_flag = CHI_Western_Insurrection_Crisis
						FROM = {
							OR = {
								original_tag = YUN
								has_idea = NLF_Member
							}
						}

						ROOT = {
							OR = {
								original_tag = CHI
								is_in_faction_with = CHI
							}
							NOT = {has_war_together_with = JAP}
						}
					}
					set_global_flag = YUN_WI_thx_paradox

					every_state = {
						limit = { is_core_of = NCC }
						NCC = { transfer_state = PREV }
					}
					CHI = {
						every_unit_leader = {
							set_nationality = NCC
						}
					}
					NCC = {
						load_oob = "NCC_GAW"
						econ_join_sphere_JAP = yes
					}
					every_other_country = {
						limit = { is_in_faction_with = YUN }
						NCC = { set_embargo_PREV = yes }
						NCC = { PREV = { set_embargo_PREV = yes } }
					}

					YUN = {
						country_event = {id = yun_wi.30}
						white_peace = CHI
						annex_country = {
							target = CHI
							transfer_troops = no
						}
						YUN_testing = yes
					}
					JAP = {
						add_to_faction = NCC
						country_event = { id = japchiinteraction.3 days = 8 }
					}
					set_global_flag = CHI_Western_Insurection_RoC_defeated
					clr_global_flag = YUN_WI_thx_paradox
					set_global_flag = skip_default_capitulation
				}
				else_if = {#Other Chinese states are capitulated by Long Yun
					limit = {
						FROM = {
							OR = {
								original_tag = YUN
								has_idea = NLF_Member
							}
						}

						ROOT = {
							OR = {
								original_tag = MAN
								original_tag = MEN
								original_tag = GNG
								original_tag = GAN
								original_tag = GUX
								original_tag = SHX
								original_tag = XIK
								original_tag = QIN
								original_tag = TIB
								original_tag = XIN
								original_tag = NCC
							}
						}
					}
					set_global_flag = YUN_WI_thx_paradox

					YUN = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						#if = {
						#	limit = {
						#		ROOT = { original_tag = GUX }
						#	}
						#	country_event = { id = yun.134 }
						#}
						#else_if = {
						#	limit = {
						#		ROOT = { original_tag = SHX }
						#	}
						#	country_event = { id = yun.136 }
						#}
						if = {
							limit = {
								ROOT = { original_tag = NCC }
							}
							country_event = { id = yun_wi.36 }
						}
						else_if = {
							limit = {
								ROOT = { original_tag = MAN }
							}
							country_event = { id = yun_wi.37 }
						}
						else_if = {
							limit = {
								ROOT = { original_tag = TIB }
							}
							country_event = { id = yun_wi.38 }
						}
						else_if = {
							limit = {
								ROOT = { original_tag = GNG }
							}
							country_event = { id = yun_wi.39 }
						}
						#else_if = {
						#	limit = {
						#		ROOT = { original_tag = GAN }
						#	}
						#	country_event = { id = yun.138 }
						#}
						else_if = {
							limit = {
								ROOT = { original_tag = MEN }
							}
							country_event = { id = yun.139 }
						}
					}
					if = {
						limit = {
							ROOT = {
								OR = { 
									original_tag = NCC
									original_tag = GAN
									original_tag = MEN
									original_tag = GNG
									original_tag = MAN 
								}
							}
						}
						YUN = {
							add_to_variable = { npagawprogress = 1 }
						}
						if = {
							limit = {
								check_variable = { YUN.npagawprogress = 5 }
							}
							JAP = {
								country_event = { id = japchiinteraction.12 }
								527 = { set_demilitarized_zone = no }
								1024 = { set_demilitarized_zone = no }
							}
						}
						else_if = {
							limit = {
								check_variable = { YUN.npagawprogress < 5 }
								NOT = { country_exists = GAN }
								NOT = { country_exists = NCC }
							}
							JAP = {
								country_event = { id = japchiinteraction.11 }
							}
						}
						if = {
							limit = {
								check_variable = { YUN.npagawprogress = 2 }
							}
							every_country = {
								limit = { 
									has_idea = YUN_SEA_NOT_YOUR_BUSINESS_STOP
									is_in_faction_with = JAP 
								}
								remove_ideas = YUN_SEA_NOT_YOUR_BUSINESS_STOP
								add_to_war = {
									targeted_alliance = JAP
									enemy = YUN
								}
							}
							VIN = {
								load_oob = "VIN_GAW"
								remove_ideas = VIN_japanese_army
							}
						}
					}
					clr_global_flag = YUN_WI_thx_paradox
					set_global_flag = skip_default_capitulation
				}

				else_if = {#Western Insurrection, Yunnan is defeated without Jaabnese help
					limit = {
						FROM = {
							is_in_faction_with = CHI
							NOT = { is_in_faction_with = JAP }
						}
						ROOT = {
							OR = {
								original_tag = YUN
								has_idea = NLF_Member
							}
						}
						has_global_flag = CHI_Western_Insurrection_Crisis
						NOT = { has_global_flag = JAP_Western_Insurrection_Intervention }
					}

					FROM = {
						white_peace = ROOT
					}

					YUN = {
						YUN_NPA_fails_effects = yes
						set_party_name = {
							ideology = despotism
							name = YUN_despotism_XRA_party
							long_name = YUN_despotism_XRA_party_long
						}
						YUN_zhou_longxiang = {
							add_country_leader_role = {
								country_leader = {
									desc = "POLITICS_ZHOU_LONGXIANG_DESC"
									ideology = despotism_interim_government_subtype
									traits = {  }
									expire = "1999.1.1.1"
									id = -1
								}
								promote_leader = yes
							}
						}
						set_politics = {
							ruling_party = despotism
							last_election = "1933.3.5"
							election_frequency = 48
							elections_allowed = no
						}
						set_popularities = {
							social_democracy = 0
							liberal_democracy = 0
							despotism = 54
							conservative_democracy = 4
							authoritarian_democracy = 38
							fascism = 0
							national_socialism = 0
							ultranationalism = 4
						}
						add_ideas = Sphere_Economic_Dependent
						set_cosmetic_tag = YUN_southwest_united_reconstruction
						CHI_save_pre_puppet_politics = yes
						CHI = {
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_satellite
							}
						}
						CHI_apply_pre_puppet_politics = yes
						clr_country_flag = YUN_long_yun_crusade
						if = {
							limit = { has_global_flag = WI_NPA_takes_Sichuan }
							country_event = { id = yun_zhengtong.15 days = 3 }
							country_event = { id = yun_zhengtong.22 days = 7 }
						}
						if = {
							limit = { has_global_flag = GUX_joins_NPA }
							country_event = { id = yun_zhengtong.36 days = 4 }
						}
						country_event = { id = yun_zhengtong.29 days = 2 }
						country_event = { id = yun_zhengtong.43 days = 3 }
						country_event = { id = yun_zhengtong.50 days = 5 }
					}
					CHI = {
						country_event = { id = chi_wi.5 }
						if = {
							limit = {
								OR = {
									GUX = { has_idea = NLF_Member }
									SHX = { has_idea = NLF_Member }
								}
							}
							country_event = {
								id = chi.6674
								days = 365
							}
						}
						country_event = {
							id = chi.6672
							days = 730
						}
						YUN_testing = yes
					}
					if = {
						limit = {
							XIK = { 
								is_in_faction_with = CHI 
								has_capitulated = yes
							}
							NOT = { country_exists = XIK }
						}
						every_state = {
							limit = { is_core_of = XIK }
							XIK = { transfer_state = PREV }
						}
					}
					else_if = {
						limit = {
							XIK = { has_idea = NLF_Member }
						}
						every_state = {
							limit = { is_core_of = XIK }
							YUN = { transfer_state = PREV }
							remove_core_of = XIK
						}
					}					
					
					if = {
						limit = {
							GUX = {
								is_in_faction_with = CHI
								has_capitulated = yes
							}
						}
						every_state = {
							limit = { is_core_of = GUX }
							GUX = { transfer_state = PREV }
						}
					}
					else_if = {
						limit = {
							GUX = { has_idea = NLF_Member }
						}
						CHI = {
							annex_country = {
								target = GUX
								transfer_troops = no
							}
						}
					}

					if = {
						limit = {
							SHX = { 
								is_in_faction_with = CHI
								has_capitulated = yes
							}
						}
						every_state = {
							limit = { is_core_of = SHX }
							SHX = { transfer_state = PREV }
						}
					}
					else_if = {
						limit = {
							SHX = { has_idea = NLF_Member }
						}
						CHI = {
							annex_country = {
								target = SHX
								transfer_troops = no
							}
						}
					}
					YUN = {
						every_owned_state = { add_core_of = PREV }
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {#Western Insurrection, Yunnan is defeated with Jaabnese help
					limit = {
						FROM = {
							is_in_faction_with = CHI
							NOT = { is_in_faction_with = JAP }
						}
						ROOT = {
							OR = {
								original_tag = YUN
								has_idea = NLF_Member
							}
						}
						has_global_flag = CHI_Western_Insurrection_Crisis
						has_global_flag = JAP_WI_intervention_begun
					}

					FROM = {
						white_peace = ROOT
					}

					YUN = {
						YUN_NPA_fails_effects = yes
						set_party_name = {
							ideology = despotism
							name = YUN_despotism_XRA_party
							long_name = YUN_despotism_XRA_party_long
						}
						YUN_zhou_longxiang = {
							add_country_leader_role = {
								country_leader = {
									desc = "POLITICS_ZHOU_LONGXIANG_DESC"
									ideology = despotism_interim_government_subtype
									traits = {  }
									expire = "1999.1.1.1"
									id = -1
								}
								promote_leader = yes
							}
						}
						set_politics = {
							ruling_party = despotism
							last_election = "1933.3.5"
							election_frequency = 48
							elections_allowed = no
						}
						set_popularities = {
							social_democracy = 0
							liberal_democracy = 0
							despotism = 54
							conservative_democracy = 4
							authoritarian_democracy = 38
							fascism = 0
							national_socialism = 0
							ultranationalism = 4
						}
						CHI_save_pre_puppet_politics = yes
						CHI = {
							set_autonomy = {
								target = PREV
								autonomy_state = autonomy_satellite
							}
						}
						CHI_apply_pre_puppet_politics = yes
						add_ideas = Sphere_Economic_Dependent
						set_cosmetic_tag = YUN_southwest_united_reconstruction
						clr_country_flag = YUN_long_yun_crusade
						if = {
							limit = { has_global_flag = WI_NPA_takes_Sichuan }
							country_event = { id = yun_zhengtong.15 days = 3 }
							country_event = { id = yun_zhengtong.22 days = 7 }
						}
						if = {
							limit = { has_global_flag = GUX_joins_NPA }
							country_event = { id = yun_zhengtong.36 days = 4 }
						}
						country_event = { id = yun_zhengtong.29 days = 2 }
						country_event = { id = yun_zhengtong.43 days = 3 }
						country_event = { id = yun_zhengtong.50 days = 5 }
					}
					if = {
						limit = {
							XIK = { 
								is_in_faction_with = CHI 
								has_capitulated = yes
							}
							NOT = { country_exists = XIK }
						}
						every_state = {
							limit = { is_core_of = XIK }
							XIK = { transfer_state = PREV }
						}
					}
					else_if = {
						limit = {
							XIK = { has_idea = NLF_Member }
						}
						every_state = {
							limit = { is_core_of = XIK }
							YUN = { transfer_state = PREV }
							remove_core_of = XIK
						}
					}

					if = {
						limit = {
							GUX = { 
								is_in_faction_with = CHI
								has_capitulated = yes
							}
						}
						every_state = {
							limit = { is_core_of = GUX }
							GUX = { transfer_state = PREV }
						}
					}
					else_if = {
						limit = {
							GUX = { has_idea = NLF_Member }
						}
						CHI = {
							annex_country = {
								target = GUX
								transfer_troops = no
							}
						}
					}

					if = {
						limit = {
							SHX = { 
								is_in_faction_with = CHI
								has_capitulated = yes
							}
						}
						every_state = {
							limit = { is_core_of = SHX }
							SHX = { transfer_state = PREV }
						}
					}
					else_if = {
						limit = {
							SHX = { has_idea = NLF_Member }
						}
						CHI = {
							annex_country = {
								target = SHX
								transfer_troops = no
							}
						}
					}
					CHI = {
						country_event = { id = chi_wi.6 }
						if = {
							limit = {
								OR = {
									GUX = { has_idea = NLF_Member }
									SHX = { has_idea = NLF_Member }
								}
							}
							country_event = {
								id = chi.6674
								days = 365
							}
						}
						country_event = {
							id = chi.6672
							days = 730
						}
						clr_country_flag = requested_help_Western_Insurrection
						YUN_testing = yes
					}
					JAP = {
						clear_variable = JAP_advisor_level
					}
					YUN = {
						every_owned_state = { add_core_of = PREV }
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {#Western Insurrection, Yunnan is defeated with direct IJA intervention
					limit = {
						FROM = {
							OR = {
								is_in_faction_with = JAP
								is_in_faction_with = CHI
							}
						}
						ROOT = { original_tag = YUN }
						has_global_flag = CHI_Western_Insurrection_Crisis
						has_global_flag = JAP_Western_Insurrection_Intervention
					}
					FROM = { white_peace = ROOT }
					if = {
						limit = { FROM = { has_war = no } }
						JAP = {
							country_event = {
								id = japchiinteraction.4
							}
							clear_variable = JAP_advisor_level
						}
						CHI = {
							clr_country_flag = requested_help_Western_Insurrection
							country_event = { id = chi.3000 }
							YUN_testing = yes
						}
						clr_global_flag = CHI_Western_Insurrection_Crisis
					}
					YUN = {
						YUN_NPA_fails_effects = yes
						set_country_flag = TNO_closing_screen_show
					}
					clr_global_flag = CHI_Western_Insurection_RoC_defeated
					set_global_flag = skip_default_capitulation
				}
				else_if = {#Western Insurrection, warlord is defeated with direct IJA intervention
					limit = {
						FROM = {
							OR = {
								is_in_faction_with = JAP
								is_in_faction_with = CHI
							}
						}
						ROOT = { has_idea = NLF_Member }
						has_global_flag = CHI_Western_Insurrection_Crisis
						has_global_flag = JAP_Western_Insurrection_Intervention
					}
					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					if = {
						limit = { FROM = { has_war = no } }
						JAP = {
							country_event = {
								id = japchiinteraction.4
							}
							clear_variable = JAP_advisor_level
						}
						CHI = {
							clr_country_flag = requested_help_Western_Insurrection
							country_event = { id = chi.3000 }
							YUN_testing = yes
						}
						clr_global_flag = CHI_Western_Insurrection_Crisis
					}
					clr_global_flag = CHI_Western_Insurection_RoC_defeated
					set_global_flag = skip_default_capitulation
				}
				else_if = {#GAW, China has fallen and Jaabn/Sphere troops capitulate NPA
					limit = {
						has_global_flag = CHI_Western_Insurection_RoC_defeated
						FROM = {
							is_in_faction_with = JAP
						}
						ROOT = {
							original_tag = YUN
						}
					}

					FROM = { white_peace = ROOT }
					if = {
						limit = { FROM = { has_war = no } }
						JAP = {
							country_event = {
								id = japchiinteraction.4
							}
							clear_variable = JAP_advisor_level
						}
						JAP = {
							set_temp_variable = { Victory_ID = 27 }
							set_temp_variable = { Victory_Outcome = 4 }
							set_temp_variable = { Victory_Points = 150 }
							Cold_War_GUI_ManipulateVictory = yes
						}
					}
					YUN = {
						YUN_NPA_fails_effects = yes
						every_owned_state = {
							limit = { 
								NOT = { state = 325 } 
								NOT = { state = 960 }
								NOT = { state = 603 }
							}
							JAP = { transfer_state = PREV }
						}
						if = {
							limit = { check_variable = { YUN_WI_sun = 1 } }
							country_event = { id = yun_zhengtong.38 days = 2 }
						}
						if = {
							limit = { check_variable = { YUN_WI_cck = 1 } }
							country_event = { id = yun_zhengtong.45 days = 3 }
						}
						if = {
							limit = {
								check_variable = { YUN_WI_cck = 1 }
								check_variable = { YUN_WI_cwk = 1 }
							}
							country_event = { id = yun_zhengtong.52 days = 4 }
						}
						if = {
							limit = { check_variable = { YUN_WI_song = 1 } }
							country_event = { id = yun_zhengtong.17 days = 5 }
						}
						if = {
							limit = { check_variable = { YUN_WI_liu = 1 } }
							country_event = { id = yun_zhengtong.24 days = 6 }
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {#GAW, China has fallen and Jaabn/Sphere troops capitulate warlords
					limit = {
						has_global_flag = CHI_Western_Insurection_RoC_defeated
						FROM = {
							is_in_faction_with = JAP
						}
						ROOT = {
							has_idea = NLF_Member
						}
					}

					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					if = {
						limit = { FROM = { has_war = no } }
						JAP = {
							country_event = {
								id = japchiinteraction.4
							}
							clear_variable = JAP_advisor_level
						}
						JAP = {
							set_temp_variable = { Victory_ID = 27 }
							set_temp_variable = { Victory_Outcome = 4 }
							set_temp_variable = { Victory_Points = 150 }
							Cold_War_GUI_ManipulateVictory = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Yves gets curbestomped by Iberia
				else_if = {
					limit = {
						FROM = {
							tag = IBR
						}
						ROOT = {
							tag = SLG
						}
					}
					IBR = {
						country_event = {
							id = IBR.3005
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {
							tag = IBR
						}
						ROOT = {
							tag = SPA
						}
					}
					IBR = {
						country_event = {
							id = IBR.819
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#IBERIAN WARS
				else_if = {
					limit = {
						FROM = {
							is_iberian_nation = yes
						}
						ROOT = {
							is_iberian_nation = yes
						}
					}
					# Deal with some special cases first
					# Morrocco
					if = {
						limit = {
							ROOT = {
								tag = MOR
							}
						}
						every_state = {
							limit = {
								check_variable = {
									THIS.controller = IBR
								}
							}
							IBR = {
								transfer_state = PREV
							}
						}
						every_state = {
							limit = {
								OR = {
									is_claimed_by = TRZ
									is_core_of = TRZ
								}
								NOT = { is_owned_by = IBR }
							}
							TRZ = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
						every_state = {
							limit = {
								OR = {
									is_claimed_by = RIF
									is_core_of = RIF
								}
								NOT = { is_owned_by = IBR }
							}
							RIF = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
					}
					else_if = {
						limit = {
							FROM = { tag = MOR }
							ROOT = { tag = RIF }
						}
						every_state = {
							limit = {
								is_owned_by = RIF
							}
							MOR = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
						MOR = { remove_state_core = 1546 }
					}
					else_if = {
						limit = {
							FROM = { tag = IBR }
							OR = {
								ROOT = { tag = RIF }
								ROOT = { tag = TRZ }
							}
						}
						every_state = {
							limit = {
								is_owned_by = ROOT
							}
							IBR = {
								transfer_state = PREV
							}
						}
					}
					else = {
						# The winner could take states controlled by the capitulated country / them
						every_state = {
							limit = {
								is_owned_by = ROOT
								OR = {
									check_variable = {
										THIS.controller = FROM
									}
									check_variable = {
										THIS.controller = ROOT
									}
								}
								OR = {
									is_claimed_by = FROM
									is_core_of = FROM
								}
							}
							FROM = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
						# Every other country could take states controlled by them
						every_country = {
							limit = {
								is_iberian_nation = yes
								has_war_with = ROOT
							}
							every_state = {
								limit = {
									is_owned_by = ROOT
									check_variable = {
										THIS.controller = PREV
									}
									OR = {
										is_claimed_by = PREV
										is_core_of = PREV
									}
								}
								PREV = {
									add_state_core = PREV
									transfer_state = PREV
								}
							}
						}
						# Finally the winner can take states countrolled by other people
						every_state = {
							limit = {
								is_owned_by = ROOT
								OR = {
									is_claimed_by = FROM
									is_core_of = FROM
								}
							}
							FROM = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
					}
					every_country = {
						limit = {
							is_iberian_nation = yes
							has_war_with = ROOT
						}
						ROOT = {
							white_peace = PREV
						}
					}
					# Custom peacedeal if Spain take Portugal / Portugal take Spain
					if = {
						limit = {
							FROM = { tag = SPS }
						}
						every_state = {
							limit = {
								is_portuguese_state = yes
								is_owned_by = ROOT
							}
							POR = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
					}
					else_if = {
						limit = {
							FROM = { tag = SPR }
						}
						every_state = {
							limit = {
								is_portuguese_state = yes
								is_owned_by = ROOT
							}
							RPP = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
					}
					else_if = {
						limit = {
							FROM = { tag = POR }
						}
						if = {
							limit = {
								has_global_flag = FZL_has_spawned
							}
							every_state = {
								limit = {
									is_owned_by = ROOT
									is_spanish_state = yes
								}
								SPS = {
									add_state_core = PREV
									transfer_state = PREV
								}
							}
						}
						else = {
							every_state = {
								limit = {
									is_owned_by = ROOT
									is_spanish_state = yes
								}
								SPR = {
									add_state_core = PREV
									transfer_state = PREV
								}
							}
						}
					}
					else_if = {
						limit = {
							FROM = {
								OR = {
									tag = PPR
									tag = RPP
								}
							}
						}
						every_state = {
							limit = {
								is_owned_by = ROOT
								is_spanish_state = yes
							}
							SPR = {
								add_state_core = PREV
								transfer_state = PREV
							}
						}
					}
					else_if = {
						limit = {
							FROM = {
								is_iberian_major = yes
							}
							ROOT = {
								is_iberian_major = yes
								exists = yes
							}
						}
						FROM = {
							set_autonomy = {
								target = ROOT
								autonomy_state = autonomy_ibrgovernate
							}
						}
						ROOT = {
							IBRWarsAssignCosmetic = yes
						}
					}
					else_if = {
						limit = {
							FROM = {
								is_iberian_major = yes
							}
							ROOT = {
								is_iberian_major = no
								exists = yes
							}
						}
						FROM = {
							set_autonomy = {
								target = ROOT
								autonomy_state = autonomy_ibrgovernate
							}
						}
						ROOT = {
							IBRWarsAssignCosmetic = yes
							IBRWarsResign = yes
						}
					}
					every_country = {
						limit = {
							is_iberian_nation = yes
							is_puppet = no
							NOT = {
								OR = {
									has_cosmetic_tag = SPRKingdom
									has_cosmetic_tag = IBR_WARS
									has_cosmetic_tag = SPRMilitary
									has_cosmetic_tag = TBA_GNS_district
									has_cosmetic_tag = CTL_GNS_district
									has_cosmetic_tag = SPS_GNS_district
								}

							}
						}
						drop_cosmetic_tag = yes
					}
					set_global_flag = skip_default_capitulation
					IBRWarsCheckPeace = yes
				}
				#Military Revolt wins in Iberia
				else_if = {
					limit = {
						FROM = {
							tag = SPA
						}
						ROOT = {
							tag = IBR
						}
					}
					SPA = {
						country_event = {
							id = IBR.818
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Iberia beat Military Revolt

				#Finland or Onega beats a Russian country
				else_if = {
					limit = {
						FROM = {
							OR = {
								tag = ONG
								tag = FIN
							}
						}
						ROOT = {
							tag = WSR
						}
					}
					ONG = {
						white_peace = ROOT
					}
					FIN = {
						white_peace = ROOT
					}
					clear_global_event_target = RUS_western_unifier
					WRS_west_russian_collapse = yes
					set_global_flag = skip_default_capitulation
				}
				#Onega beats West Siberia
				else_if = {
					limit = {
						has_global_flag = TNO_RUS_west_russia_collapse
						FROM = {
							OR = {
								tag = ONG
								tag = FIN
								is_central_russian_nation = yes
							}
						}
						ROOT = {
							tag = WSB
						}
					}
					ONG = {
						white_peace = ROOT
					}
					FIN = {
						white_peace = ROOT
					}
					every_country = {
						limit = {
							is_central_russian_nation = yes
						}
						white_peace = ROOT
					}
					clear_global_event_target = RUS_west_siberia_unifier
					WSB_ONG_west_siberia_collapse = yes
					set_global_flag = skip_default_capitulation
				}

				#AMERICA TAKES GUYANA
				else_if = {
					limit = {
						FROM = {
							is_in_faction_with = USA
						}
						ROOT = { original_tag = GUY }
					}
					USA = {
						white_peace = GUY
						set_autonomy = {
							target = GUY
							autonomy_state = autonomy_client_state
						}
						GUY = {
							set_politics = {
								ruling_party = conservative_democracy
							}
							set_popularities = {
								communist = 4
								ultranationalism = 0
								socialist = 8
								social_democracy = 15
								liberal_democracy = 15

								conservative_democracy = 40
								authoritarian_democracy = 18
								despotism = 0
								fascism = 0

							}
							remove_ideas = GUY_Liberty_of_the_Few
							remove_ideas = GUY_national_security_act
						}
						country_event = {
							id = USA.1109
							days = 1
						}
					}
					set_global_flag = show_peace_popup_alert
					USA = {
						save_global_event_target_as = winning_country
					}
					GUY = {
						save_global_event_target_as = losing_country
					}
					set_global_flag = skip_default_capitulation
				}
				#Finland
				else_if = {
					limit = {
						FROM = { is_russian_nation = yes }
						ROOT = { original_tag = FIN }
					}
					FROM = {
						white_peace = ROOT
						add_state_core = 213
						add_state_core = 1359
						transfer_state = 216
						transfer_state = 215
						transfer_state = 213
						transfer_state = 1359
					}
					set_global_flag = skip_default_capitulation
				}

				
				#Central Asian shit oh dear god.
				else_if = {
					limit = {
						FROM = { tag = KYR }
						ROOT = { tag = UZB }
					}
					FROM = {
						white_peace = ROOT
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = { tag = TRK }
						ROOT = { tag = KRK }
					}
					FROM = {
						white_peace = ROOT
					}
					UZB = {
						annex_country = {
							target = KRK
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = { tag = TAJ }
						ROOT = { tag = UZB }
					}
					FROM = {
						white_peace = ROOT
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = { tag = KRK }
						ROOT = { tag = UZB }
					}
					FROM = {
						white_peace = ROOT
					}
					UZB = {
						annex_country = {
							target = KRK
							transfer_troops = yes
						}
					}
					set_global_flag = skip_default_capitulation
				}

				#Oil Crisis stuff
				else_if = {
					limit = {
						FROM = { original_tag = UAR }
						ROOT = { original_tag = TUR }
					}
					FROM = {
						white_peace = ROOT
						transfer_state = 782
						transfer_state = 554
						transfer_state = 680
						transfer_state = 1315
						transfer_state = 677
						transfer_state = 1314
						transfer_state = 1313
						transfer_state = 1312
						transfer_state = 553
						transfer_state = 781
					}
					set_global_flag = skip_default_capitulation
				}

				#Oil Crisis stuff
				else_if = {
					limit = {
						FROM = { original_tag = ITA }
						ROOT = { original_tag = UAR }
					}
					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
						}
					}
					ITA = {
						country_event = {
							id = UAR.101
							days = 5
						}
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = {
					limit = {
						FROM = { original_tag = IME }
						ROOT = { original_tag = JOR }
					}
					FROM = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
						}
					}
					ITA = {
						puppet = IME
					}
					set_global_flag = skip_default_capitulation
				}

				#Great Asian War
				else_if = { #JAP VS CHI: China falls last
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = JAP
								has_war_together_with = JAP
							}
						}
						ROOT = { original_tag = CHI }
					}
					JAP = {
						country_event = {id = gaw.101 hours = 3}
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #Last NLF warlord falls
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = JAP
								has_war_together_with = JAP
							}
						}
						ROOT = {
							OR = {
								original_tag = MEN
								original_tag = GAN
								original_tag = QIN
								original_tag = XIN
								original_tag = ETR
								original_tag = TIB
								original_tag = XIK
								original_tag = YUN
								original_tag = GUZ
								original_tag = SIC
								original_tag = SHX
								original_tag = GUX
							}
						}
					}

					JAP = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						country_event = {id = gaw.103 hours = 3}
					}
					set_global_flag = skip_default_capitulation
				}

				else_if = { #Last rebellious warlord falls
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = CHI
								has_war_together_with = CHI
							}
						}
						ROOT = {
							OR = {
								original_tag = MEN
								original_tag = GAN
								original_tag = QIN
								original_tag = XIN
								original_tag = ETR
								original_tag = TIB
								original_tag = XIK
								original_tag = YUN
								original_tag = GUZ
								original_tag = SIC
								original_tag = SHX
								original_tag = GUX
							}
						}
					}

					CHI = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						country_event = {id = gaw.205 hours = 3}
					}
					set_global_flag = skip_default_capitulation
				}
				#1st serbian civil war
				else_if = {
					limit = {
						FROM = { original_tag = SER }
						ROOT = { original_tag = GMS }
					}
					clr_global_flag = SER_TestGarrison
					SER = {
						country_event = { id = serbia.2 days = 10 }
					}
				}
				else_if = { # Nukes
					limit = {
						NOT = { has_global_flag = nukes_disabled }
						FROM = {
							has_nuclear_arsenal = yes
						}
						ROOT = {
							has_nuclear_arsenal = yes
							NOT = { has_country_flag = TNO_nuke_disabled }
						}
					}
					ROOT = { country_event = { id = nuclearwar.6 days = 7 } }
					FROM = { country_event = { id = nuclearwar.6 days = 7 } }
					set_global_flag = skip_default_capitulation
				}
				#2nd Serbian Civil war
				else_if = {
					limit = {
						ROOT = { original_tag = SER }
						FROM = {
							original_tag = GMS
							NOT = {
								has_government = fascism
							}
						}
					}
					if = {
						limit = { GMS = { is_ai = no } }
						SER = {
							change_tag_from = GMS
						}
					}
					SER = {
						annex_country = {
							target = GMS
							transfer_troops = yes
						}
						set_popularities = {
							communist = 27
							ultranationalism = 0
							socialist = 0
							social_democracy = 12
							liberal_democracy = 8

							conservative_democracy = 8
							authoritarian_democracy = 12
							despotism = 28
							fascism = 5

						}
						if = {
							limit = { GMS = { has_government = communist } }
							set_politics = {
								ruling_party = communist
								elections_allowed = no
							}
							set_global_flag = SER_Communist
						}
						else = {
							set_politics = {
								ruling_party = despotism
								elections_allowed = no
							}
							set_global_flag = SER_TestChetniks
						}
					}
				}
				else_if = {
					limit = {
						FROM = { original_tag = SER }
						ROOT = {
							original_tag = GMS
							NOT = {
								has_government = fascism
							}
						}
					}
					if = {
						limit = {
							SER = {
								has_government = authoritarian_democracy
							}
						}
						set_global_flag = SER_TestCollabs
					}
					else_if = {
						limit = {
							SER = {
								has_government = despotism
							}
						}
						set_global_flag = SER_TestChetniks
					}
					else_if = {
						limit = {
							SER = {
								has_government = communist
							}
						}
						set_global_flag = SER_Communist
					}
				}

				### West African Crisis ###
				else_if = { # Zarmaland
					limit = {
						NOT = { has_global_flag = WAC_over }
						FROM = { original_tag = ZAR }
					}
					set_global_flag = skip_default_capitulation
					# leave empty on purpose
				}
				else_if = { # Zarmaland
					limit = {
						NOT = { has_global_flag = WAC_over }
						ROOT = { original_tag = ZAR }
					}
					set_global_flag = skip_default_capitulation
					every_country = {
						limit = { has_war_with = ZAR }
						white_peace = ZAR
					}

					SWB = {
						add_state_core = 1226
						transfer_state = 1226
					}
				}

				# Yorubaland
				else_if = {
					limit = {
						NOT = { has_global_flag = WAC_over }
						FROM = {
							OR = {
								original_tag = CAO
								is_in_faction_with = CAO
							}
						}
						ROOT = {
							original_tag = YOR
						}
					}
					CAO = {
						remove_ideas = { CAO_idea_tense_borders }
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}

				# Cameroon Collapse
				else_if = {
					limit = {
						has_global_flag = global_cameroon_has_collapsed
						FROM = {
							OR = {
								original_tag = BFR
								original_tag = CHD
								original_tag = CHF
								original_tag = KNM
								original_tag = NNG
								original_tag = NGA
								original_tag = CAO
								original_tag = HAU
								original_tag = YOR
							}
						}
						ROOT = {
							OR = {
								original_tag = BFR
								original_tag = CHD
								original_tag = CHF
								original_tag = KNM
								original_tag = NNG
								original_tag = NGA
								original_tag = CAO
								original_tag = HAU
								original_tag = YOR
							}
						}
					}

					# Saraland
					if = {
						limit = {
							FROM = {
								OR = {
									original_tag = KNM
									original_tag = CHF
									original_tag = CHD
								}
							}
							ROOT = {
								OR = {
									original_tag = KNM
									original_tag = CHF
									original_tag = CHD
								}
							}
						}
						FROM = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								FROM = { original_tag = CHF }
								NOT = { country_exists = CHD country_exists = KNM }
							}
							CHF = { set_cosmetic_tag = CHF_unified }
						}
					}

					# Nigeria
					else_if = {
						limit = {
							FROM = {
								OR = {
									original_tag = NNG
									original_tag = NGA
									original_tag = YOR
									original_tag = HAU
									original_tag = BFR
								}
							}
							ROOT = {
								OR = {
									original_tag = NNG
									original_tag = NGA
									original_tag = YOR
									original_tag = HAU
									original_tag = BFR
								}
							}
						}

						FROM = { white_peace = ROOT }

						if = { # YOR vs NNG vs NGA
							limit = {
								FROM = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
									}
								}
								ROOT = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
									}
								}
								NOT = {
									FROM = {
										OR = {
											original_tag = HAU
											original_tag = BFR
										}
									}
									ROOT = {
										OR = {
											original_tag = HAU
											original_tag = BFR
										}
									}
								}
							}
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
							if = {
								limit = {
									NOT = {
										country_exists = NGA
										country_exists = YOR
									}
									FROM = { original_tag = NNG }
								}
								NNG = { set_cosmetic_tag = NNG_unified }
							}
							else_if = {
								limit = {
									NOT = {
										country_exists = NGA
										country_exists = NNG
									}
									FROM = { original_tag = YOR }
								}
								YOR = { set_cosmetic_tag = YOR_unified }
							}
						}

						else_if = { # Biafra
							limit = {
								FROM = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = BFR
									}
								}
								ROOT = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = BFR
									}
								}
								NOT = {
									FROM = { original_tag = HAU }
									ROOT = { original_tag = HAU }
								}
							}
							if = { # Free Biafra
								limit = { FROM = { original_tag = BFR } }
								ROOT = { white_peace = BFR }
							}
							else = { # dead biafra rip
								FROM = {
									annex_country = {
										target = ROOT
										transfer_troops = no
									}
								}
							}
						}

						else_if = { # Sokoto
							limit = {
								FROM = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = HAU
									}
								}
								ROOT = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = HAU
									}
								}
								NOT = {
									FROM = { original_tag = BFR }
									ROOT = { original_tag = BFR }
								}
							}

							if = { # Sokoto kills NNG
								limit = {
									FROM = { original_tag = HAU }
									ROOT = { original_tag = NNG }
								}
								if = {
									limit = { HAU = { has_country_flag = HAU_invaded } }
									HAU = {
										add_state_core = 558
										add_state_core = 1189
										transfer_state = 1189
										transfer_state = 558
									}
								}
								else = {
									HAU = {
										add_state_core = 558
										transfer_state = 558
									}
								}
							}
							else = { # Sokoto Defeat
								if = {
									limit = { HAU = { has_country_flag = HAU_invaded } }
									every_country = {
										limit = { has_war_with = HAU }
										white_peace = HAU
									}
									NGR = {
										add_state_core = 1226
										add_state_core = 832
										add_state_core = 1219
										add_state_core = 1218
										add_state_core = 831
										add_state_core = 1542
										transfer_state = 832
										transfer_state = 1219
										transfer_state = 1218
										transfer_state = 831
										transfer_state = 1542
										transfer_state = 835
										transfer_state = 1221
										transfer_state = 1220
										transfer_state = 1226
										TNO_startup_nation = yes

										set_politics = { ruling_party = authoritarian_democracy }

										set_temp_variable = { TNO_economy_type_temp = 2 }
										set_temp_variable = { TNO_economy_subtype_temp = 10 }
										econ_type_change = yes
										econ_subtype_change = yes
									}
								}
								else = {
									every_country = {
										limit = { has_war_with = HAU }
										white_peace = HAU
									}
									FROM = {
										annex_country = {
											target = ROOT
											transfer_troops = no
										}
									}
								}
							}
						}
					}

					# Cameroon
					else_if = {
						limit = {
							NOT = { HAU = { has_country_flag = HAU_invaded } }
							FROM = { original_tag = CAO }
							ROOT = { original_tag = HAU }
						}
						every_country = {
							limit = { has_war_with = HAU }
							white_peace = HAU
						}
						CAO = {
							white_peace = HAU
							annex_country = {
								target = HAU
								transfer_troops = no
							}
						}
					}
					else_if = {
						limit = {
							HAU = { has_country_flag = HAU_invaded }
							FROM = { original_tag = CAO }
							ROOT = { original_tag = HAU }
						}
						every_country = {
							limit = { has_war_with = HAU }
							white_peace = HAU
						}
						NGR = {
							add_state_core = 1226
							add_state_core = 832
							add_state_core = 1219
							add_state_core = 1218
							add_state_core = 831
							add_state_core = 1542
							transfer_state = 832
							transfer_state = 1219
							transfer_state = 1218
							transfer_state = 831
							transfer_state = 1542
							transfer_state = 835
							transfer_state = 1221
							transfer_state = 1220
							transfer_state = 1226
							TNO_startup_nation = yes

							set_politics = { ruling_party = authoritarian_democracy }

							set_temp_variable = { TNO_economy_type_temp = 2 }
							set_temp_variable = { TNO_economy_subtype_temp = 10 }
							econ_type_change = yes
							econ_subtype_change = yes
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = BFR }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = CHD }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							if = {
								limit = { NOT = { country_exists = KNM } }
								set_country_flag = CAO_collapse_KNM_capitulated
								KNM = {
									transfer_state = 1544
									transfer_state = 1194
									transfer_state = 1195

									TNO_startup_nation = yes
								}
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHF
									country_exists = BFR
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = CHF }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							if = {
								limit = { NOT = { country_exists = KNM } }
								set_country_flag = CAO_collapse_KNM_capitulated
								KNM = {
									transfer_state = 1544
									transfer_state = 1194
									transfer_state = 1195

									TNO_startup_nation = yes
								}
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHD
									country_exists = BFR
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = KNM }
						}
						CAO = {
							set_country_flag = CAO_collapse_KNM_capitulated
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							KNM = {
								transfer_state = 1544
								transfer_state = 1194
								transfer_state = 1195

								TNO_startup_nation = yes
							}
						}
						if = {
							limit = {
								NOT = {
									country_exists = CHD
									country_exists = BFR
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = YOR }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = BFR
									country_exists = NGA
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = NNG }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }

								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = BFR
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = NGA }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }

								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = NNG
									country_exists = BFR
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					# CAO eats shit and dies (again)
					else_if = {
						limit = { ROOT = { original_tag = CAO } }
						every_country = {
							limit = { has_war_with = CAO }
							white_peace = CAO
						}
						CAO = { country_event = CAO.102 }
					}
					set_global_flag = skip_default_capitulation
				}

				# Civil Wars
				else_if = {
					limit = {
						NOT = { has_global_flag = WAC_over }
						FROM = {
							OR = {
								OR = {
									AND = {
										is_in_faction_with = KAY
										MLI = {
											exists = yes
											has_war = yes
										}
									}
									AND = {
										is_in_faction_with = MLI
										KAY = {
											exists = yes
											has_war = yes
										}
									}
								}
								OR = {
									AND = {
										OR = {
											original_tag = CAO
											original_tag = SWB
										}
										country_exists = HAU
									}
									AND = {
										original_tag = HAU
										country_exists = SWB
									}
								}
								AND = {
									has_global_flag = WAC_scenario_3
									OR = {
										AND = {
											is_in_faction_with = CPP
											country_exists = EWE
										}
										AND = {
											is_in_faction_with = EWE
											country_exists = CPP
										}
									}
								}
							}
						}
						ROOT = {
							OR = {
								OR = {
									AND = {
										is_in_faction_with = KAY
										MLI = {
											exists = yes
											has_war = yes
										}
									}
									AND = {
										is_in_faction_with = MLI
										KAY = {
											exists = yes
											has_war = yes
										}
									}
								}
								OR = {
									AND = {
										original_tag = SWB
										country_exists = HAU
									}
									AND = {
										original_tag = HAU
										country_exists = SWB
									}
								}
								AND = {
									has_global_flag = WAC_scenario_3
									OR = {
										AND = {
											original_tag = CPP
											country_exists = EWE
										}
										AND = {
											original_tag = EWE
											country_exists = CPP
										}
									}
								}
							}
						}
					}
					# Sokoto - Sawaba
					if = {
						limit = {
							FROM = {
								OR = {
									original_tag = CAO
									original_tag = SWB
									original_tag = HAU
								}
							}
							ROOT = {
								OR = {
									original_tag = SWB
									original_tag = HAU
								}
							}
						}
						if = {
							limit = {
								OR = {
									FROM = { original_tag = CAO }
									FROM = { original_tag = SWB }
								}
							}
							every_country = {
								limit = { has_war_with = HAU }
								white_peace = HAU
							}
							SWB = {
								set_cosmetic_tag = SWB_unified
								annex_country = {
									target = HAU
									transfer_troops = no
								}
							}
						}
						else = {
							# leave empty on purpose
						}
					}
					# Ghana Civil War
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = CPP
									original_tag = CPP
								}
							}
							ROOT = { original_tag = EWE }
						}
						CPP = {
							set_cosmetic_tag = CPP_unified
							white_peace = EWE
							annex_country = {
								target = EWE
								transfer_troops = no
							}
						}
					}
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = EWE
									original_tag = EWE
								}
							}
							ROOT = { original_tag = CPP }
						}
						EWE = {
							white_peace = CPP
							annex_country = {
								target = CPP
								transfer_troops = no
							}
						}
					}
					# Mali Civil War
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = KAY
									original_tag = KAY
								}
							}
							ROOT = { original_tag = MLI }
						}
						KAY = {
							set_cosmetic_tag = KAY_unified
							white_peace = MLI
							annex_country = {
								target = MLI
								transfer_troops = no
							}
						}
					}
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = MLI
									original_tag = MLI
								}
							}
							ROOT = { original_tag = KAY }
						}
						MLI = {
							white_peace = KAY
							annex_country = {
								target = KAY
								transfer_troops = no
							}
						}
					}
					set_global_flag = skip_default_capitulation
					set_global_flag = WAC_over_civil_war_peace
				}

				## FREE FRANCE IN THE WAA (SCENARIO 1)
				else_if = {
					limit = {
						has_global_flag = WAC_scenario_1
						NOT = {
							has_global_flag = WAC_over
							has_global_flag = WAC_over_civil_war_peace
						}
						OR = {
							FROM = { is_west_african_nation = yes }
							ROOT = { is_west_african_nation = yes }
						}
					}
					
					if = { # WAA VICTORY
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = FFR
									is_in_faction_with = WOL
								}
							}
							ROOT = { original_tag = CAO }
						}

						every_country = {
							limit = {
								OR = {
									has_war_with = WOL
									has_war_with = FFR
								}
							}
							leave_faction = yes
							every_country = {
								limit = {
									OR = {
										is_in_faction_with = WOL
										original_tag = WOL
									}
								}
								white_peace = PREV
							}
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_1_WAA_VICTORY = yes
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						set_global_flag = skip_default_capitulation
					}

					else_if = { # PALF VICTORY
						limit = {
							FROM = { is_in_faction_with = CAO }
							ROOT = {
								OR = {
									is_in_faction_with = FFR
									is_in_faction_with = WOL
								}
							}
						}
						if = {
							limit = { ROOT = { original_tag = FFR } }
							set_global_flag = WAC_scen1_ffr_fell
							if = {
								limit = { country_exists = GBE }
								CAO = {
									annex_country = {
										target = GBE
										transfer_troops = no
									}
								}
							}
							WOL = {
								load_oob = "FFR_exiles_1962"
							}
						}
						if = {
							limit = { ROOT = { original_tag = WOL } }
							set_global_flag = WAC_scen1_wol_fell
						}
						if = { # final victory
							limit = {
								has_global_flag = WAC_scen1_ffr_fell
								has_global_flag = WAC_scen1_wol_fell
							}
							every_country = {
								limit = { has_war_with = CAO }
								leave_faction = yes
								every_country = {
									limit = { is_in_faction_with = CAO }
									white_peace = PREV
								}
							}
							ZZZ = {
								TNO_WAC_clear_decision_categories = yes
								WAC_1_PALF_VICTORY = yes
							}
							set_global_flag = skip_default_capitulation
						}
						else = { # failsafe
							every_country = {
								limit = { is_puppet_of = ROOT }
								ROOT = {
									end_puppet = PREV
									add_to_faction = PREV
									every_country = {
										limit = { has_war_with = ROOT }
										PREV.PREV = {
											add_to_war = {
												targeted_alliance = ROOT
												enemy = PREV
											}
										}
									}
								}
							}
							ROOT = {
								leave_faction = yes
								every_country = {
									limit = { has_war_with = ROOT }
									white_peace = ROOT
								}
							}
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
							set_global_flag = skip_default_capitulation
						}
					}

					else = { # war continues
						every_country = {
							limit = { is_puppet_of = ROOT }
							ROOT = {
								end_puppet = PREV
								add_to_faction = PREV
								every_country = {
									limit = { has_war_with = ROOT }
									PREV.PREV = {
										add_to_war = {
											targeted_alliance = ROOT
											enemy = PREV
										}
									}
								}
							}
						}
						ROOT = {
							leave_faction = yes
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = CAO }
								ROOT = { original_tag = YOR }
							}
							CAO = {
								annex_country = {
									target = YOR
									transfer_troops = no
								}
							}
						}
						else = {
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}
						set_global_flag = skip_default_capitulation
					}
				}

				## BATTLE ROYALE (SCENARIO 2)
				else_if = {
					limit = {
						has_global_flag = WAC_scenario_2
						NOT = {
							has_global_flag = WAC_over
							has_global_flag = WAC_over_civil_war_peace
						}
						FROM = { is_west_african_nation = yes }
						ROOT = { is_west_african_nation = yes }
					}
					if = {
						limit = { ROOT = { original_tag = FFR } }
						set_global_flag = WAC_scen2_ffr_fell
						if = {
							limit = {
								FROM = { is_in_faction_with = WOL }
								country_exists = GBE
							}
							every_country = {
								limit = { has_war_with = GBE }
								white_peace = GBE
							}
							EWE = {
								annex_country = {
									target = GBE
									transfer_troops = no
								}
							}
						}
						else_if = {
							limit = { country_exists = GBE }
							every_country = {
								limit = { has_war_with = GBE }
								white_peace = GBE
							}
							CAO = {
								annex_country = {
									target = GBE
									transfer_troops = no
								}
							}
						}
					}
					if = {
						limit = { ROOT = { original_tag = WOL } }
						set_global_flag = WAC_scen2_wol_fell
					}
					if = {
						limit = { ROOT = { original_tag = CAO } }
						every_country = {
							limit = { has_war_with = CAO }
							white_peace = CAO
						}
						ZZZ = { WAC_2_PALF_BEATEN = yes }
						set_global_flag = skip_default_capitulation
					}
					if = { # WAA VICTORY ROYALE
						limit = {
							FROM = { is_in_faction_with = WOL }
							ROOT = {
								OR = {
									original_tag = FFR
									original_tag = CAO
								}
							}
							has_global_flag = WAC_scen2_ffr_fell
							has_global_flag = WAC_scen2_cao_fell
						}

						every_country = {
							limit = { has_war_with = WOL }
							leave_faction = yes
							white_peace = WOL
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_2_WAA_VICTORY = yes
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						set_global_flag = skip_default_capitulation
					}
					else_if = { # FRENCH VICTORY ROYALE
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = FFR
									is_puppet_of = FFR
								}
							}
							ROOT = {
								OR = {
									original_tag = WOL
									original_tag = CAO
								}
							}
							has_global_flag = WAC_scen2_wol_fell
							has_global_flag = WAC_scen2_cao_fell
						}

						every_country = {
							limit = { has_war_with = FFR }
							leave_faction = yes
							white_peace = FFR
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_2_FFR_VICTORY = yes
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						set_global_flag = skip_default_capitulation
					}
					else_if = { # PALF VICTORY ROYALE
						limit = {
							FROM = { is_in_faction_with = CAO }
							ROOT = {
								OR = {
									original_tag = FFR
									original_tag = WOL
								}
							}
							has_global_flag = WAC_scen2_ffr_fell
							has_global_flag = WAC_scen2_wol_fell
						}

						every_country = {
							limit = { has_war_with = CAO }
							leave_faction = yes
							white_peace = CAO
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_2_PALF_VICTORY = yes
						}
						set_global_flag = skip_default_capitulation
					}

					else = { # war continues
						every_country = {
							limit = { is_puppet_of = ROOT }
							ROOT = {
								end_puppet = PREV
								add_to_faction = PREV
								every_country = {
									limit = { has_war_with = ROOT }
									PREV.PREV = {
										add_to_war = {
											targeted_alliance = ROOT
											enemy = PREV
										}
									}
								}
							}
						}
						ROOT = {
							leave_faction = yes
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = CAO }
								ROOT = { original_tag = YOR }
							}
							CAO = {
								annex_country = {
									target = YOR
									transfer_troops = no
								}
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = MLI }
								ROOT = { original_tag = KAY }
							}
							MLI = {
								annex_country = {
									target = KAY
									transfer_troops = no
								}
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = KAY }
								ROOT = { original_tag = MLI }
							}
							KAY = {
								annex_country = {
									target = MLI
									transfer_troops = no
								}
							}
						}
						else = {
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}
						set_global_flag = skip_default_capitulation
					}
				}

				## CAMEROON ON THE OFFENSIVE (SCENARIO 3)
				else_if = {
					limit = {
						has_global_flag = WAC_scenario_3
						NOT = {
							has_global_flag = WAC_over
							has_global_flag = WAC_over_civil_war_peace
						}
						FROM = { is_west_african_nation = yes }
						ROOT = { is_west_african_nation = yes }
					}
					
					if = { # FMA WINS
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = FFR
									is_puppet_of = FFR
									is_in_faction_with = WOL
									is_in_faction_with = SUS
								}
							}
							ROOT = { original_tag = CAO }
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_3_FMA_VICTORY = yes
						}
						set_global_flag = skip_default_capitulation
					}
					else_if = { # PALF WINS
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = CAO
									is_puppet_of = CAO
								}
							}
							OR = {
								AND = {
									ROOT = { original_tag = FFR }
									NOT = { country_exists = WOL }
									NOT = { country_exists = SUS }
								}
								AND = {
									ROOT = { original_tag = WOL }
									NOT = { country_exists = FFR }
									NOT = { country_exists = SUS }
								}
								AND = {
									ROOT = { original_tag = SUS }
									NOT = { country_exists = FFR }
									NOT = { country_exists = WOL }
								}
							}
						}

						every_country = {
							limit = { has_war_with = CAO }
							leave_faction = yes
							every_country = {
								limit = { is_in_faction_with = CAO }
								white_peace = PREV
							}
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_3_PALF_VICTORY = yes
						}
						set_global_flag = skip_default_capitulation
					}
					else = { # war continues
						every_country = {
							limit = { is_puppet_of = ROOT }
							ROOT = {
								end_puppet = PREV
								add_to_faction = PREV
								every_country = {
									limit = { has_war_with = ROOT }
									PREV.PREV = {
										add_to_war = {
											targeted_alliance = ROOT
											enemy = PREV
										}
									}
								}
							}
						}
						ROOT = {
							leave_faction = yes
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						if = {
							limit = {
								ROOT = { original_tag = FFR }
								country_exists = WOL
							}
							WOL = {
								load_oob = "FFR_exiles_1962"
							}
						}
						if = {
							limit = {
								ROOT = { original_tag = YOR }
							}
							CAO = {
								annex_country = {
									target = YOR
									transfer_troops = no
								}								
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = MLI }
								ROOT = { original_tag = KAY }
							}
							MLI = {
								annex_country = {
									target = KAY
									transfer_troops = no
								}
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = KAY }
								ROOT = { original_tag = MLI }
							}
							KAY = {
								annex_country = {
									target = MLI
									transfer_troops = no
								}
							}
						}
						else = {
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}

						set_global_flag = skip_default_capitulation
					}
				}

				## Post-WAC ##
				else_if = { # Mano Campaign
					limit = {
						has_global_flag = mano_campaign_ongoing
						OR = {
							FROM = { is_west_african_nation = yes }
							ROOT = { is_west_african_nation = yes }
						}
					}

					# Sierra Leone
					if = {
						limit = { FROM = { original_tag = MDI } }
						set_global_flag = skip_default_capitulation
						if = {
							limit = { country_exists = LIB }
							country_event = {
								id = west_african_crisis.19
							}
						}
					}
					else_if = {
						limit = { ROOT = { original_tag = MDI } }
						set_global_flag = skip_default_capitulation
						set_global_flag = skip_default_capitulation
						ROOT = {
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						FROM = {
							annex_country = {
								target = MDI
								transfer_troops = no
							}
						}

						if = {
							limit = { has_global_flag = mano_campaign_ongoing }
							USA = { set_country_flag = manu_retreat }
							LIB = {
								remove_ideas = AFRICA_defense_debuff_1
								add_ideas = AFRICA_defense_debuff
							}
						}
					}

					# Liberia
					if = {
						limit = { FROM = { original_tag = LIB } }
						set_global_flag = skip_default_capitulation
						if = {
							limit = { country_exists = MDI }
							country_event = {
								id = west_african_crisis.19
							}
						}
					}
					else_if = {
						limit = { ROOT = { original_tag = LIB } }
						set_global_flag = skip_default_capitulation
						ROOT = {
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						FROM = {
							annex_country = {
								target = LIB
								transfer_troops = no
							}
						}

						if = {
							limit = { country_exists = MDI }
							FROM = {
								annex_country = {
									target = MDI
									transfer_troops = no
								}
							}
						}

						ZZZ = {
							TNO_Manu_clear_decision_categories = yes
							MANU_PALF_VICTORY = yes
						}
					}
				}

				else_if = { # Kayes
					limit = {
						has_global_flag = WAC_over
						FROM = { original_tag = KAY }
					}
					set_global_flag = skip_default_capitulation
					# leave empty in purpose so KAY doesn't fuck up the peace deals, they're supposed to die
				}
				else_if = { # Kayes
					limit = {
						has_global_flag = WAC_over
						ROOT = { original_tag = KAY }
					}
					set_global_flag = skip_default_capitulation
					ROOT = {
						every_country = {
							limit = { has_war_with = ROOT }
							white_peace = ROOT
						}
					}
					KAY = {
						remove_state_core = 836
						remove_state_core = 1227
						remove_state_core = 1231
						remove_state_core = 1225
						remove_state_core = 837
						remove_state_core = 1230
						remove_state_core = 1540
						remove_state_core = 1604
					}
					MLI = {
						annex_country = {
							target = KAY
							transfer_troops = no
						}
					}
				}

				else_if = { # Futa
					limit = {
						has_global_flag = WAC_over
						FROM = { original_tag = FTF }
					}
					set_global_flag = skip_default_capitulation
					# leave empty in purpose so FTF doesn't fuck up the peace deals, they're supposed to die
				}

				else_if = { # Futa
					limit = {
						has_global_flag = WAC_over
						ROOT = { original_tag = FTF }
					}
					set_global_flag = skip_default_capitulation
					ROOT = {
						every_country = {
							limit = { has_war_with = ROOT }
							white_peace = ROOT
						}
					}
					if = {
						limit = { country_exists = MLI }
						MLI = {
							add_state_core = 1216
							transfer_state = 1216
						}
					}
					else = {
						KAY = {
							add_state_core = 1216
							transfer_state = 1216
						}
					}
				}

				else_if = { # Zarmaland
					limit = {
						has_global_flag = WAC_over
						FROM = { original_tag = ZAR }
					}
					set_global_flag = skip_default_capitulation

					# leave empty in purpose so ZAR doesn't fuck up the peace deals, they're supposed to die
					if = { # leaving this comment here in case i ever need to return to it
						limit = {
							ROOT = { original_tag = HAU }
							has_global_flag = global_cameroon_has_collapsed
						}
						HAU = { white_peace = ZAR }
						NGR = {
							add_state_core = 1226
							add_state_core = 832
							add_state_core = 1542
							transfer_state = 832
							transfer_state = 1542
							transfer_state = 835
							transfer_state = 1221
							transfer_state = 1220
							transfer_state = 1226
							TNO_startup_nation = yes

							set_politics = { ruling_party = authoritarian_democracy }

							set_temp_variable = { TNO_economy_type_temp = 2 }
							set_temp_variable = { TNO_economy_subtype_temp = 10 }
							econ_type_change = yes
							econ_subtype_change = yes
						}
					}
				}

				else_if = { # Zarmaland
					limit = {
						has_global_flag = WAC_over
						ROOT = { original_tag = ZAR }
					}
					set_global_flag = skip_default_capitulation
					ROOT = {
						every_country = {
							limit = { has_war_with = ROOT }
							white_peace = ROOT
						}
					}
					if = {
						limit = {
							FROM = { original_tag = HAU }
							has_global_flag = global_cameroon_has_collapsed
						}
						HAU = {
							annex_country = {
								target = ZAR
								transfer_troops = no
							}
							if = {
								limit = {
									OR = {
										country_exists = NNG
										country_exists = NGA
										country_exists = YOR
									}
								}
								HAU = {
									declare_war_on = { target = NNG type = annex_everything }
									declare_war_on = { target = NGA type = annex_everything }
									declare_war_on = { target = YOR type = annex_everything }
								}
							}
							else_if = {
								limit = { NOT = { has_global_flag = global_cameroon_survived_collapse } }
								HAU = { declare_war_on = { target = CAO type = annex_everything } }
							}
						}
					}
					if = {
						limit = { country_exists = NGR }
						NGR = {
							add_state_core = 1226
							transfer_state = 1226
						}
					}
					if = {
						limit = { country_exists = SWB }
						SWB = {
							add_state_core = 1226
							transfer_state = 1226
						}
					}
					if = {
						limit = { has_global_flag = WAC_SCENARIO_3_FMA_VICTORY }
						NGR = {
							add_state_core = 1226
							add_state_core = 831
							add_state_core = 1218
							add_state_core = 1219
							transfer_state = 1226
							transfer_state = 831
							transfer_state = 1218
							transfer_state = 1219
							TNO_startup_nation = yes

							FFR = {
								puppet = NGR
								add_to_faction = NGR
								country_event = { # invasion of sokoto
									id = west_african_crisis.110
									days = 30
								}
							}
							set_cosmetic_tag = NGR_FFRPuppet
							set_politics = { ruling_party = authoritarian_democracy }
							set_popularities = {
								socialist = 20
								social_democracy = 0
								liberal_democracy = 0
								conservative_democracy = 20
								authoritarian_democracy = 40
								despotism = 20
							}

							set_country_flag = FRU_MEMBER
							hidden_effect = {
								remove_faction_status = yes
								add_ideas = FRU_Associated
							}
							set_temp_variable = { TNO_economy_type_temp = 2 }
							set_temp_variable = { TNO_economy_subtype_temp = 10 }
							econ_type_change = yes
							econ_subtype_change = yes
						}
					}
					if = {
						limit = { has_global_flag = WAC_SCENARIO_3_PALF_VICTORY }
						#if = {
						#	limit = { NOT = { country_exists = BKF } }
						#	transfer_state = 834
						#	transfer_state = 1217
						#	transfer_state = 1541
						#	TNO_startup_nation = yes
						#
						#	CAO = { puppet = BKF }
						#	set_politics = { ruling_party = socialist }
						#	set_popularities = {
						#		socialist = 40
						#		conservative_democracy = 20
						#		authoritarian_democracy = 20
						#		despotism = 20
						#	}
						#
						#	CAO = { add_to_faction = BKF }
						#	set_country_flag = PALF_MEMBER
						#	hidden_effect = {
						#		remove_faction_status = yes
						#		add_ideas = PALF_Satellite
						#	}
						#	set_temp_variable = { TNO_economy_type_temp = 3 }
						#	econ_type_change = yes
						#}

						SWB = {
							add_state_core = 1226
							add_state_core = 831
							add_state_core = 1218
							add_state_core = 1219
							transfer_state = 1226
							transfer_state = 831
							transfer_state = 1218
							transfer_state = 1219
							TNO_startup_nation = yes

							CAO = {
								puppet = SWB
								add_to_faction = SWB
								country_event = { # invasion of sokoto
									id = west_african_crisis.110
									days = 30
								}
							}

							set_politics = {
								ruling_party = socialist
								last_election = "1966.6.23"
								election_frequency = 48
								elections_allowed = no
							}
							set_popularities = {
								communist = 10
								ultranationalism = 0
								socialist = 35
								social_democracy = 5
								liberal_democracy = 0

								authoritarian_democracy = 10
								despotism = 30
								fascism = 10

							}
							set_country_flag = PALF_MEMBER
							hidden_effect = {
								remove_faction_status = yes
								add_ideas = PALF_Satellite_peace
							}
							set_temp_variable = { TNO_economy_type_temp = 3 }
							econ_type_change = yes

							set_cosmetic_tag = SWB_unified
							econ_join_sphere_CAO = yes
						}

						CAO = {
							country_event = { # invasion of sokoto
								id = west_african_crisis.110
								days = 90
							}
						}
					}
				}

				else_if = { # Sokoto
					limit = {
						has_global_flag = WAC_over
						FROM = { original_tag = HAU }
						NOT = { has_global_flag = global_cameroon_has_collapsed }
					}
					set_global_flag = skip_default_capitulation
					HAU = {
						every_country = {
							limit = { has_war_with = HAU }
							white_peace = HAU
						}
						transfer_state = 832
						transfer_state = 1542
						transfer_state = 831
						transfer_state = 1218
						transfer_state = 1219
						if = {
							limit = { NOT = { country_exists = ZAR } }
							transfer_state = 1226
						}
					}
				}

				else_if = { # Sokoto
					limit = {
						has_global_flag = WAC_over
						ROOT = { original_tag = HAU }
						NOT = { has_global_flag = global_cameroon_has_collapsed }
					}
					set_global_flag = skip_default_capitulation
					ROOT = {
						every_country = {
							limit = { has_war_with = ROOT }
							white_peace = ROOT
						}
					}

					if = {
						limit = { has_global_flag = WAC_SCENARIO_3_FMA_VICTORY }
						NGR = {
							add_state_core = 832
							add_state_core = 1542
							transfer_state = 832
							transfer_state = 1542
							transfer_state = 1220
							transfer_state = 1221
							transfer_state = 835
						}
					}
					else_if = {
						limit = { has_global_flag = WAC_SCENARIO_3_PALF_VICTORY }
						SWB = {
							add_state_core = 832
							add_state_core = 1542
							transfer_state = 832
							transfer_state = 1542
							transfer_state = 1220
							transfer_state = 1221
							transfer_state = 835
						}
					}

					else_if = {
						limit = { country_exists = SWB }
						SWB = {
							transfer_state = 835
							transfer_state = 1221
							transfer_state = 1220
						}
					}
					else_if = {
						limit = { country_exists = NGR }
						NGR = {
							transfer_state = 835
							transfer_state = 1221
							transfer_state = 1220
						}
					}
				}

				#DEFAULT CAPITULATION
				if = {
					limit = { NOT = { has_global_flag = skip_default_capitulation } }
					#Annex every country they've been fighting against
					log = "Default Capitulation"
					FROM = {
						every_enemy_country = {
							limit = {
								OR = {
									original_tag = ROOT
									is_in_faction_with = ROOT
									is_puppet_of = ROOT
								}
							}
							FROM = {
								white_peace = PREV
								annex_country = {
									target = PREV
									transfer_troops = no
								}
							}
						}
					}
				}
			}
			else = {
				log = "war_goes_on"

				###Ostland Civil War
				if = {
					limit = {
						FROM = {
							OR = {
								original_tag = OST
								original_tag = MST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
								original_tag = GER
							}
						}
						ROOT = {
							OR = {
								original_tag = OST
								original_tag = MST
								original_tag = DST
								original_tag = JST
								original_tag = UPO
								original_tag = BLR
							}
						}
					}

					OST_off_a_fucker = yes
					OST_check_victor = yes
					if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = GER
									original_tag = GER
								}
							}
							has_global_flag = german_civil_war_goeringvic
						}
						if = {
							limit = { GER = { is_in_faction_with = DST } }
							DST = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}
						else = {
							OST = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}
					}
					else = {
						FROM = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								check_variable = { global.OST_contenders^num = 2 }
								country_exists = BLR
								country_exists = UPO
							}
							UPO = {
								country_event = { id = OST.49 days = 3 }
							}
						}
					}
					set_global_flag = skip_default_capitulation
				}
				#Western Insurrection
				else_if = { #China-aligned warlord falls
					limit = {
						has_global_flag = CHI_Western_Insurrection_Crisis
						FROM = {
							is_in_faction_with = YUN
						}

						ROOT = {
							NOT = { original_tag = CHI }
							is_in_faction_with = CHI
						}
					}
					set_global_flag = YUN_WI_thx_paradox

					YUN = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					clr_global_flag = YUN_WI_thx_paradox
					set_global_flag = skip_default_capitulation
				}
				else_if = { #China falls before China-aligned warlords
					limit = {
						has_global_flag = CHI_Western_Insurrection_Crisis
						NOT = { has_global_flag = JAP_Western_Insurrection_Intervention }
						FROM = {
							is_in_faction_with = YUN
						}

						ROOT = {
							original_tag = CHI
						}
					}
					set_global_flag = YUN_WI_thx_paradox

					every_state = {
						limit = { is_core_of = NCC }
						NCC = { transfer_state = PREV }
					}
					NCC = {
						econ_join_sphere_JAP = yes
					}

					YUN = {
						white_peace = CHI
						annex_country = {
							target = CHI
							transfer_troops = no
						}
					}

					JAP = {
						add_to_faction = NCC
					}

					clr_global_flag = YUN_WI_thx_paradox
					set_global_flag = skip_default_capitulation
				}
				else_if = {#NPA defeats China after Jaabn intervenes
					limit = {
						NOT = { has_global_flag = CHI_Western_Insurection_RoC_defeated }
						has_global_flag = JAP_Western_Insurrection_Intervention
						FROM = {
							OR = {
								original_tag = YUN
								has_idea = NLF_Member
							}
						}
						ROOT = {
							original_tag = CHI
						}
					}
					set_global_flag = YUN_WI_thx_paradox
					every_state = {
						limit = { is_core_of = NCC }
						NCC = { transfer_state = PREV }
					}
					ROOT = {
						every_unit_leader = {
							set_nationality = NCC
						}
					}
					NCC = {
						load_oob = "NCC_GAW"
						econ_join_sphere_JAP = yes
					}
					every_other_country = {
						limit = { is_in_faction_with = YUN }
						NCC = { set_embargo_PREV = yes }
						NCC = { PREV = { set_embargo_PREV = yes } }
					}

					YUN = {
						country_event = {id = yun_wi.30}
						white_peace = CHI
						annex_country = {
							target = CHI
							transfer_troops = no
						}
						YUN_testing = yes
					}

					JAP = {
						add_to_faction = NCC
						country_event = { id = japchiinteraction.3 days = 8 }
					}
					set_global_flag = CHI_Western_Insurection_RoC_defeated
					clr_global_flag = YUN_WI_thx_paradox
					set_global_flag = skip_default_capitulation
				}
				else_if = { #Yunnan is defeated before all Yunnan-allied warlords
					limit = {
						FROM = {
							OR = {
								is_in_faction_with = CHI
								is_in_faction_with = JAP
							}
						}
						ROOT = {
							original_tag = YUN
						}
						OR = {
							has_global_flag = CHI_Western_Insurrection_Crisis
							has_global_flag = YUN_NPA_GAW_Crisis
						}
					}
					if = {
						limit = {
							has_global_flag = YUN_NPA_GAW_Crisis
						}
						FROM = { white_peace = ROOT }
						ROOT = {
							YUN_NPA_fails_effects = yes
							every_owned_state = {
								limit = { 
									NOT = { state = 325 } 
									NOT = { state = 960 }
									NOT = { state = 603 }
								}
								JAP = { transfer_state = PREV }
							}
							set_cosmetic_tag = YUN_JAP
							YUN_he_yingqin = {
								add_country_leader_role = {
									country_leader = {
										desc = "POLITICS_HE_YINGQIN_JAP_DESC"
										ideology = despotism_warlordism_subtype
										traits = {  }
										expire = "1999.1.1.1"
										id = -1
									}
								}
								promote_character = despotism_warlordism_subtype
							}
							set_popularities = {
								communist = 0
								ultranationalism = 0
								socialist = 0
								social_democracy = 0
								liberal_democracy = 0
								conservative_democracy = 0
								authoritarian_democracy = 30
								despotism = 70
								fascism = 0
								national_socialism = 0
							}
							set_politics = {
								ruling_party = despotism
								last_election = "1960.11.11"
								election_frequency = 36
								elections_allowed = no
							}
							set_party_name = {
								ideology = despotism
								long_name = YUN_JAP_despotism_party_long
								name = YUN_JAP_despotism_party
							}
							add_ideas = Sphere_Economic_Dependent
							econ_join_sphere_JAP = yes
							TNO_startup_nation = yes
							if = {
								limit = { check_variable = { YUN_WI_sun = 1 } }
								country_event = { id = yun_zhengtong.38 days = 2 }
							}
							if = {
								limit = { check_variable = { YUN_WI_cck = 1 } }
								country_event = { id = yun_zhengtong.45 days = 3 }
							}
							if = {
								limit = {
									check_variable = { YUN_WI_cck = 1 }
									check_variable = { YUN_WI_cwk = 1 }
								}
								country_event = { id = yun_zhengtong.52 days = 4 }
							}
							if = {
								limit = { check_variable = { YUN_WI_song = 1 } }
								country_event = { id = yun_zhengtong.17 days = 5 }
							}
							if = {
								limit = { check_variable = { YUN_WI_liu = 1 } }
								country_event = { id = yun_zhengtong.24 days = 6 }
							}
						}
					}
					else = {
						YUN = {
							YUN_NPA_fails_effects = yes
							set_party_name = {
								ideology = despotism
								name = YUN_despotism_XRA_party
								long_name = YUN_despotism_XRA_party_long
							}
							YUN_zhou_longxiang = {
								add_country_leader_role = {
									country_leader = {
										desc = "POLITICS_ZHOU_LONGXIANG_DESC"
										ideology = despotism_interim_government_subtype
										traits = {  }
										expire = "1999.1.1.1"
										id = -1
									}
									promote_leader = yes
								}
							}
							set_politics = {
								ruling_party = despotism
								last_election = "1933.3.5"
								election_frequency = 48
								elections_allowed = no
							}
							set_popularities = {
								social_democracy = 0
								liberal_democracy = 0
								despotism = 54
								conservative_democracy = 4
								authoritarian_democracy = 38
								fascism = 0
								national_socialism = 0
								ultranationalism = 4
							}
							add_ideas = Sphere_Economic_Dependent
							set_cosmetic_tag = YUN_southwest_united_reconstruction
							CHI_save_pre_puppet_politics = yes
							CHI = {
								set_autonomy = {
									target = PREV
									autonomy_state = autonomy_satellite
								}
							}
							CHI_apply_pre_puppet_politics = yes
							clr_country_flag = YUN_long_yun_crusade
							if = {
								limit = { has_global_flag = WI_NPA_takes_Sichuan }
								country_event = { id = yun_zhengtong.15 days = 3 }
								country_event = { id = yun_zhengtong.22 days = 7 }
							}
							if = {
								limit = { has_global_flag = GUX_joins_NPA }
								country_event = { id = yun_zhengtong.36 days = 4 }
							}
							country_event = { id = yun_zhengtong.29 days = 2 }
							country_event = { id = yun_zhengtong.43 days = 3 }
							country_event = { id = yun_zhengtong.50 days = 5 }
						}
					}

					set_global_flag = skip_default_capitulation
				}
				else_if = { #Yunnan-aligned warlord falls
					limit = {
						FROM = {
							OR = {
								is_in_faction_with = CHI
								is_in_faction_with = JAP
							}
						}
						ROOT = {
							has_idea = NLF_Member
						}
						OR = {
							has_global_flag = CHI_Western_Insurrection_Crisis
							has_global_flag = YUN_NPA_GAW_Crisis
						}
					}
					if = {
						limit = {
							has_global_flag = YUN_NPA_GAW_Crisis
						}
						JAP = {
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = { YUN = { has_country_flag = YUN_long_yun_crusade } }
							ROOT = {
								every_unit_leader = {
									set_nationality = YUN
								}
							}
						}
						YUN = {
							set_temp_variable = { YUN_WI_temp_warbuff = -30 }
							YUN_WI_morale_change = yes
							set_temp_variable = { YUN_temp_legitimacy = -30 }
							YUN_WI_legitimacy_change = yes
						}
					}
					else = {
						CHI = {
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
					}

					set_global_flag = skip_default_capitulation
				}
				else_if = {#Other Chinese states are capitulated by Long Yun
					limit = {
						FROM = {
							OR = {
								original_tag = YUN
								has_idea = NLF_Member
							}
						}

						ROOT = {
							OR = {
								original_tag = MAN
								original_tag = MEN
								original_tag = GNG
								original_tag = GAN
								original_tag = GUX
								original_tag = SHX
								original_tag = XIK
								original_tag = QIN
								original_tag = TIB
								original_tag = XIN
								original_tag = NCC
							}
						}
					}
					set_global_flag = YUN_WI_thx_paradox

					YUN = {
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						#if = {
						#	limit = {
						#		ROOT = { original_tag = GUX }
						#	}
						#	country_event = { id = yun.134 }
						#}
						#else_if = {
						#	limit = {
						#		ROOT = { original_tag = SHX }
						#	}
						#	country_event = { id = yun.136 }
						#}
						if = {
							limit = {
								ROOT = { original_tag = NCC }
							}
							country_event = { id = yun_wi.36 }
						}
						else_if = {
							limit = {
								ROOT = { original_tag = MAN }
							}
							country_event = { id = yun_wi.37 }
						}
						else_if = {
							limit = {
								ROOT = { original_tag = TIB }
							}
							country_event = { id = yun_wi.38 }
						}
						else_if = {
							limit = {
								ROOT = { original_tag = GNG }
							}
							326 = { set_state_name = STATE_326_chi }

							set_province_name = {
								id = 10062
								name = VICTORY_POINTS_10062_chi
							}
							593 = { set_state_name = STATE_593_chi }

							set_province_name = {
								id = 7067
								name = VICTORY_POINTS_7067_chi
							}
							set_province_name = {
								id = 7108
								name = VICTORY_POINTS_7108_chi
							}
							set_province_name = {
								id = 9938
								name = VICTORY_POINTS_9938_chi
							}
							592 = { set_state_name = STATE_592_chi }

							set_province_name = {
								id = 1047
								name = VICTORY_POINTS_1047_chi
							}
							729 = { set_state_name = STATE_729_chi }
							
							1017 = { set_state_name = STATE_1017_chi }

							set_province_name = {
								id = 7152
								name = VICTORY_POINTS_7152_chi
							}
							set_province_name = {
								id = 9963
								name = VICTORY_POINTS_9963_chi
							}
							set_province_name = {
								id = 4189
								name = VICTORY_POINTS_4189_chi
							}
							1438 = { set_state_name = STATE_1438_chi }

							set_province_name = {
								id = 4092
								name = VICTORY_POINTS_4092_chi
							}
							1439 = { set_state_name = STATE_1439_chi }

							set_province_name = {
								id = 1120
								name = VICTORY_POINTS_1120_chi
							}
							set_province_name = {
								id = 1202
								name = VICTORY_POINTS_1202_chi
							}
							country_event = { id = yun_wi.39 }
						}
						#else_if = {
						#	limit = {
						#		ROOT = { original_tag = GAN }
						#	}
						#	country_event = { id = yun.138 }
						#}
						else_if = {
							limit = {
								ROOT = { original_tag = MEN }
							}
							country_event = { id = yun.139 }
						}
					}
					if = {
						limit = {
							ROOT = {
								OR = {
									original_tag = NCC
									original_tag = GAN
									original_tag = MEN
									original_tag = GNG
									original_tag = MAN 
								}
							}
						}
						YUN = {
							add_to_variable = { npagawprogress = 1 }
						}
						if = {
							limit = {
								check_variable = { YUN.npagawprogress = 5 }
							}
							JAP = {
								country_event = { id = japchiinteraction.12 }
								527 = { set_demilitarized_zone = no }
								1024 = { set_demilitarized_zone = no }
							}
						}
						else_if = {
							limit = {
								check_variable = { YUN.npagawprogress < 5 }
								NOT = { country_exists = GAN }
								NOT = { country_exists = NCC }
							}
							JAP = {
								country_event = { id = japchiinteraction.11 }
							}
						}
						if = {
							limit = {
								check_variable = { YUN.npagawprogress = 2 }
							}
							every_country = {
								limit = { 
									has_idea = YUN_SEA_NOT_YOUR_BUSINESS_STOP
									is_in_faction_with = JAP 
								}
								remove_ideas = YUN_SEA_NOT_YOUR_BUSINESS_STOP
								add_to_war = {
									targeted_alliance = JAP
									enemy = YUN
								}
							}
							VIN = {
								load_oob = "VIN_GAW"
								remove_ideas = VIN_japanese_army
							}
						}
					}
					clr_global_flag = YUN_WI_thx_paradox
					set_global_flag = skip_default_capitulation
				}
				else_if = { #Japanese-aligned warlord falls
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = CHI
								has_war_together_with = CHI
							}
						}
						ROOT = {
							OR = {
								original_tag = GAN
								original_tag = QIN
								original_tag = XIN
								original_tag = ETR
								original_tag = TIB
								original_tag = XIK
								original_tag = YUN
								original_tag = GUZ
								original_tag = SIC
								original_tag = SHX
								original_tag = GUX
							}
						}
					}

					CHI = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {#Manchukuo falls
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = CHI
								has_war_together_with = CHI
							}
						}
						ROOT = {
							original_tag = MAN
						}
					}

					every_country = {
						limit = {
							OR = {
								original_tag = CHI
								original_tag = JAP
								has_country_flag = GAW_chi_ally
								has_country_flag = GAW_jap_ally
								has_country_flag = GAW_neutral
							}
						}
						country_event = {id = gaw.300}
					}
					CHI = {
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {#GNG falls
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = CHI
								has_war_together_with = CHI
							}
						}
						ROOT = {
							original_tag = GNG
						}
					}
					CHI = {
						annex_country = {
							target = GNG
							transfer_troops = no
						}
					}
					every_country = {
						limit = {
							OR = {
								original_tag = CHI
								original_tag = JAP
								has_country_flag = GAW_chi_ally
								has_country_flag = GAW_jap_ally
								has_country_flag = GAW_neutral
							}
						}
						country_event = {id = gaw.301}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {#MEN
					limit = {
						has_global_flag = GAW_in_progress
						FROM = {
							OR = {
								original_tag = CHI
								has_war_together_with = CHI
							}
						}
						ROOT = {
							original_tag = MEN
						}
					}
					CHI = {
						annex_country = {
							target = MEN
							transfer_troops = no
						}
					}
					every_country = {
						limit = {
							OR = {
								original_tag = CHI
								original_tag = JAP
								has_country_flag = GAW_chi_ally
								has_country_flag = GAW_jap_ally
								has_country_flag = GAW_neutral
							}
						}
						country_event = {id = gaw.302}
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						FROM = {
							OR = {
								original_tag = USA
								is_in_faction_with = USA
							}
						}
						ROOT = { original_tag = ENG }
						has_global_flag = FEN_GF_WonEcw
					}
					USA = {
						white_peace = ENG
						country_event = { id = fenauthsoc.26 } #No event with this ID exists? Investigate post-release -Lavo
					}
					every_country = {
						limit = {
							is_in_faction_with = USA
						}
						white_peace = ENG
					}
					set_global_flag = skip_default_capitulation
				}
				else_if = {
					limit = {
						has_global_flag = anti_heydrich_pact_formed
						FROM = {
							OR = {
								original_tag = HGR
								# speidel bruh
								original_tag = GER
								original_tag = RNW
							}
						}
						ROOT = {
							OR = {
								original_tag = GGR
								original_tag = BGR
								original_tag = SGR
							}
						}
					}
					ROOT = {
						GER_GCW_off_a_fucker = yes
					}
					FROM = {
						white_peace = ROOT
						#message = gcw_capitulation_msg

						annex_country = {
							target = ROOT
							transfer_troops = no
						}
						#GER_GCW_check_victor = yes
					}
					set_global_flag = skip_default_capitulation
				}

				### West African Crisis ###
				# Yorubaland
				else_if = {
					limit = {
						NOT = { has_global_flag = WAC_over }
						FROM = {
							OR = {
								original_tag = CAO
								is_in_faction_with = CAO
							}
						}
						ROOT = {
							original_tag = YOR
						}
					}
					CAO = {
						remove_ideas = { CAO_idea_tense_borders }
						white_peace = ROOT
						annex_country = {
							target = ROOT
							transfer_troops = no
						}
					}
					set_global_flag = skip_default_capitulation
				}

				# Cameroon Collapse
				else_if = {
					limit = {
						has_global_flag = global_cameroon_has_collapsed
						FROM = {
							OR = {
								original_tag = BFR
								original_tag = CHD
								original_tag = CHF
								original_tag = KNM
								original_tag = NNG
								original_tag = NGA
								original_tag = CAO
								original_tag = HAU
								original_tag = YOR
							}
						}
						ROOT = {
							OR = {
								original_tag = BFR
								original_tag = CHD
								original_tag = CHF
								original_tag = KNM
								original_tag = NNG
								original_tag = NGA
								original_tag = CAO
								original_tag = HAU
								original_tag = YOR
							}
						}
					}

					# Saraland
					if = {
						limit = {
							FROM = {
								OR = {
									original_tag = KNM
									original_tag = CHF
									original_tag = CHD
								}
							}
							ROOT = {
								OR = {
									original_tag = KNM
									original_tag = CHF
									original_tag = CHD
								}
							}
						}
						FROM = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								FROM = { original_tag = CHF }
								NOT = { country_exists = CHD country_exists = KNM }
							}
							CHF = { set_cosmetic_tag = CHF_unified }
						}
					}

					# Nigeria
					else_if = {
						limit = {
							FROM = {
								OR = {
									original_tag = NNG
									original_tag = NGA
									original_tag = YOR
									original_tag = HAU
									original_tag = BFR
								}
							}
							ROOT = {
								OR = {
									original_tag = NNG
									original_tag = NGA
									original_tag = YOR
									original_tag = HAU
									original_tag = BFR
								}
							}
						}

						FROM = { white_peace = ROOT }

						if = { # YOR vs NNG vs NGA
							limit = {
								FROM = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
									}
								}
								ROOT = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
									}
								}
								NOT = {
									FROM = {
										OR = {
											original_tag = HAU
											original_tag = BFR
										}
									}
									ROOT = {
										OR = {
											original_tag = HAU
											original_tag = BFR
										}
									}
								}
							}
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
							if = {
								limit = {
									NOT = {
										country_exists = NGA
										country_exists = YOR
									}
									FROM = { original_tag = NNG }
								}
								NNG = { set_cosmetic_tag = NNG_unified }
							}
							else_if = {
								limit = {
									NOT = {
										country_exists = NGA
										country_exists = NNG
									}
									FROM = { original_tag = YOR }
								}
								YOR = { set_cosmetic_tag = YOR_unified }
							}
						}

						else_if = { # Biafra
							limit = {
								FROM = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = BFR
									}
								}
								ROOT = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = BFR
									}
								}
								NOT = {
									FROM = { original_tag = HAU }
									ROOT = { original_tag = HAU }
								}
							}
							if = { # Free Biafra
								limit = { FROM = { original_tag = BFR } }
								ROOT = { white_peace = BFR }
							}
							else = { # dead biafra rip
								FROM = {
									annex_country = {
										target = ROOT
										transfer_troops = no
									}
								}
							}
						}

						else_if = { # Sokoto
							limit = {
								FROM = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = HAU
									}
								}
								ROOT = {
									OR = {
										original_tag = NNG
										original_tag = NGA
										original_tag = YOR
										original_tag = HAU
									}
								}
								NOT = {
									FROM = { original_tag = BFR }
									ROOT = { original_tag = BFR }
								}
							}

							if = { # Sokoto kills NNG
								limit = {
									FROM = { original_tag = HAU }
									ROOT = { original_tag = NNG }
								}
								if = {
									limit = { HAU = { has_country_flag = HAU_invaded } }
									HAU = {
										add_state_core = 558
										add_state_core = 1189
										transfer_state = 1189
										transfer_state = 558
									}
								}
								else = {
									HAU = {
										add_state_core = 558
										transfer_state = 558
									}
								}
							}
							else = { # Sokoto Defeat
								if = {
									limit = { HAU = { has_country_flag = HAU_invaded } }
									every_country = {
										limit = { has_war_with = HAU }
										white_peace = HAU
									}
									NGR = {
										add_state_core = 1226
										add_state_core = 832
										add_state_core = 1219
										add_state_core = 1218
										add_state_core = 831
										add_state_core = 1542
										transfer_state = 832
										transfer_state = 1219
										transfer_state = 1218
										transfer_state = 831
										transfer_state = 1542
										transfer_state = 835
										transfer_state = 1221
										transfer_state = 1220
										transfer_state = 1226
										TNO_startup_nation = yes

										set_politics = { ruling_party = authoritarian_democracy }

										set_temp_variable = { TNO_economy_type_temp = 2 }
										set_temp_variable = { TNO_economy_subtype_temp = 10 }
										econ_type_change = yes
										econ_subtype_change = yes
									}
								}
								else = {
									every_country = {
										limit = { has_war_with = HAU }
										white_peace = HAU
									}
									FROM = {
										annex_country = {
											target = ROOT
											transfer_troops = no
										}
									}
								}
							}
						}
					}

					# Cameroon
					else_if = {
						limit = {
							NOT = { HAU = { has_country_flag = HAU_invaded } }
							FROM = { original_tag = CAO }
							ROOT = { original_tag = HAU }
						}
						every_country = {
							limit = { has_war_with = HAU }
							white_peace = HAU
						}
						CAO = {
							white_peace = HAU
							annex_country = {
								target = HAU
								transfer_troops = no
							}
						}
					}
					else_if = {
						limit = {
							HAU = { has_country_flag = HAU_invaded }
							FROM = { original_tag = CAO }
							ROOT = { original_tag = HAU }
						}
						every_country = {
							limit = { has_war_with = HAU }
							white_peace = HAU
						}
						NGR = {
							add_state_core = 1226
							add_state_core = 832
							add_state_core = 1219
							add_state_core = 1218
							add_state_core = 831
							add_state_core = 1542
							transfer_state = 832
							transfer_state = 1219
							transfer_state = 1218
							transfer_state = 831
							transfer_state = 1542
							transfer_state = 835
							transfer_state = 1221
							transfer_state = 1220
							transfer_state = 1226
							TNO_startup_nation = yes

							set_politics = { ruling_party = authoritarian_democracy }

							set_temp_variable = { TNO_economy_type_temp = 2 }
							set_temp_variable = { TNO_economy_subtype_temp = 10 }
							econ_type_change = yes
							econ_subtype_change = yes
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = BFR }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = CHD }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							if = {
								limit = { NOT = { country_exists = KNM } }
								set_country_flag = CAO_collapse_KNM_capitulated
								KNM = {
									transfer_state = 1544
									transfer_state = 1194
									transfer_state = 1195

									TNO_startup_nation = yes
								}
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHF
									country_exists = BFR
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = CHF }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							if = {
								limit = { NOT = { country_exists = KNM } }
								set_country_flag = CAO_collapse_KNM_capitulated
								KNM = {
									transfer_state = 1544
									transfer_state = 1194
									transfer_state = 1195

									TNO_startup_nation = yes
								}
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHD
									country_exists = BFR
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = KNM }
						}
						CAO = {
							set_country_flag = CAO_collapse_KNM_capitulated
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
							KNM = {
								transfer_state = 1544
								transfer_state = 1194
								transfer_state = 1195

								TNO_startup_nation = yes
							}
						}
						if = {
							limit = {
								NOT = {
									country_exists = CHD
									country_exists = BFR
									country_exists = NNG
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = YOR }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }
								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = BFR
									country_exists = NGA
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = NNG }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }

								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = BFR
									country_exists = NGA
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					else_if = {
						limit = {
							FROM = { original_tag = CAO }
							ROOT = { original_tag = NGA }
						}
						CAO = {
							white_peace = ROOT
							annex_country = {
								target = ROOT
								transfer_troops = no
							}
						}
						if = {
							limit = {
								CAO = { has_country_flag = CAO_collapse_KNM_capitulated }

								NOT = {
									country_exists = CHD
									country_exists = CHF
									country_exists = NNG
									country_exists = BFR
									country_exists = YOR
								}
							}
							CAO = { country_event = CAO.101 }
						}
					}
					# CAO eats shit and dies (again)
					else_if = {
						limit = { ROOT = { original_tag = CAO } }
						every_country = {
							limit = { has_war_with = CAO }
							white_peace = CAO
						}
						CAO = { country_event = CAO.102 }
					}
					set_global_flag = skip_default_capitulation
				}

				# Civil Wars
				else_if = {
					limit = {
						NOT = { has_global_flag = WAC_over }
						FROM = {
							OR = {
								OR = {
									AND = {
										is_in_faction_with = KAY
										MLI = {
											exists = yes
											has_war = yes
										}
									}
									AND = {
										is_in_faction_with = MLI
										KAY = {
											exists = yes
											has_war = yes
										}
									}
								}
								OR = {
									AND = {
										OR = {
											original_tag = CAO
											original_tag = SWB
										}
										country_exists = HAU
									}
									AND = {
										original_tag = HAU
										country_exists = SWB
									}
								}
								AND = {
									has_global_flag = WAC_scenario_3
									OR = {
										AND = {
											is_in_faction_with = CPP
											country_exists = EWE
										}
										AND = {
											is_in_faction_with = EWE
											country_exists = CPP
										}
									}
								}
							}
						}
						ROOT = {
							OR = {
								OR = {
									AND = {
										is_in_faction_with = KAY
										MLI = {
											exists = yes
											has_war = yes
										}
									}
									AND = {
										is_in_faction_with = MLI
										KAY = {
											exists = yes
											has_war = yes
										}
									}
								}
								OR = {
									AND = {
										original_tag = SWB
										country_exists = HAU
									}
									AND = {
										original_tag = HAU
										country_exists = SWB
									}
								}
								AND = {
									has_global_flag = WAC_scenario_3
									OR = {
										AND = {
											original_tag = CPP
											country_exists = EWE
										}
										AND = {
											original_tag = EWE
											country_exists = CPP
										}
									}
								}
							}
						}
					}
					# Sokoto - Sawaba
					if = {
						limit = {
							FROM = {
								OR = {
									original_tag = CAO
									original_tag = SWB
									original_tag = HAU
								}
							}
							ROOT = {
								OR = {
									original_tag = SWB
									original_tag = HAU
								}
							}
						}
						if = {
							limit = {
								OR = {
									FROM = { original_tag = CAO }
									FROM = { original_tag = SWB }
								}
							}
							every_country = {
								limit = { has_war_with = HAU }
								white_peace = HAU
							}
							SWB = {
								set_cosmetic_tag = SWB_unified
								annex_country = {
									target = HAU
									transfer_troops = no
								}
							}
						}
						else = {
							# leave empty on purpose
						}
					}
					# Ghana Civil War
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = CPP
									original_tag = CPP
								}
							}
							ROOT = { original_tag = EWE }
						}
						CPP = {
							set_cosmetic_tag = CPP_unified
							white_peace = EWE
							annex_country = {
								target = EWE
								transfer_troops = no
							}
						}
					}
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = EWE
									original_tag = EWE
								}
							}
							ROOT = { original_tag = CPP }
						}
						EWE = {
							white_peace = CPP
							annex_country = {
								target = CPP
								transfer_troops = no
							}
						}
					}
					# Mali Civil War
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = KAY
									original_tag = KAY
								}
							}
							ROOT = { original_tag = MLI }
						}
						KAY = {
							set_cosmetic_tag = KAY_unified
							white_peace = MLI
							annex_country = {
								target = MLI
								transfer_troops = no
							}
						}
					}
					else_if = {
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = MLI
									original_tag = MLI
								}
							}
							ROOT = { original_tag = KAY }
						}
						MLI = {
							white_peace = KAY
							annex_country = {
								target = KAY
								transfer_troops = no
							}
						}
					}
					set_global_flag = skip_default_capitulation
					set_global_flag = WAC_over_civil_war_peace
				}

				## FREE FRANCE IN THE WAA (SCENARIO 1)
				else_if = {
					limit = {
						has_global_flag = WAC_scenario_1
						NOT = {
							has_global_flag = WAC_over
							has_global_flag = WAC_over_civil_war_peace
						}
						OR = {
							FROM = { is_west_african_nation = yes }
							ROOT = { is_west_african_nation = yes }
						}
					}
					
					if = { # WAA VICTORY
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = FFR
									is_in_faction_with = WOL
								}
							}
							ROOT = { original_tag = CAO }
						}

						every_country = {
							limit = {
								OR = {
									has_war_with = WOL
									has_war_with = FFR
								}
							}
							leave_faction = yes
							every_country = {
								limit = {
									OR = {
										is_in_faction_with = WOL
										original_tag = WOL
									}
								}
								white_peace = PREV
							}
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_1_WAA_VICTORY = yes
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						set_global_flag = skip_default_capitulation
					}

					else_if = { # PALF VICTORY
						limit = {
							FROM = { is_in_faction_with = CAO }
							ROOT = {
								OR = {
									is_in_faction_with = FFR
									is_in_faction_with = WOL
								}
							}
						}
						if = {
							limit = { ROOT = { original_tag = FFR } }
							set_global_flag = WAC_scen1_ffr_fell
							if = {
								limit = { country_exists = GBE }
								CAO = {
									annex_country = {
										target = GBE
										transfer_troops = no
									}
								}
							}
							WOL = {
								load_oob = "FFR_exiles_1962"
							}
						}
						if = {
							limit = { ROOT = { original_tag = WOL } }
							set_global_flag = WAC_scen1_wol_fell
						}
						if = { # final victory
							limit = {
								has_global_flag = WAC_scen1_ffr_fell
								has_global_flag = WAC_scen1_wol_fell
							}
							every_country = {
								limit = { has_war_with = CAO }
								leave_faction = yes
								every_country = {
									limit = { is_in_faction_with = CAO }
									white_peace = PREV
								}
							}
							ZZZ = {
								TNO_WAC_clear_decision_categories = yes
								WAC_1_PALF_VICTORY = yes
							}
							set_global_flag = skip_default_capitulation
						}
						else = { # failsafe
							every_country = {
								limit = { is_puppet_of = ROOT }
								ROOT = {
									end_puppet = PREV
									add_to_faction = PREV
									every_country = {
										limit = { has_war_with = ROOT }
										PREV.PREV = {
											add_to_war = {
												targeted_alliance = ROOT
												enemy = PREV
											}
										}
									}
								}
							}
							ROOT = {
								leave_faction = yes
								every_country = {
									limit = { has_war_with = ROOT }
									white_peace = ROOT
								}
							}
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
							set_global_flag = skip_default_capitulation
						}
					}

					else = { # war continues
						every_country = {
							limit = { is_puppet_of = ROOT }
							ROOT = {
								end_puppet = PREV
								add_to_faction = PREV
								every_country = {
									limit = { has_war_with = ROOT }
									PREV.PREV = {
										add_to_war = {
											targeted_alliance = ROOT
											enemy = PREV
										}
									}
								}
							}
						}
						ROOT = {
							leave_faction = yes
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = CAO }
								ROOT = { original_tag = YOR }
							}
							CAO = {
								annex_country = {
									target = YOR
									transfer_troops = no
								}
							}
						}
						else = {
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}
						set_global_flag = skip_default_capitulation
					}
				}

				## BATTLE ROYALE (SCENARIO 2)
				else_if = {
					limit = {
						has_global_flag = WAC_scenario_2
						NOT = {
							has_global_flag = WAC_over
							has_global_flag = WAC_over_civil_war_peace
						}
						FROM = { is_west_african_nation = yes }
						ROOT = { is_west_african_nation = yes }
					}
					if = {
						limit = { ROOT = { original_tag = FFR } }
						set_global_flag = WAC_scen2_ffr_fell
						if = {
							limit = {
								FROM = { is_in_faction_with = WOL }
								country_exists = GBE
							}
							every_country = {
								limit = { has_war_with = GBE }
								white_peace = GBE
							}
							EWE = {
								annex_country = {
									target = GBE
									transfer_troops = no
								}
							}
						}
						else_if = {
							limit = { country_exists = GBE }
							every_country = {
								limit = { has_war_with = GBE }
								white_peace = GBE
							}
							CAO = {
								annex_country = {
									target = GBE
									transfer_troops = no
								}
							}
						}
					}
					if = {
						limit = { ROOT = { original_tag = WOL } }
						set_global_flag = WAC_scen2_wol_fell
					}
					if = {
						limit = { ROOT = { original_tag = CAO } }
						every_country = {
							limit = { has_war_with = CAO }
							white_peace = CAO
						}
						ZZZ = { WAC_2_PALF_BEATEN = yes }
						set_global_flag = skip_default_capitulation
					}
					if = { # WAA VICTORY ROYALE
						limit = {
							FROM = { is_in_faction_with = WOL }
							ROOT = {
								OR = {
									original_tag = FFR
									original_tag = CAO
								}
							}
							has_global_flag = WAC_scen2_ffr_fell
							has_global_flag = WAC_scen2_cao_fell
						}

						every_country = {
							limit = { has_war_with = WOL }
							leave_faction = yes
							white_peace = WOL
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_2_WAA_VICTORY = yes
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						set_global_flag = skip_default_capitulation
					}
					else_if = { # FRENCH VICTORY ROYALE
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = FFR
									is_puppet_of = FFR
								}
							}
							ROOT = {
								OR = {
									original_tag = WOL
									original_tag = CAO
								}
							}
							has_global_flag = WAC_scen2_wol_fell
							has_global_flag = WAC_scen2_cao_fell
						}

						every_country = {
							limit = { has_war_with = FFR }
							leave_faction = yes
							white_peace = FFR
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_2_FFR_VICTORY = yes
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						set_global_flag = skip_default_capitulation
					}
					else_if = { # PALF VICTORY ROYALE
						limit = {
							FROM = { is_in_faction_with = CAO }
							ROOT = {
								OR = {
									original_tag = FFR
									original_tag = WOL
								}
							}
							has_global_flag = WAC_scen2_ffr_fell
							has_global_flag = WAC_scen2_wol_fell
						}

						every_country = {
							limit = { has_war_with = CAO }
							leave_faction = yes
							white_peace = CAO
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_2_PALF_VICTORY = yes
						}
						set_global_flag = skip_default_capitulation
					}

					else = { # war continues
						every_country = {
							limit = { is_puppet_of = ROOT }
							ROOT = {
								end_puppet = PREV
								add_to_faction = PREV
								every_country = {
									limit = { has_war_with = ROOT }
									PREV.PREV = {
										add_to_war = {
											targeted_alliance = ROOT
											enemy = PREV
										}
									}
								}
							}
						}
						ROOT = {
							leave_faction = yes
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = CAO }
								ROOT = { original_tag = YOR }
							}
							CAO = {
								annex_country = {
									target = YOR
									transfer_troops = no
								}
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = MLI }
								ROOT = { original_tag = KAY }
							}
							MLI = {
								annex_country = {
									target = KAY
									transfer_troops = no
								}
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = KAY }
								ROOT = { original_tag = MLI }
							}
							KAY = {
								annex_country = {
									target = MLI
									transfer_troops = no
								}
							}
						}
						else = {
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}
						set_global_flag = skip_default_capitulation
					}
				}

				## CAMEROON ON THE OFFENSIVE (SCENARIO 3)
				else_if = {
					limit = {
						has_global_flag = WAC_scenario_3
						NOT = {
							has_global_flag = WAC_over
							has_global_flag = WAC_over_civil_war_peace
						}
						FROM = { is_west_african_nation = yes }
						ROOT = { is_west_african_nation = yes }
					}
					
					if = { # FMA WINS
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = FFR
									is_puppet_of = FFR
									is_in_faction_with = WOL
									is_in_faction_with = SUS
								}
							}
							ROOT = { original_tag = CAO }
						}
						if = {
							limit = { country_exists = YOR }
							every_country = {
								limit = { has_war_with = YOR }
								white_peace = YOR
							}
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_3_FMA_VICTORY = yes
						}
						set_global_flag = skip_default_capitulation
					}
					else_if = { # PALF WINS
						limit = {
							FROM = {
								OR = {
									is_in_faction_with = CAO
									is_puppet_of = CAO
								}
							}
							OR = {
								AND = {
									ROOT = { original_tag = FFR }
									NOT = { country_exists = WOL }
									NOT = { country_exists = SUS }
								}
								AND = {
									ROOT = { original_tag = WOL }
									NOT = { country_exists = FFR }
									NOT = { country_exists = SUS }
								}
								AND = {
									ROOT = { original_tag = SUS }
									NOT = { country_exists = FFR }
									NOT = { country_exists = WOL }
								}
							}
						}

						every_country = {
							limit = { has_war_with = CAO }
							leave_faction = yes
							every_country = {
								limit = { is_in_faction_with = CAO }
								white_peace = PREV
							}
						}
						ZZZ = {
							TNO_WAC_clear_decision_categories = yes
							WAC_3_PALF_VICTORY = yes
						}
						set_global_flag = skip_default_capitulation
					}
					else = { # war continues
						every_country = {
							limit = { is_puppet_of = ROOT }
							ROOT = {
								end_puppet = PREV
								add_to_faction = PREV
								every_country = {
									limit = { has_war_with = ROOT }
									PREV.PREV = {
										add_to_war = {
											targeted_alliance = ROOT
											enemy = PREV
										}
									}
								}
							}
						}
						ROOT = {
							leave_faction = yes
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						if = {
							limit = {
								ROOT = { original_tag = FFR }
								country_exists = WOL
							}
							WOL = {
								load_oob = "FFR_exiles_1962"
							}
						}
						if = {
							limit = {
								ROOT = { original_tag = YOR }
							}
							CAO = {
								annex_country = {
									target = YOR
									transfer_troops = no
								}								
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = MLI }
								ROOT = { original_tag = KAY }
							}
							MLI = {
								annex_country = {
									target = KAY
									transfer_troops = no
								}
							}
						}
						if = {
							limit = {
								FROM = { is_in_faction_with = KAY }
								ROOT = { original_tag = MLI }
							}
							KAY = {
								annex_country = {
									target = MLI
									transfer_troops = no
								}
							}
						}
						else = {
							FROM = {
								annex_country = {
									target = ROOT
									transfer_troops = no
								}
							}
						}

						set_global_flag = skip_default_capitulation
					}
				}


				## Post-WAC ##
				else_if = { # Mano Campaign
					limit = {
						has_global_flag = mano_campaign_ongoing
						OR = {
							FROM = { is_west_african_nation = yes }
							ROOT = { is_west_african_nation = yes }
						}
					}

					# Sierra Leone
					if = {
						limit = { FROM = { original_tag = MDI } }
						set_global_flag = skip_default_capitulation
						if = {
							limit = { country_exists = LIB }
							country_event = {
								id = west_african_crisis.19
							}
						}
					}
					else_if = {
						limit = { ROOT = { original_tag = MDI } }
						set_global_flag = skip_default_capitulation
						set_global_flag = skip_default_capitulation
						ROOT = {
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						FROM = {
							annex_country = {
								target = MDI
								transfer_troops = no
							}
						}

						if = {
							limit = { has_global_flag = mano_campaign_ongoing }
							USA = { set_country_flag = manu_retreat }
							LIB = {
								remove_ideas = AFRICA_defense_debuff_1
								add_ideas = AFRICA_defense_debuff
							}
						}
					}

					# Liberia
					if = {
						limit = { FROM = { original_tag = LIB } }
						set_global_flag = skip_default_capitulation
						if = {
							limit = { country_exists = MDI }
							country_event = {
								id = west_african_crisis.19
							}
						}
					}
					else_if = {
						limit = { ROOT = { original_tag = LIB } }
						set_global_flag = skip_default_capitulation
						ROOT = {
							every_country = {
								limit = { has_war_with = ROOT }
								white_peace = ROOT
							}
						}
						FROM = {
							annex_country = {
								target = LIB
								transfer_troops = no
							}
						}

						if = {
							limit = { country_exists = MDI }
							FROM = {
								annex_country = {
									target = MDI
									transfer_troops = no
								}
							}
						}

						ZZZ = {
							TNO_Manu_clear_decision_categories = yes
							MANU_PALF_VICTORY = yes
						}
					}
				}
				if = { # Wac Fixes
					limit = {
						FROM = {
							OR = {
								original_tag = WOL
								original_tag = MLI
								original_tag = SUS
								original_tag = FTF
								original_tag = FFR
								original_tag = CAO
								original_tag = SWB
								original_tag = YOR
								original_tag = GBE
								original_tag = EWE
							}
						}
					}
					log = "WAC continues"
					ROOT = { OVERLORD = { end_puppet = PREV } }
				}




				if = { # Nukes
					limit = {
						NOT = { has_global_flag = nukes_disabled }
						FROM = {
							has_nuclear_arsenal = yes
						}
						ROOT = {
							has_nuclear_arsenal = yes
							NOT = { has_country_flag = TNO_nuke_disabled }
						}
					}
					ROOT = { country_event = { id = nuclearwar.6 days = 7 } }
					FROM = { country_event = { id = nuclearwar.6 days = 7 } }
				}

				# https://www.youtube.com/watch?v=P8xZe7W62WI -> battle cry of freedom is better, cope
				if = {
					limit = {
						FROM = {
							OR = {
								original_tag = USA
								is_in_faction_with = USA
							}
						}
						ROOT = {
							OR = {
								original_tag = GER
								original_tag = JAP
							}
						}
					}
					USA = {
						if = {
							limit = { has_global_flag = nukes_disabled }
							add_to_variable = { america_saves_the_world_counter = 1 }
							if = {
								limit = { check_variable = { america_saves_the_world_counter = 2 } }
								country_event = { id = USA.1776 days = 2 }
								clear_variable = america_saves_the_world_counter
							}
						}
						else = {
							country_event = { id = nuclearwar.6 days = 5 }
						}
					}
				}

				#Capitulation block
				set_global_flag = war_continuing
			}
			clr_global_flag = skip_default_capitulation
			clr_global_flag = WAC_over_civil_war_peace
		}
	}
	#don't mind me just logging wars
	on_declare_war = {
		effect = {
			log="[GetDateText]: [Root.GetName] declared war on [From.GetName]"
		}
	}
}
